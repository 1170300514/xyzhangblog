<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/xyzhangblog/2021/04/18/java/springmvc-jiao-cheng/springmvc-jiao-cheng/"/>
      <url>/xyzhangblog/2021/04/18/java/springmvc-jiao-cheng/springmvc-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringMVCæ•™ç¨‹"><a href="#SpringMVCæ•™ç¨‹" class="headerlink" title="SpringMVCæ•™ç¨‹"></a>SpringMVCæ•™ç¨‹</h2><h3 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h3><p>MVCæ˜¯æ¨¡å‹(Model) : dao,serviceã€è§†å›¾(View) : jspã€æ§åˆ¶å™¨(Controller) : serlvetçš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚MVCä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆ</strong>ã€‚</p><p><strong>Modelï¼ˆæ¨¡å‹ï¼‰ï¼š</strong>æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p><p><strong>Viewï¼ˆè§†å›¾ï¼‰ï¼š</strong>è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p><p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š</strong>æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p><p><strong>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</strong></p><p><strong>MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</strong></p><ol><li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³• .</li><li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® .</li><li>å¤„ç†è¯·æ±‚â€“è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†â€“å°è£…å“åº”æ•°æ® .</li><li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp / html ç­‰è¡¨ç¤ºå±‚æ•°æ® .</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/xyzhangblog/2021/04/18/java/mybatis-jiao-cheng/mybatis-jiao-cheng/"/>
      <url>/xyzhangblog/2021/04/18/java/mybatis-jiao-cheng/mybatis-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="MyBatisæ•™ç¨‹"><a href="#MyBatisæ•™ç¨‹" class="headerlink" title="MyBatisæ•™ç¨‹"></a>MyBatisæ•™ç¨‹</h2><p>å®˜æ–¹æ•™ç¨‹ <a href="https://mybatis.org/mybatis-3/zh/getting-started.html">https://mybatis.org/mybatis-3/zh/getting-started.html</a></p><h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>â€‹    MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong>ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ï¼ˆRestSetï¼‰ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Ordinary Java Object,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><h4 id="1-1-æŒä¹…å±‚"><a href="#1-1-æŒä¹…å±‚" class="headerlink" title="1.1 æŒä¹…å±‚"></a>1.1 æŒä¹…å±‚</h4><ul><li><p>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç </p></li><li><p>æ•°æ®æŒä¹…åŒ–ï¼šå°†æ•°æ®åœ¨æŒä¹…çŠ¶æ€ä¸ç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹ã€‚</p><p>ä½¿ç”¨MyBatisåŸå› ï¼šç®€åŒ–JDBCä»£ç ï¼Œè§£é™¤sqlä¸ç¨‹åºä»£ç çš„è€¦åˆæé«˜å¯ç»´æŠ¤æ€§ï¼Œæ”¯æŒåŠ¨æ€sql</p></li></ul><h3 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2. ä½¿ç”¨"></a>2. ä½¿ç”¨</h3><h4 id="2-1-é…ç½®æ–‡ä»¶"><a href="#2-1-é…ç½®æ–‡ä»¶" class="headerlink" title="2.1 é…ç½®æ–‡ä»¶"></a>2.1 é…ç½®æ–‡ä»¶</h4><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ç¯å¢ƒ ç”¨environmentè¿›è¡ŒåŒ…è£¹ è¿›è¡Œé»˜è®¤é€‰æ‹© æ­¤å¤„é»˜è®¤é€‰æ‹©developmentç¯å¢ƒ--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token comment" spellcheck="true">&lt;!--mysqlé©±åŠ¨--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token comment" spellcheck="true">&lt;!--urlè¿æ¥æ•°æ®åº“ é€šè¿‡å³ä¾§çš„databaseé€‰é¡¹è¿›è¡Œæ•°æ®åº“è¿æ¥--></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/mybatis?useSSL<span class="token punctuation">=</span>true&amp;amp;serverTimezone<span class="token punctuation">=</span>UTC<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org/mybatis/example/BlogMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre><h4 id="2-2-ä»XMLä¸­æ„å»ºSqlSessionFactoryè·å–-SqlSession"><a href="#2-2-ä»XMLä¸­æ„å»ºSqlSessionFactoryè·å–-SqlSession" class="headerlink" title="2.2 ä»XMLä¸­æ„å»ºSqlSessionFactoryè·å– SqlSession"></a>2.2 ä»XMLä¸­æ„å»ºSqlSessionFactoryè·å– SqlSession</h4><blockquote><p>æ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚SqlSessionFactory çš„å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆå®šåˆ¶çš„ Configuration çš„å®ä¾‹æ„å»ºå‡º SqlSessionFactory çš„å®ä¾‹ã€‚</p></blockquote><p>ä»å»ºé€ è€…æ¨¡å¼çš„builderåˆ›å»ºå‡ºfactory</p><p>è·å–sqlsessionfactoryå¯¹è±¡</p><pre class=" language-java"><code class="language-java">        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//è·å–é…ç½®æ–‡ä»¶</span>            String resource <span class="token operator">=</span> <span class="token string">"org/mybatis/example/mybatis-config.xml"</span><span class="token punctuation">;</span>            InputStream inputStream <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//åŠ è½½æµæ„å»ºå·¥å‚</span>            SqlSessionFactory sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span></code></pre><ul><li>è·å–åˆ°SqlSessionFactoryå¯¹è±¡åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å– SqlSession çš„å®ä¾‹ã€‚SqlSessionå®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡ŒSQLå‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ï¼Œé€šè¿‡è¯¥å®ä¾‹å°±å¯ä»¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„SQLè¯­å¥ã€‚</li></ul><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> SqlSession <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><ul><li><p>ä»æ•°æ®åº“ä¸­è·å–æƒ³è¦çš„æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p><strong>ï¼ˆæ¨èä½¿ç”¨ï¼‰</strong>ä½¿ç”¨æ­£ç¡®æè¿°æ¯ä¸ªè¯­å¥çš„å‚æ•°å’Œè¿”å›å€¼çš„æ¥å£ï¼ˆæ¯”å¦‚ UserDao.classï¼‰ï¼Œä¸ä»…å¯ä»¥æ‰§è¡Œæ¸…æ™°å’Œç±»å‹å®‰å…¨çš„ä»£ç ï¼Œè€Œä¸”è¿˜ä¸ç”¨è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><pre class=" language-java"><code class="language-java">UserDao mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>UserDao<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//éœ€è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ ä¸æ¨è</span>List<span class="token operator">&lt;</span>User<span class="token operator">></span> userList <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">"com.xyzhang.dao.UserDao.getUserList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul></li></ul><h4 id="2-3-æ‰§è¡Œæµç¨‹è§£æ"><a href="#2-3-æ‰§è¡Œæµç¨‹è§£æ" class="headerlink" title="2.3 æ‰§è¡Œæµç¨‹è§£æ"></a>2.3 æ‰§è¡Œæµç¨‹è§£æ</h4><p>MyBatis æä¾›çš„å…¨éƒ¨ç‰¹æ€§éƒ½å¯ä»¥åˆ©ç”¨åŸºäº XML çš„æ˜ å°„è¯­è¨€æ¥å®ç°ï¼Œä¸‹æ–‡çš„ä¾‹å­å¯æ»¡è¶³ä»¥ä¸Šå¯¹SqlSessionçš„è°ƒç”¨</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype">&lt;!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.xyzhang.dao.UserDao<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--selectæŸ¥è¯¢è¯­å¥--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getUserList<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.xyzhang.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.user    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><ol><li><p>åœ¨å‘½åç©ºé—´â€œcom.xyzhang.dao.UserDaoâ€ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œgetUserListâ€çš„æ˜ å°„è¯­å¥ï¼Œè¿™ç§å‘½åå…è®¸ä½¿ç”¨æŒ‡å®šçš„å®Œå…¨é™å®šåâ€œcom.xyzhang.dao.UserDao.getUserListâ€æ¥è°ƒç”¨æ˜ å°„è¯­å¥ã€‚<code>List&lt;User&gt; userList = sqlSession.selectList("com.xyzhang.dao.UserDao.getUserList");</code></p></li><li><p>è¯¥å‘½åä¹Ÿå¯ä»¥ç›´æ¥æ˜ å°„åˆ°åœ¨å‘½åç©ºé—´ä¸­åŒåçš„ Mapper ç±»ï¼Œå¹¶å°†å·²æ˜ å°„çš„ select è¯­å¥ä¸­çš„åå­—ã€å‚æ•°å’Œè¿”å›ç±»å‹åŒ¹é…æˆæ–¹æ³•ã€‚</p><p><code>UserDao mapper = sqlSession.getMapper(UserDao.class); List&lt;User&gt; userList = mapper.getUserList();</code></p><ul><li>ç¬¬äºŒç§æ–¹æ³•æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œé¦–å…ˆå®ƒä¸ä¾èµ–äºå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä¼šæ›´å®‰å…¨ä¸€ç‚¹ï¼› å…¶æ¬¡ï¼Œå¦‚æœä½ çš„ IDE æœ‰ä»£ç è¡¥å…¨åŠŸèƒ½ï¼Œé‚£ä¹ˆä»£ç è¡¥å…¨å¯ä»¥å¸®ä½ å¿«é€Ÿé€‰æ‹©å·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</li></ul></li></ol><p><img src="Mybatis-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.png" alt="Mybatis-æ‰§è¡Œæµç¨‹"></p><h4 id="2-4-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"><a href="#2-4-ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.4 ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ"></a>2.4 ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ</h4><p><img src="Mybatis-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="Mybatis-ç”Ÿå‘½å‘¨æœŸ"></p><p><strong>SqlSessionFactoryBuilder</strong>ï¼š</p><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯<strong>å±€éƒ¨æ–¹æ³•å˜é‡</strong>ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯ä¸è¦è®©å…¶ä¸€ç›´å­˜åœ¨ï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</p><p><strong>SqlSessionFactoryï¼šæ•°æ®åº“è¿æ¥æ± </strong></p><p>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´<strong>ä¸€ç›´å­˜åœ¨</strong>ï¼Œä¸åº”ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºã€‚ å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸï¼ˆå…¨å±€å˜é‡ï¼‰ã€‚ æœ€ç®€å•çš„å®ç°æ–¹å¼æ˜¯<strong>ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼</strong>ã€‚</p><p><strong>SqlSessionï¼šæ•°æ®åº“è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚</strong></p><p><strong>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹</strong>ã€‚SqlSession çš„å®ä¾‹<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚</p><p>æ¯æ¬¡æ”¶åˆ°çš„ HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”ï¼Œå°±å…³é—­å®ƒã€‚</p><p>å¹¶ä¸”åº”è¯¥æŠŠå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ä»¥ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­ã€‚</p><p><strong>æ˜ å°„å™¨å®ä¾‹ï¼š</strong>ï¼ˆmapperï¼‰</p><p>æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä» SqlSession ä¸­è·å¾—çš„ã€‚å› æ­¤ä»æŠ€æœ¯å±‚é¢è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸæ˜¯å’Œè¯·æ±‚å®ƒä»¬çš„ SqlSession ç›¸åŒçš„ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæ˜ å°„å™¨å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹åº”è¯¥åœ¨è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¸­è¢«è¯·æ±‚ï¼Œç”¨è¿‡ä¹‹åå³å¯ä¸¢å¼ƒã€‚ </p><p>æœ€å¥½æŠŠæ˜ å°„å™¨æ”¾åœ¨æ–¹æ³•ä½œç”¨åŸŸå†…ï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span>SqlSession session <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  BlogMapper mapper <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>BlogMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span><span class="token punctuation">}</span></code></pre><h4 id="2-5-æ—¥åä½¿ç”¨æ–¹å¼"><a href="#2-5-æ—¥åä½¿ç”¨æ–¹å¼" class="headerlink" title="2.5 æ—¥åä½¿ç”¨æ–¹å¼"></a>2.5 æ—¥åä½¿ç”¨æ–¹å¼</h4><p>åªä¿®æ”¹æ¥å£ï¼ˆUserMapper.javaï¼‰å’Œé…ç½®æ–‡ä»¶ï¼ˆresourceæ–‡ä»¶ä¸‹çš„UserMapper.xmlï¼‰å³å¯</p><h3 id="3-XMLæ˜ å°„æ–‡ä»¶åŠæ³¨è§£"><a href="#3-XMLæ˜ å°„æ–‡ä»¶åŠæ³¨è§£" class="headerlink" title="3. XMLæ˜ å°„æ–‡ä»¶åŠæ³¨è§£"></a>3. XMLæ˜ å°„æ–‡ä»¶åŠæ³¨è§£</h3><h4 id="3-0-æ³¨è§£ï¼š"><a href="#3-0-æ³¨è§£ï¼š" class="headerlink" title="3.0 æ³¨è§£ï¼š"></a>3.0 æ³¨è§£ï¼š</h4><ol><li><p>ç®€åŒ–å¼€å‘ï¼Œç›´æ¥åœ¨æ¥å£ä¸Šå®ç°æ·»åŠ æ³¨è§£ï¼›</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·</span><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id,name,pwd password from user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸Šä½¿ç”¨classç»‘å®šæ¥å£ï¼ˆä¸æ˜¯é…ç½®æ–‡ä»¶ï¼‰ï¼Œä½†å¯ä»¥ä¸é…ç½®æ–‡ä»¶åŒæ—¶ä½¿ç”¨ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--ä½¿ç”¨classç»‘å®šæ¥å£--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.kuang.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre></li></ol><p>å®ç°æœºåˆ¶ï¼šåå°„</p><p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†</p><p><strong>å…³äº@Param() æ³¨è§£ï¼š</strong></p><ul><li>åœ¨æ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ä½¿ç”¨@Paramã€‚</li><li>åœ¨æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸€å®šè¦ä½¿ç”¨@Paramæ³¨è§£ç»™å‚æ•°å‘½åã€‚</li><li>å¦‚æœå‚æ•°æ˜¯ å¯¹è±¡ç±»å‹ï¼Œ åˆ™ä¸èƒ½ä½¿ç”¨@Paramã€‚</li><li>ä¸ä½¿ç”¨@Paramæ³¨è§£æ—¶ï¼Œå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯Javabeanã€‚</li></ul><h4 id="3-1-namespace"><a href="#3-1-namespace" class="headerlink" title="3.1 namespace"></a>3.1 namespace</h4><h4 id="3-2-selectï¼šé€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥"><a href="#3-2-selectï¼šé€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥" class="headerlink" title="3.2 selectï¼šé€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥"></a>3.2 selectï¼šé€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥</h4><ul><li>idï¼šå¯¹åº”namespaceä¸­çš„æ–¹æ³•åï¼›</li><li>resultTypeï¼šSqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼ï¼›</li><li>parameterTypeï¼šå‚æ•°ç±»å‹</li></ul><p>ğŸ“Œ<strong>å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡sqlSessionã€‚commit()ï¼›</strong>ä¹Ÿå¯åœ¨getSqlsession()æ—¶è®¾ç½®ä¸ºè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼ˆè®¾ç½®å‚æ•°ä¸ºtrueå³å¯ çœ‹<strong>æºç ï¼ï¼ï¼</strong>ï¼‰</p><pre class=" language-java"><code class="language-java">    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//é€šè¿‡å®ä½“ç±»è·å–sqlSessionå®ä¾‹</span>        SqlSession sqlSession <span class="token operator">=</span> MybatisUtils<span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è·å–æ˜ å°„å®ä¾‹</span>        UserMapper mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>UserMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mapper<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"Num4"</span><span class="token punctuation">,</span><span class="token string">"147852"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æäº¤äº‹åŠ¡æ‰èƒ½æ·»åŠ æˆåŠŸï¼ï¼ï¼</span>        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h4 id="3-3-Insert"><a href="#3-3-Insert" class="headerlink" title="3.3 Insert"></a>3.3 Insert</h4><h4 id="3-4-update"><a href="#3-4-update" class="headerlink" title="3.4 update"></a>3.4 update</h4><h4 id="3-5-delete"><a href="#3-5-delete" class="headerlink" title="3.5 delete"></a>3.5 delete</h4><ul><li>ä»¥ä¸Šæ“ä½œçš„é€šç”¨é¡ºåºï¼š</li></ul><ol><li>ç¼–å†™æ¥å£</li><li>ç¼–å†™å¯¹åº”mapperçš„sqlè¯­å¥</li><li>æµ‹è¯•</li></ol><h4 id="3-6-mapä¼ é€’å‚æ•°"><a href="#3-6-mapä¼ é€’å‚æ•°" class="headerlink" title="3.6 mapä¼ é€’å‚æ•°"></a>3.6 mapä¼ é€’å‚æ•°</h4><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">//ä½¿ç”¨mapè¿›è¡Œæ•°æ®æ’å…¥</span>    <span class="token keyword">int</span> <span class="token function">addUser2</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>addUser2<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        insert into mybatis.user(id, name, pwd) values (#{id},#{name},#{pwd});    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">//æµ‹è¯•ä½¿ç”¨mapå¢åŠ å¯¹è±¡</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        SqlSession sqlSession <span class="token operator">=</span> MybatisUtils<span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        UserMapper mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>UserMapper<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">,</span><span class="token string">"159357"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mapper<span class="token punctuation">.</span><span class="token function">addUser2</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨SQLä¸­å–å‡ºkeyï¼ã€parameterType=â€mapâ€ã€‘</p><p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å¯¹è±¡çš„å±æ€§å³å¯ï¼ã€parameterType=â€com.xyzhang.pojo.Userâ€ã€‘</p><p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°ã€parameterTypeå¯ä»¥çœç•¥ä¸å†™ã€‘</p><p>å¤šä¸ªå‚æ•°ç”¨mapä¼ é€’æˆ–è€…ä½¿ç”¨æ³¨è§£ã€‚</p><h4 id="3-7-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#3-7-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="3.7 æ¨¡ç³ŠæŸ¥è¯¢"></a>3.7 æ¨¡ç³ŠæŸ¥è¯¢</h4><p>éœ€è¦æ³¨æ„å¯¹æŸ¥è¯¢å­—ç¬¦ä¸²è¿›è¡Œè½¬ä¹‰ï¼š</p><ol><li>åœ¨sqlè¯­å¥ä¸­è¿›è¡Œè½¬ä¹‰ï¼ˆå¯èƒ½ä¼šå‡ºç°sqlæ³¨å…¥ç­‰æƒ…å†µï¼‰</li></ol><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mybatis<span class="token punctuation">.</span> <span class="token keyword">user</span> <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">"%"</span> <span class="token comment" spellcheck="true">#{value } "%";</span></code></pre><ol start="2"><li>åœ¨ä¼ å…¥å­—ç¬¦ä¸²æ—¶è¿›è¡Œè½¬ä¹‰</li></ol><pre class=" language-java"><code class="language-java">mapper<span class="token punctuation">.</span><span class="token function">getUserLike</span><span class="token punctuation">(</span><span class="token string">"%å¼ %"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="4-XMLé…ç½®å­—æ®µä½œç”¨"><a href="#4-XMLé…ç½®å­—æ®µä½œç”¨" class="headerlink" title="4. XMLé…ç½®å­—æ®µä½œç”¨"></a>4. XMLé…ç½®å­—æ®µä½œç”¨</h3><p>é…ç½®æ–‡ä»¶ä¸­çš„å­—æ®µé¡ºåºå¿…é¡»éµå¾ªä»¥ä¸‹é¡ºåº</p><ul><li>configurationï¼ˆé…ç½®ï¼‰<br>propertiesï¼ˆå±æ€§ï¼‰<br>settingsï¼ˆè®¾ç½®ï¼‰<br>typeAliasesï¼ˆç±»å‹åˆ«åï¼‰<br>typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰<br>objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰<br>pluginsï¼ˆæ’ä»¶ï¼‰<br>environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰<br>environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰<br>transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰<br>dataSourceï¼ˆæ•°æ®æºï¼‰<br>databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰<br>mappersï¼ˆæ˜ å°„å™¨ï¼‰</li></ul><h4 id="4-1-environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰"><a href="#4-1-environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰" class="headerlink" title="4.1 environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰"></a>4.1 environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</h4><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</p><ul><li><p>ä¸ºäº†æŒ‡å®šåˆ›å»ºå“ªç§ç¯å¢ƒï¼Œåªè¦å°†å®ƒä½œä¸ºå¯é€‰çš„å‚æ•°ä¼ é€’ç»™ SqlSessionFactoryBuilder å³å¯ã€‚</p><pre class=" language-java"><code class="language-java">SqlSessionFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> environment<span class="token punctuation">)</span><span class="token punctuation">;</span>SqlSessionFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> environment<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>å¦‚æœå¿½ç•¥äº†ç¯å¢ƒå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ç¯å¢ƒå°†ä¼šè¢«åŠ è½½:</p><pre class=" language-java"><code class="language-java">SqlSessionFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>SqlSessionFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­éœ€è¦æ³¨æ„çš„å…³é”®ç‚¹ï¼š</p><ul><li>é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šdefault=â€developmentâ€ï¼‰ã€‚</li><li>æ¯ä¸ª environment å…ƒç´ å®šä¹‰çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šid=â€developmentâ€ï¼‰ã€‚</li><li>äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€JDBCâ€ï¼‰ã€‚</li><li>æ•°æ®æºçš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype=â€POOLEDâ€ï¼‰ã€‚</li></ul><p><strong>äº‹åŠ¡ç®¡ç†å™¨ï¼šï¼ˆJDBC/MANAGEDï¼‰</strong></p><p>ğŸ“Œå¦‚æœä½¿ç”¨Springæ¡†æ¶ï¼Œä¸éœ€æ‰‹åŠ¨é…ç½®ä¼šä½¿ç”¨è‡ªå¸¦çš„ç®¡ç†å™¨</p><p><strong>æ•°æ®æºï¼šï¼ˆUNPOOLED|POOLED|JNDIï¼‰</strong></p><p>POOLEDï¼šåˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ã€‚ è¿™æ˜¯ä¸€ç§ä½¿å¾—å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„æµè¡Œå¤„ç†æ–¹å¼ã€‚</p><p><strong>Mybatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨ä¸ºJDBCï¼Œæ•°æ®æºä¸ºPOOLEDè¿æ¥æ± </strong></p><h4 id="4-2-propertiesï¼ˆå±æ€§ï¼‰"><a href="#4-2-propertiesï¼ˆå±æ€§ï¼‰" class="headerlink" title="4.2 propertiesï¼ˆå±æ€§ï¼‰"></a>4.2 propertiesï¼ˆå±æ€§ï¼‰</h4><p>ä½œç”¨ï¼šå¼•ç”¨é…ç½®æ–‡ä»¶</p><p>è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚</p><p>ç¼–å†™å¤–éƒ¨é…ç½®æ–‡ä»¶</p><p>åœ¨Mybatisä¸­çš„é…ç½®æ–‡ä»¶è¿›è¡Œå¼•ç”¨ï¼š</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org/mybatis/example/config.properties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--å¯ä»¥åœ¨å¼•å…¥å¤–éƒ¨æ–‡ä»¶çš„åŸºç¡€ä¸Šæ·»åŠ å±æ€§é…ç½®--></span>  <span class="token comment" spellcheck="true">&lt;!--ä½†å½“å­—æ®µé‡å¤æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dev_user<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>F2Fa3!33TYyg<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span></code></pre><h4 id="4-3-typeAliasesï¼ˆç±»å‹åˆ«åï¼‰"><a href="#4-3-typeAliasesï¼ˆç±»å‹åˆ«åï¼‰" class="headerlink" title="4.3 typeAliasesï¼ˆç±»å‹åˆ«åï¼‰"></a>4.3 typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</h4><p>ä½œç”¨ï¼šç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚ å®ƒåªå’Œ XML é…ç½®æœ‰å…³ï¼Œå­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥<strong>å‡å°‘ç±»å®Œå…¨é™å®šå</strong>çš„å†—ä½™</p><ol><li>ç»™å®ä½“ç±»èµ·åˆ«å</li></ol><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.xyzhang.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAlias</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">></span></span></code></pre><ol start="2"><li><p>ç»™åŒ…èµ·åˆ«åï¼šåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨é¦–å­—æ¯å°å†™çš„ç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«å</p><p>ä¾‹å¦‚ï¼šcom.xyzhang.pojo.Userçš„åˆ«åå°±æ˜¯user</p></li></ol><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.xyzhang.pojo<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">></span></span></code></pre><p>å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œå¦åˆ™ä½¿ç”¨ç¬¬äºŒç§ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼å¯ä»¥è‡ªå®šä¹‰åˆ«åï¼Œç¬¬äºŒç§åªèƒ½è·Ÿéšç±»åï¼Œä½†å¯é€šè¿‡æ³¨è§£æ–¹å¼è¿›è¡Œå‘½åæ›´æ”¹<code>@Aliase</code>ã€‚</p><p>åŸºæœ¬ç±»å‹çš„åˆ«ååœ¨å…¶æ˜ å°„ç±»å‹çš„å‰é¢æ·»åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ï¼š<code>_int   int</code></p><p>åŒ…è£…ç±»å‹åˆ«åå°±æ˜¯å…¶æ˜ å°„ç±»å‹é¦–å­—æ¯çš„å°å†™ï¼š<code>int   Integer</code></p><h4 id="4-4-settingsï¼ˆè®¾ç½®ï¼‰"><a href="#4-4-settingsï¼ˆè®¾ç½®ï¼‰" class="headerlink" title="4.4 settingsï¼ˆè®¾ç½®ï¼‰"></a>4.4 settingsï¼ˆè®¾ç½®ï¼‰</h4><table><thead><tr><th>è®¾ç½®å</th><th align="center">æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>cacheEnabled</td><td align="center">å…¨å±€åœ°å¼€å¯æˆ–å…³é—­é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ˜ å°„å™¨å·²ç»é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</td><td>true</td></tr><tr><td>lazyLoadingEnabled</td><td align="center">å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td><td>false</td></tr><tr><td>logImpl</td><td align="center">æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td><td></td></tr></tbody></table><h4 id="4-5-æ˜ å°„å™¨mapper"><a href="#4-5-æ˜ å°„å™¨mapper" class="headerlink" title="4.5 æ˜ å°„å™¨mapper"></a>4.5 æ˜ å°„å™¨mapper</h4><p>Mybaitsè¡Œä¸ºé…ç½®å®Œæˆåéœ€è¦å®šä¹‰SQLæ˜ å°„è¯­å¥ï¼Œå¹¶å‘Šè¯‰MyBatisæŸ¥æ‰¾è¿™äº›è¯­å¥çš„è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨<strong>ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨</strong>ï¼Œ æˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ <code>file:///</code> çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰</p><p>æ–¹å¼ä¸€ï¼šã€æ¨èä½¿ç”¨ã€‘</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.xyzhang.dao/UserMapper.xml<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre><p>æ–¹å¼äºŒï¼šä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ</p><ul><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåä¸”å¤„äºåŒä¸€åŒ…ä¸‹</li></ul><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.mybatis.builder.AuthorMapper<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">></span></span></code></pre><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</p><ul><li>æ¥å£å’ŒMapperé…ç½®æ–‡ä»¶å¿…é¡»åŒå</li></ul><h4 id="4-6-å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´"><a href="#4-6-å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´" class="headerlink" title="4.6 å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´"></a>4.6 å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´</h4><p><img src="Mybatis%E5%B1%9E%E6%80%A7%E5%AD%97%E6%AE%B5%E4%B8%8D%E4%B8%80%E8%87%B4.png" alt="Mybatiså±æ€§å­—æ®µä¸ä¸€è‡´"></p><p>è¿è¡Œåå‘ç°ä¸ä¸€è‡´çš„å±æ€§è·å–åˆ°çš„å€¼ä¸ºnull</p><p>åŸå› ï¼š</p><pre class=" language-xml"><code class="language-xml">ç±»å‹å¤„ç†å™¨æ‰¾ä¸åˆ°å¯¹åº”çš„å­—æ®µselect * from mybatis.user where id = #{id}select id,name,pwd from mybatis.user where id = #{id}</code></pre><p>è§£å†³æ–¹å¼ï¼š</p><ol><li>èµ·åˆ«åï¼š</li></ol><pre class=" language-xml"><code class="language-xml">select id,name,pwd as password from mybatis.user where id = #{id}</code></pre><ol start="2"><li><p><strong>ResultMap</strong>ğŸ“Œç»“æœé›†æ˜ å°„</p><ol><li><p>å°†è¿”å›å€¼ç±»å‹ç”±resultTypeæ›´æ”¹ä¸ºresultMap</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getUserByID<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UserMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.user where id = #{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre></li><li><p>æ·»åŠ ç»“æœé›†æ˜ å°„UserMapè®¾ç½®Typeä¸ºå…¶å¯¹åº”çš„ç±»å‹</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UserMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--columnï¼šæ•°æ®åº“ä¸­å­—æ®µ propertyï¼šå®ä½“ç±»ä¸­å±æ€§--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pwd<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre></li></ol></li></ol><ul><li><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li><li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚</li></ul><h3 id="5-æ—¥å¿—"><a href="#5-æ—¥å¿—" class="headerlink" title="5. æ—¥å¿—"></a>5. æ—¥å¿—</h3><h4 id="5-1-æ ‡å‡†å®ç°"><a href="#5-1-æ ‡å‡†å®ç°" class="headerlink" title="5.1 æ ‡å‡†å®ç°"></a>5.1 æ ‡å‡†å®ç°</h4><p>ç§ç±»ï¼š</p><p>SLF4J | LOG4Jã€æŒæ¡ã€‘ | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING ã€æŒæ¡ã€‘| NO_LOGGING</p><p>åœ¨Mybatisä¸­å®ç°å“ªä¸ªæ—¥å¿—ï¼Œéœ€è¦åœ¨è®¾ç½®ä¸­æŒ‡å®š</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--æ ‡å‡†çš„æ—¥å¿—å·¥å‚å®ç°--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logImpl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>STDOUT_LOGGING<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">></span></span></code></pre><p><img src="Mybatis-logging.PNG" alt="Mybatis-logging"></p><h4 id="5-2-Log4J"><a href="#5-2-Log4J" class="headerlink" title="5.2 Log4J"></a>5.2 Log4J</h4><ul><li>å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">æ§åˆ¶å°</a>ã€æ–‡ä»¶ã€<a href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶ï¼Œç”šè‡³æ˜¯å¥—æ¥å£æœåŠ¡å™¨ã€<a href="https://baike.baidu.com/item/NT/3443842">NT</a>çš„äº‹ä»¶è®°å½•å™¨ã€<a href="https://baike.baidu.com/item/UNIX">UNIX</a> <a href="https://baike.baidu.com/item/Syslog">Syslog</a><a href="https://baike.baidu.com/item/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/966835">å®ˆæŠ¤è¿›ç¨‹</a>ç­‰</li><li>å¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li><li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹</li><li>å¯ä»¥é€šè¿‡ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç </li></ul><ol><li><p>Mavenå¯¼å…¥Log4JåŒ…</p></li><li><p>åœ¨ç±»è·¯å¾„ä¸‹å»ºç«‹log4j.properties</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true">### Log4jé…ç½® ###</span><span class="token comment" spellcheck="true">#å®šä¹‰log4jçš„è¾“å‡ºçº§åˆ«å’Œè¾“å‡ºç›®çš„åœ°ï¼ˆç›®çš„åœ°å¯ä»¥è‡ªå®šä¹‰åç§°ï¼Œå’Œåé¢çš„å¯¹åº”ï¼‰</span><span class="token comment" spellcheck="true">#[ level ] , appenderName1 , appenderName2</span><span class="token attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG,console,file</span><span class="token comment" spellcheck="true">#-----------------------------------#</span><span class="token comment" spellcheck="true">#1 å®šä¹‰æ—¥å¿—è¾“å‡ºç›®çš„åœ°ä¸ºæ§åˆ¶å°</span><span class="token attr-name">log4j.appender.console</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.ConsoleAppender</span><span class="token attr-name">log4j.appender.console.Target</span> <span class="token punctuation">=</span> <span class="token attr-value">System.out</span><span class="token attr-name">log4j.appender.console.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span><span class="token comment" spellcheck="true">####å¯ä»¥çµæ´»åœ°æŒ‡å®šæ—¥å¿—è¾“å‡ºæ ¼å¼ï¼Œä¸‹é¢ä¸€è¡Œæ˜¯æŒ‡å®šå…·ä½“çš„æ ¼å¼ ###</span><span class="token comment" spellcheck="true">#%c: è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ‰€å±çš„ç±»ç›®ï¼Œé€šå¸¸å°±æ˜¯æ‰€åœ¨ç±»çš„å…¨å</span><span class="token comment" spellcheck="true">#%m: è¾“å‡ºä»£ç ä¸­æŒ‡å®šçš„æ¶ˆæ¯,äº§ç”Ÿçš„æ—¥å¿—å…·ä½“ä¿¡æ¯</span><span class="token comment" spellcheck="true">#%n: è¾“å‡ºä¸€ä¸ªå›è½¦æ¢è¡Œç¬¦ï¼ŒWindowså¹³å°ä¸º"/r/n"ï¼ŒUnixå¹³å°ä¸º"/n"è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ¢è¡Œ</span><span class="token attr-name">log4j.appender.console.layout</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.PatternLayout</span><span class="token attr-name">log4j.appender.console.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%c]-%m%n</span><span class="token comment" spellcheck="true">#-----------------------------------#</span><span class="token comment" spellcheck="true">#2 æ–‡ä»¶å¤§å°åˆ°è¾¾æŒ‡å®šå°ºå¯¸çš„æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶</span><span class="token attr-name">log4j.appender.file</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.RollingFileAppender</span><span class="token comment" spellcheck="true">#æ—¥å¿—æ–‡ä»¶è¾“å‡ºç›®å½•</span><span class="token attr-name">log4j.appender.file.File</span><span class="token punctuation">=</span><span class="token attr-value">log/info.log</span><span class="token comment" spellcheck="true">#å®šä¹‰æ–‡ä»¶æœ€å¤§å¤§å°</span><span class="token attr-name">log4j.appender.file.MaxFileSize</span><span class="token punctuation">=</span><span class="token attr-value">10mb</span><span class="token comment" spellcheck="true">###è¾“å‡ºæ—¥å¿—ä¿¡æ¯###</span><span class="token comment" spellcheck="true">#æœ€ä½çº§åˆ«</span><span class="token attr-name">log4j.appender.file.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">ERROR</span><span class="token attr-name">log4j.appender.file.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span><span class="token attr-name">log4j.appender.file.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%p][%d{yy-MM-dd}][%c]%m%n</span><span class="token comment" spellcheck="true">#-----------------------------------#</span><span class="token comment" spellcheck="true">#3 druid</span><span class="token attr-name">log4j.logger.druid.sql</span><span class="token punctuation">=</span><span class="token attr-value">INFO</span><span class="token attr-name">log4j.logger.druid.sql.DataSource</span><span class="token punctuation">=</span><span class="token attr-value">info</span><span class="token attr-name">log4j.logger.druid.sql.Connection</span><span class="token punctuation">=</span><span class="token attr-value">info</span><span class="token attr-name">log4j.logger.druid.sql.Statement</span><span class="token punctuation">=</span><span class="token attr-value">info</span><span class="token attr-name">log4j.logger.druid.sql.ResultSet</span><span class="token punctuation">=</span><span class="token attr-value">info</span><span class="token comment" spellcheck="true">#4 mybatis æ˜¾ç¤ºSQLè¯­å¥éƒ¨åˆ†</span><span class="token attr-name">log4j.logger.org.mybatis</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span><span class="token attr-name">log4j.logger.java.sql</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span><span class="token attr-name">log4j.logger.java.sql.Statement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span><span class="token attr-name">log4j.logger.java.sql.ResultSet</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span><span class="token attr-name">log4j.logger.java.sql.PreparedStatement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span></code></pre></li><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„settingså­—æ®µä¸­ï¼Œé…ç½®log4jä¸ºæ—¥å¿—å·¥å‚çš„å®ç°</p></li></ol><h4 id="ç®€å•ä½¿ç”¨ï¼š"><a href="#ç®€å•ä½¿ç”¨ï¼š" class="headerlink" title="ç®€å•ä½¿ç”¨ï¼š"></a>ç®€å•ä½¿ç”¨ï¼š</h4><ol><li><p>åœ¨è¦ä½¿ç”¨Log4jçš„ç±»ä¸­å¼•å…¥<code>import org.apache.log4j.Logger;</code></p></li><li><p>å®šä¹‰æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class</p><p><code>static Logger logger = Logger.getLogger(UserDaoTest.class);</code></p></li><li><p>åŒºåˆ†æ—¥å¿—çº§åˆ«</p><pre class=" language-java"><code class="language-java">logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><h3 id="6-åˆ†é¡µ"><a href="#6-åˆ†é¡µ" class="headerlink" title="6. åˆ†é¡µ"></a>6. åˆ†é¡µ</h3><h4 id="6-1-ä½¿ç”¨limitåˆ†é¡µ"><a href="#6-1-ä½¿ç”¨limitåˆ†é¡µ" class="headerlink" title="6.1 ä½¿ç”¨limitåˆ†é¡µ"></a>6.1 ä½¿ç”¨limitåˆ†é¡µ</h4><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span>pageSize</code></pre><h4 id="6-2-ä½¿ç”¨Mybatiså®ç°åˆ†é¡µ"><a href="#6-2-ä½¿ç”¨Mybatiså®ç°åˆ†é¡µ" class="headerlink" title="6.2 ä½¿ç”¨Mybatiså®ç°åˆ†é¡µ"></a>6.2 ä½¿ç”¨Mybatiså®ç°åˆ†é¡µ</h4><ol><li><p>æ¥å£</p></li><li><p>Mapper.xml</p><pre class=" language-xml"><code class="language-xml">    <span class="token comment" spellcheck="true">&lt;!--åˆ†é¡µ--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getUserByLimit<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userMap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.user limit #{startIndex} , #{pageSize};    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre></li></ol><ol start="3"><li>æµ‹è¯•</li></ol><h4 id="6-3-ä½¿ç”¨RowBoundsåˆ†é¡µã€ä¸æ¨èã€‘"><a href="#6-3-ä½¿ç”¨RowBoundsåˆ†é¡µã€ä¸æ¨èã€‘" class="headerlink" title="6.3 ä½¿ç”¨RowBoundsåˆ†é¡µã€ä¸æ¨èã€‘"></a>6.3 ä½¿ç”¨RowBoundsåˆ†é¡µã€ä¸æ¨èã€‘</h4><h3 id="7-ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€çš„å¤„ç†"><a href="#7-ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€çš„å¤„ç†" class="headerlink" title="7. ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€çš„å¤„ç†"></a>7. ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€çš„å¤„ç†</h3><ul><li>å¤šä¸ªå­¦ç”Ÿï¼Œå¯¹åº”ä¸€ä¸ªè€å¸ˆ</li><li>å¯¹äºå­¦ç”Ÿè¿™è¾¹è€Œè¨€ï¼Œ<strong>å…³è”</strong>â€¦å¤šä¸ªå­¦ç”Ÿï¼Œå…³è”ä¸€ä¸ªè€å¸ˆã€å¤šå¯¹ä¸€ã€‘</li><li>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œ<strong>é›†åˆ</strong>ï¼Œä¸€ä¸ªè€å¸ˆå¯¹åº”å¾ˆå¤šå­¦ç”Ÿã€ä¸€å¯¹å¤šã€‘</li></ul><h4 id="7-1-å¤šå¯¹ä¸€çš„å¤„ç†"><a href="#7-1-å¤šå¯¹ä¸€çš„å¤„ç†" class="headerlink" title="7.1 å¤šå¯¹ä¸€çš„å¤„ç†"></a>7.1 å¤šå¯¹ä¸€çš„å¤„ç†</h4><p>å¤šå¯¹ä¸€ç¯å¢ƒæ­å»ºï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//å¤šä¸ªå­¦ç”Ÿå¯ä»¥æ˜¯åŒä¸€ä¸ªè€å¸ˆï¼Œå³å¤šå¯¹ä¸€</span>    <span class="token keyword">private</span> Teacher teacher<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ol><li><p>æŒ‰<strong>æŸ¥è¯¢åµŒå¥—</strong>å¤„ç†</p><pre class=" language-xml"><code class="language-xml">    <span class="token comment" spellcheck="true">&lt;!--    éœ€æ±‚ï¼šè·å–æ‰€æœ‰å­¦ç”ŸåŠå¯¹åº”è€å¸ˆçš„ä¿¡æ¯    æ€è·¯ï¼š        1. è·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯        2. æ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID->è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯        3. æ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ            1. åšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šStudentTeacher            2. StudentTeacherç»“æœé›†çš„ç±»å‹ä¸º Student            3. å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚               å¤šä¸ª [1,...ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=> ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š            4. æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getStudents<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      select * from student    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>StudentTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--associationå…³è”å±æ€§  propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span>  <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Teacher<span class="token punctuation">"</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--    è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼    associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š        column="{key=value,key=value}"        å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from teacher where id = #{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre></li><li><p>æŒ‰ç…§æŸ¥è¯¢<strong>ç»“æœ</strong>åµŒå¥—</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--æŒ‰æŸ¥è¯¢ç»“æœåµŒå¥—å¤„ç†æ€è·¯ï¼š    1. ç›´æ¥æŸ¥è¯¢å‡ºç»“æœï¼Œè¿›è¡Œç»“æœé›†çš„æ˜ å°„--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getStudents2<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>StudentTeacher2<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    select s.id sid, s.name sname , t.name tname    from student s,teacher t    where s.tid = t.id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--éœ€è¦å¯¹åº”æ•°æ®åº“åˆ—åä¸åˆ«å--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>StudentTeacher2<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sid<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--å…³è”å¯¹è±¡property å…³è”å¯¹è±¡åœ¨Studentå®ä½“ç±»ä¸­çš„å±æ€§--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>teacher<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre></li></ol><h4 id="7-2-ä¸€å¯¹å¤šçš„å¤„ç†"><a href="#7-2-ä¸€å¯¹å¤šçš„å¤„ç†" class="headerlink" title="7.2 ä¸€å¯¹å¤šçš„å¤„ç†"></a>7.2 ä¸€å¯¹å¤šçš„å¤„ç†</h4><p>ç†è§£ï¼š</p><ul><li>ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</li><li>å¦‚æœå¯¹äºè€å¸ˆè¿™è¾¹ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€å¯¹å¤šçš„ç°è±¡ï¼Œå³ä»ä¸€ä¸ªè€å¸ˆä¸‹é¢æ‹¥æœ‰ä¸€ç¾¤å­¦ç”Ÿï¼ˆé›†åˆï¼‰</li></ul><p>ç¯å¢ƒæ­å»ºï¼š</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> tid<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸€ä¸ªè€å¸ˆå¤šä¸ªå­¦ç”Ÿ</span>    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Student<span class="token operator">></span> students<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ol><li><p>æŒ‰ç»“æœåµŒå¥—å¤„ç†</p><pre class=" language-xml"><code class="language-xml">    <span class="token comment" spellcheck="true">&lt;!--    æ€è·¯:        1. ä»å­¦ç”Ÿè¡¨å’Œè€å¸ˆè¡¨ä¸­æŸ¥å‡ºå­¦ç”Ÿidï¼Œå­¦ç”Ÿå§“åï¼Œè€å¸ˆå§“å        2. å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ“ä½œåšç»“æœé›†æ˜ å°„            1. é›†åˆçš„è¯ï¼Œä½¿ç”¨collectionï¼                JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„                JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹                ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getTeacher<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>TeacherStudent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select s.id sid, s.name sname , t.name tname, t.id tid        from student s,teacher t        where s.tid = t.id and t.id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>TeacherStudent<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span>  <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tname<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>students<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sid<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sname<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tid<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span></code></pre></li><li><p>æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç†</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getTeacher2<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>TeacherStudent2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  select * from teacher where id = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>TeacherStudent2<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Teacher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--columnæ˜¯ä¸€å¯¹å¤šçš„å¤–é”® , å†™çš„æ˜¯ä¸€çš„ä¸»é”®çš„åˆ—å--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>students<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ArrayList<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getStudentByTeacherId<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>getStudentByTeacherId<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Student<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from student where tid = #{id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre></li></ol><h4 id="7-3-æ€»ç»“"><a href="#7-3-æ€»ç»“" class="headerlink" title="7.3 æ€»ç»“"></a>7.3 æ€»ç»“</h4><ol><li>å…³è”-association</li><li>é›†åˆ-collection</li><li>æ‰€ä»¥associationæ˜¯ç”¨äºä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€ï¼Œè€Œcollectionæ˜¯ç”¨äºä¸€å¯¹å¤šçš„å…³ç³»</li><li>JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„<ul><li>JavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹</li><li>ofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚</li></ul></li></ol><h3 id="8-åŠ¨æ€SQL"><a href="#8-åŠ¨æ€SQL" class="headerlink" title="8. åŠ¨æ€SQL"></a>8. åŠ¨æ€SQL</h3><p>æœ¬è´¨å°±æ˜¯æ‹¼æ¥sqlè¯­å¥ï¼Œæ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ç”Ÿæˆä¸åŒsqlè¯­å¥</p><p>å¸¸ç”¨æ ‡ç­¾ï¼š</p><ul><li>if</li><li>choose (when, otherwise)</li><li>trim (where, set)</li><li>foreach</li></ul><ol><li><p>å¯¼åŒ…</p></li><li><p>ç¼–å†™é…ç½®æ–‡ä»¶<code>mybatis-config.xml</code></p></li><li><p>ç¼–å†™å®ä½“ç±»(é…ç½®æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªè®¾ç½®æ–¹æ³•å¯ä»¥å°†æ•°æ®åº“ä¸­çš„å‘½åæ ¼å¼è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°å¼å‘½å)<code>&lt;setting name="mapUnderscoreToCamelCase" value="true"/&gt;</code></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String title<span class="token punctuation">;</span>    <span class="token keyword">private</span> String author<span class="token punctuation">;</span>    <span class="token keyword">private</span> Date createTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> views<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li><p>ç¼–å†™å®ä½“ç±»å¯¹åº”çš„Mapperæ¥å£å’ŒMapper.xml</p></li></ol><h4 id="8-1-IFè¯­å¥"><a href="#8-1-IFè¯­å¥" class="headerlink" title="8.1 IFè¯­å¥"></a>8.1 IFè¯­å¥</h4><p>è¿™æ¡è¯­å¥æä¾›äº†ä¸€ç§å¯é€‰çš„æŸ¥æ‰¾æ–‡æœ¬åŠŸèƒ½ã€‚å¦‚æœæ²¡æœ‰ä¼ å…¥â€œtitleâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰æ»¡è¶³â€œ1=1â€ï¼ˆæ‰€æœ‰ï¼‰çš„BLOGéƒ½ä¼šè¿”å›ï¼›åä¹‹è‹¥ä¼ å…¥äº†â€œtitleâ€ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹â€œtitleâ€ä¸€åˆ—è¿›è¡Œæ¨¡ç³ŠæŸ¥æ‰¾å¹¶è¿”å› BLOG ç»“æœ</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--éœ€æ±‚1ï¼šæ ¹æ®ä½œè€…åå­—å’Œåšå®¢åå­—æ¥æŸ¥è¯¢åšå®¢ï¼å¦‚æœä½œè€…åå­—ä¸ºç©ºï¼Œé‚£ä¹ˆåªæ ¹æ®åšå®¢åå­—æŸ¥è¯¢ï¼Œåä¹‹ï¼Œåˆ™æ ¹æ®ä½œè€…åæ¥æŸ¥è¯¢select * from blog where title = #{title} and author = #{author}--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBlogIF<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.blog where 1=1        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            and title = #{title}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>author !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            and author = #{author}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><h4 id="8-2-trim-where-set"><a href="#8-2-trim-where-set" class="headerlink" title="8.2 trim, where, set"></a>8.2 trim, where, set</h4><p><em>where</em> å…ƒç´ åªä¼šåœ¨è‡³å°‘æœ‰ä¸€ä¸ªå­å…ƒç´ çš„æ¡ä»¶è¿”å› SQL å­å¥çš„æƒ…å†µä¸‹æ‰å»æ’å…¥â€œWHEREâ€å­å¥ã€‚è€Œä¸”ï¼Œè‹¥è¯­å¥çš„å¼€å¤´ä¸ºâ€œANDâ€æˆ–â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚(ç›¸å½“äºè¾…åŠ©sqlè¯­å¥çš„ç”Ÿæˆ)</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBlogIF<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.blog        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                title = #{title}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>author !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                and author = #{author}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><p>ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥(updateè¯­å¥)çš„è§£å†³æ–¹æ¡ˆå«åš <em>set</em>ã€‚<em>set</em> å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œè€Œèˆå»å…¶å®ƒçš„ã€‚</p><p>è‹¥æœ€åä¸€ä¸ªâ€œifâ€æ²¡æœ‰åŒ¹é…ä¸Šè€Œå‰é¢çš„åŒ¹é…ä¸Šï¼ŒSQL è¯­å¥çš„æœ€åå°±ä¼šæœ‰ä¸€ä¸ªé€—å·é—ç•™æ­¤æ—¶setå…ƒç´ å°±ä¼šè‡ªåŠ¨åˆ æ‰æ— å…³çš„é€—å·</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateBlog<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        update mybatis.blog        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>title = #{title},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>author !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>author = #{author},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>views !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>views = #{views}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">></span></span>        where id = #{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">></span></span></code></pre><ul><li><p>ä»¥ä¸Šä¸¤ç§æ“ä½œéƒ½å¯ä»¥ä½¿ç”¨trimå…ƒç´ æ¥å®ç°ï¼Œwhereå…ƒç´ é‡‡ç”¨<em>prefixOverrides</em> ç§»é™¤å‰ç¼€å€¼ï¼Œå¹¶ä¸”æ’å…¥ <em>prefix</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œsetå…ƒç´ åˆ™é‡‡ç”¨suffixOverrides=â€,â€ï¼Œç§»é™¤åç¼€å€¼</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>WHERE<span class="token punctuation">"</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>AND |OR <span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">></span></span></code></pre></li></ul><blockquote><p>åŠ¨æ€SQLæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ï¼Œåªæ˜¯åœ¨SQLå±‚é¢æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç </p></blockquote><h4 id="8-3-choose-when-otherwise"><a href="#8-3-choose-when-otherwise" class="headerlink" title="8.3 choose, when, otherwise"></a>8.3 choose, when, otherwise</h4><p>æœ‰æ—¶æˆ‘ä»¬ä¸æƒ³åº”ç”¨åˆ°æ‰€æœ‰çš„æ¡ä»¶è¯­å¥ï¼Œè€Œåªæƒ³ä»ä¸­æ‹©å…¶ä¸€é¡¹ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBlogChoose<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from mybatis.blog        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>author !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                author = #{author};            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                title = #{title};            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">></span></span>                views = #{views};            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><h4 id="8-4-SQLç‰‡æ®µ"><a href="#8-4-SQLç‰‡æ®µ" class="headerlink" title="8.4 SQLç‰‡æ®µ"></a>8.4 SQLç‰‡æ®µ</h4><p>ç›¸å½“äºå®šä¹‰å‡½æ•°ï¼ŒæŠ½å–å…¬å…±éƒ¨åˆ†ï¼Œæ–¹ä¾¿å¤ç”¨</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>if-title-author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        title = #{title}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>author !<span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        and author = #{author}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--ä½¿ç”¨includeè¿›è¡Œå¼•ç”¨--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBlogIf<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from blog    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>if-title-author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><h4 id="8-5-foreach"><a href="#8-5-foreach" class="headerlink" title="8.5 foreach"></a>8.5 foreach</h4><p><em>foreach</em> å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠåœ¨è¿­ä»£ç»“æœä¹‹é—´æ”¾ç½®åˆ†éš”ç¬¦ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>queryBlogForeach<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from blog    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--        ä¸Javaä¸­foreachå¾ªç¯ç±»ä¼¼        collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§        item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡        open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸²        close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²        separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²        select * from blog where 1=1 and (id=1 or id=2 or id=3)      --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ids<span class="token punctuation">"</span></span>  <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>and (<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>or<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            id=#{id}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span></code></pre><h3 id="9-ç¼“å­˜"><a href="#9-ç¼“å­˜" class="headerlink" title="9. ç¼“å­˜"></a>9. ç¼“å­˜</h3><h4 id="9-1-ä¸€çº§ç¼“å­˜"><a href="#9-1-ä¸€çº§ç¼“å­˜" class="headerlink" title="9.1 ä¸€çº§ç¼“å­˜"></a>9.1 ä¸€çº§ç¼“å­˜</h4><p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p><ul><li>æ¯ä¸ªsqlSessionä¸­çš„ç¼“å­˜ç›¸äº’ç‹¬ç«‹ï¼Œä¸åŒsqlSessionç¼“å­˜ä¹Ÿä¸äº’é€š</li><li>sqlSessionç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒ</li><li>sqlSessionç›¸åŒï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œ</li><li>sqlSessionç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤ä¸€çº§ç¼“å­˜</li></ul><p>ä¸€çº§ç¼“å­˜é»˜è®¤å¼€å¯ï¼Œåªåœ¨ä¸€ä¸ªsqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ°é“¾æ¥åˆ°å…³é—­è¿æ¥çš„è¿‡ç¨‹</p><h4 id="9-2-äºŒçº§ç¼“å­˜ï¼ˆå…¨å±€ç¼“å­˜ï¼‰"><a href="#9-2-äºŒçº§ç¼“å­˜ï¼ˆå…¨å±€ç¼“å­˜ï¼‰" class="headerlink" title="9.2 äºŒçº§ç¼“å­˜ï¼ˆå…¨å±€ç¼“å­˜ï¼‰"></a>9.2 äºŒçº§ç¼“å­˜ï¼ˆå…¨å±€ç¼“å­˜ï¼‰</h4><ul><li>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</li><li>å·¥ä½œæœºåˆ¶<ul><li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li><li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li><li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li><li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li></ul></li></ul><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯å…¨å±€ç¼“å­˜<code>mybatis-config.xml</code></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cacheEnabled<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre></li><li><p>æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜<code>xxxMapper.xml</code></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>  <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>FIFO<span class="token punctuation">"</span></span>  <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>60000<span class="token punctuation">"</span></span>  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>512<span class="token punctuation">"</span></span>  <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre><p>è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</p></li></ol><p>ç»“è®ºï¼š</p><ul><li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</li><li>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li><li>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</li></ul><h4 id="9-3-ç¼“å­˜åŸç†"><a href="#9-3-ç¼“å­˜åŸç†" class="headerlink" title="9.3 ç¼“å­˜åŸç†"></a>9.3 ç¼“å­˜åŸç†</h4><ol><li>æŸ¥è¯¢äºŒçº§ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ç›´æ¥è¿”å›</li><li>æŸ¥è¯¢ä¸€çº§ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ç›´æ¥è¿”å›</li><li>æŸ¥è¯¢æ•°æ®åº“</li></ol><p><img src="Mybatis-%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86.png" alt="Mybatis-ç¼“å­˜åŸç†"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>RestfulAPIæœ€ä½³å®è·µ</title>
      <link href="/xyzhangblog/2020/12/31/java/springboot/restful-api-zui-jia-shi-jian/restfulapi-zui-jia-shi-jian/"/>
      <url>/xyzhangblog/2020/12/31/java/springboot/restful-api-zui-jia-shi-jian/restfulapi-zui-jia-shi-jian/</url>
      
        <content type="html"><![CDATA[<p>[è½¬è½½] åŸåˆ›å‡ºå¤„ <a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html">http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html</a> ã€Œé˜®ä¸€å³°ã€</p><h2 id="ä¸€ã€URL-è®¾è®¡"><a href="#ä¸€ã€URL-è®¾è®¡" class="headerlink" title="ä¸€ã€URL è®¾è®¡"></a>ä¸€ã€URL è®¾è®¡</h2><h3 id="1-1-åŠ¨è¯-å®¾è¯­"><a href="#1-1-åŠ¨è¯-å®¾è¯­" class="headerlink" title="1.1 åŠ¨è¯ + å®¾è¯­"></a>1.1 åŠ¨è¯ + å®¾è¯­</h3><p>RESTful çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®æ“ä½œæŒ‡ä»¤éƒ½æ˜¯â€åŠ¨è¯ + å®¾è¯­â€çš„ç»“æ„ã€‚æ¯”å¦‚ï¼Œ<code>GET /articles</code>è¿™ä¸ªå‘½ä»¤ï¼Œ<code>GET</code>æ˜¯åŠ¨è¯ï¼Œ<code>/articles</code>æ˜¯å®¾è¯­ã€‚</p><p>åŠ¨è¯é€šå¸¸å°±æ˜¯äº”ç§ HTTP æ–¹æ³•ï¼Œå¯¹åº” CRUD æ“ä½œã€‚</p><blockquote><ul><li>GETï¼šè¯»å–ï¼ˆReadï¼‰</li><li>POSTï¼šæ–°å»ºï¼ˆCreateï¼‰</li><li>PUTï¼šæ›´æ–°ï¼ˆUpdateï¼‰</li><li>PATCHï¼šæ›´æ–°ï¼ˆUpdateï¼‰ï¼Œé€šå¸¸æ˜¯éƒ¨åˆ†æ›´æ–°</li><li>DELETEï¼šåˆ é™¤ï¼ˆDeleteï¼‰</li></ul></blockquote><p>æ ¹æ® HTTP è§„èŒƒï¼ŒåŠ¨è¯ä¸€å¾‹å¤§å†™ã€‚</p><h3 id="1-2-åŠ¨è¯çš„è¦†ç›–"><a href="#1-2-åŠ¨è¯çš„è¦†ç›–" class="headerlink" title="1.2 åŠ¨è¯çš„è¦†ç›–"></a>1.2 åŠ¨è¯çš„è¦†ç›–</h3><p>æœ‰äº›å®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨<code>GET</code>å’Œ<code>POST</code>è¿™ä¸¤ç§æ–¹æ³•ã€‚æœåŠ¡å™¨å¿…é¡»æ¥å—<code>POST</code>æ¨¡æ‹Ÿå…¶ä»–ä¸‰ä¸ªæ–¹æ³•ï¼ˆ<code>PUT</code>ã€<code>PATCH</code>ã€<code>DELETE</code>ï¼‰ã€‚</p><p>è¿™æ—¶ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚ï¼Œè¦åŠ ä¸Š<code>X-HTTP-Method-Override</code>å±æ€§ï¼Œå‘Šè¯‰æœåŠ¡å™¨åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªåŠ¨è¯ï¼Œè¦†ç›–<code>POST</code>æ–¹æ³•ã€‚</p><blockquote><pre class=" language-http"><code class="language-http">POST /api/Person/4 HTTP/1.1  <span class="token header-name keyword">X-HTTP-Method-Override:</span> PUT</code></pre></blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>X-HTTP-Method-Override</code>æŒ‡å®šæœ¬æ¬¡è¯·æ±‚çš„æ–¹æ³•æ˜¯<code>PUT</code>ï¼Œè€Œä¸æ˜¯<code>POST</code>ã€‚</p><h3 id="1-3-å®¾è¯­å¿…é¡»æ˜¯åè¯"><a href="#1-3-å®¾è¯­å¿…é¡»æ˜¯åè¯" class="headerlink" title="1.3 å®¾è¯­å¿…é¡»æ˜¯åè¯"></a>1.3 å®¾è¯­å¿…é¡»æ˜¯åè¯</h3><p>å®¾è¯­å°±æ˜¯ API çš„ URLï¼Œæ˜¯ HTTP åŠ¨è¯ä½œç”¨çš„å¯¹è±¡ã€‚å®ƒåº”è¯¥æ˜¯åè¯ï¼Œä¸èƒ½æ˜¯åŠ¨è¯ã€‚æ¯”å¦‚ï¼Œ<code>/articles</code>è¿™ä¸ª URL å°±æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸‹é¢çš„ URL ä¸æ˜¯åè¯ï¼Œæ‰€ä»¥éƒ½æ˜¯é”™è¯¯çš„ã€‚</p><blockquote><ul><li>/getAllCars</li><li>/createNewCar</li><li>/deleteAllRedCars</li></ul></blockquote><h3 id="1-4-å¤æ•°-URL"><a href="#1-4-å¤æ•°-URL" class="headerlink" title="1.4 å¤æ•° URL"></a>1.4 å¤æ•° URL</h3><p>æ—¢ç„¶ URL æ˜¯åè¯ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨å¤æ•°ï¼Œè¿˜æ˜¯å•æ•°ï¼Ÿ</p><p>è¿™æ²¡æœ‰ç»Ÿä¸€çš„è§„å®šï¼Œä½†æ˜¯å¸¸è§çš„æ“ä½œæ˜¯è¯»å–ä¸€ä¸ªé›†åˆï¼Œæ¯”å¦‚<code>GET /articles</code>ï¼ˆè¯»å–æ‰€æœ‰æ–‡ç« ï¼‰ï¼Œè¿™é‡Œæ˜æ˜¾åº”è¯¥æ˜¯å¤æ•°ã€‚</p><p>ä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œå»ºè®®éƒ½ä½¿ç”¨å¤æ•° URLï¼Œæ¯”å¦‚<code>GET /articles/2</code>è¦å¥½äº<code>GET /article/2</code>ã€‚</p><h3 id="1-5-é¿å…å¤šçº§-URL"><a href="#1-5-é¿å…å¤šçº§-URL" class="headerlink" title="1.5 é¿å…å¤šçº§ URL"></a>1.5 é¿å…å¤šçº§ URL</h3><p>å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œèµ„æºéœ€è¦å¤šçº§åˆ†ç±»ï¼Œå› æ­¤å¾ˆå®¹æ˜“å†™å‡ºå¤šçº§çš„ URLï¼Œæ¯”å¦‚è·å–æŸä¸ªä½œè€…çš„æŸä¸€ç±»æ–‡ç« ã€‚</p><blockquote><pre class=" language-http"><code class="language-http">GET /authors/12/categories/2</code></pre></blockquote><p>è¿™ç§ URL ä¸åˆ©äºæ‰©å±•ï¼Œè¯­ä¹‰ä¹Ÿä¸æ˜ç¡®ï¼Œå¾€å¾€è¦æƒ³ä¸€ä¼šï¼Œæ‰èƒ½æ˜ç™½å«ä¹‰ã€‚</p><p>æ›´å¥½çš„åšæ³•æ˜¯ï¼Œé™¤äº†ç¬¬ä¸€çº§ï¼Œå…¶ä»–çº§åˆ«éƒ½ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²è¡¨è¾¾ã€‚</p><blockquote><pre class=" language-http"><code class="language-http">GET /authors/12?categories=2</code></pre></blockquote><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢å·²å‘å¸ƒçš„æ–‡ç« ã€‚ä½ å¯èƒ½ä¼šè®¾è®¡æˆä¸‹é¢çš„ URLã€‚</p><blockquote><pre class=" language-http"><code class="language-http">GET /articles/published</code></pre></blockquote><p>æŸ¥è¯¢å­—ç¬¦ä¸²çš„å†™æ³•æ˜æ˜¾æ›´å¥½ã€‚</p><blockquote><pre class=" language-http"><code class="language-http">GET /articles?published=true</code></pre></blockquote><h2 id="äºŒã€çŠ¶æ€ç "><a href="#äºŒã€çŠ¶æ€ç " class="headerlink" title="äºŒã€çŠ¶æ€ç "></a>äºŒã€çŠ¶æ€ç </h2><h3 id="2-1-çŠ¶æ€ç å¿…é¡»ç²¾ç¡®"><a href="#2-1-çŠ¶æ€ç å¿…é¡»ç²¾ç¡®" class="headerlink" title="2.1 çŠ¶æ€ç å¿…é¡»ç²¾ç¡®"></a>2.1 çŠ¶æ€ç å¿…é¡»ç²¾ç¡®</h3><p>å®¢æˆ·ç«¯çš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½å¿…é¡»ç»™å‡ºå›åº”ã€‚å›åº”åŒ…æ‹¬ HTTP çŠ¶æ€ç å’Œæ•°æ®ä¸¤éƒ¨åˆ†ã€‚</p><p>HTTP çŠ¶æ€ç å°±æ˜¯ä¸€ä¸ªä¸‰ä½æ•°ï¼Œåˆ†æˆäº”ä¸ªç±»åˆ«ã€‚</p><blockquote><ul><li><code>1xx</code>ï¼šç›¸å…³ä¿¡æ¯</li><li><code>2xx</code>ï¼šæ“ä½œæˆåŠŸ</li><li><code>3xx</code>ï¼šé‡å®šå‘</li><li><code>4xx</code>ï¼šå®¢æˆ·ç«¯é”™è¯¯</li><li><code>5xx</code>ï¼šæœåŠ¡å™¨é”™è¯¯</li></ul></blockquote><p>è¿™äº”å¤§ç±»æ€»å…±åŒ…å«<a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">100å¤šç§</a>çŠ¶æ€ç ï¼Œè¦†ç›–äº†ç»å¤§éƒ¨åˆ†å¯èƒ½é‡åˆ°çš„æƒ…å†µã€‚æ¯ä¸€ç§çŠ¶æ€ç éƒ½æœ‰æ ‡å‡†çš„ï¼ˆæˆ–è€…çº¦å®šçš„ï¼‰è§£é‡Šï¼Œå®¢æˆ·ç«¯åªéœ€æŸ¥çœ‹çŠ¶æ€ç ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºå‘ç”Ÿäº†ä»€ä¹ˆæƒ…å†µï¼Œæ‰€ä»¥æœåŠ¡å™¨åº”è¯¥è¿”å›å°½å¯èƒ½ç²¾ç¡®çš„çŠ¶æ€ç ã€‚</p><p>API ä¸éœ€è¦<code>1xx</code>çŠ¶æ€ç ï¼Œä¸‹é¢ä»‹ç»å…¶ä»–å››ç±»çŠ¶æ€ç çš„ç²¾ç¡®å«ä¹‰ã€‚</p><h3 id="2-2-2xx-çŠ¶æ€ç "><a href="#2-2-2xx-çŠ¶æ€ç " class="headerlink" title="2.2 2xx çŠ¶æ€ç "></a>2.2 2xx çŠ¶æ€ç </h3><p><code>200</code>çŠ¶æ€ç è¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œä½†æ˜¯ä¸åŒçš„æ–¹æ³•å¯ä»¥è¿”å›æ›´ç²¾ç¡®çš„çŠ¶æ€ç ã€‚</p><blockquote><ul><li>GET: 200 OK</li><li>POST: 201 Created</li><li>PUT: 200 OK</li><li>PATCH: 200 OK</li><li>DELETE: 204 No Content</li></ul></blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>POST</code>è¿”å›<code>201</code>çŠ¶æ€ç ï¼Œè¡¨ç¤ºç”Ÿæˆäº†æ–°çš„èµ„æºï¼›<code>DELETE</code>è¿”å›<code>204</code>çŠ¶æ€ç ï¼Œè¡¨ç¤ºèµ„æºå·²ç»ä¸å­˜åœ¨ã€‚</p><p>æ­¤å¤–ï¼Œ<code>202 Accepted</code>çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†è¿˜æœªè¿›è¡Œå¤„ç†ï¼Œä¼šåœ¨æœªæ¥å†å¤„ç†ï¼Œé€šå¸¸ç”¨äºå¼‚æ­¥æ“ä½œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><blockquote><pre class=" language-http"><code class="language-http"><span class="token response-status">HTTP/1.1 <span class="token property">202 Accepted</span></span>{  "task": {    "href": "/api/company/job-management/jobs/2130040",    "id": "2130040"  }}</code></pre></blockquote><h3 id="2-3-3xx-çŠ¶æ€ç "><a href="#2-3-3xx-çŠ¶æ€ç " class="headerlink" title="2.3 3xx çŠ¶æ€ç "></a>2.3 3xx çŠ¶æ€ç </h3><p>API ç”¨ä¸åˆ°<code>301</code>çŠ¶æ€ç ï¼ˆæ°¸ä¹…é‡å®šå‘ï¼‰å’Œ<code>302</code>çŠ¶æ€ç ï¼ˆæš‚æ—¶é‡å®šå‘ï¼Œ<code>307</code>ä¹Ÿæ˜¯è¿™ä¸ªå«ä¹‰ï¼‰ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ç”±åº”ç”¨çº§åˆ«è¿”å›ï¼Œæµè§ˆå™¨ä¼šç›´æ¥è·³è½¬ï¼ŒAPI çº§åˆ«å¯ä»¥ä¸è€ƒè™‘è¿™ä¸¤ç§æƒ…å†µã€‚</p><p>API ç”¨åˆ°çš„<code>3xx</code>çŠ¶æ€ç ï¼Œä¸»è¦æ˜¯<code>303 See Other</code>ï¼Œè¡¨ç¤ºå‚è€ƒå¦ä¸€ä¸ª URLã€‚å®ƒä¸<code>302</code>å’Œ<code>307</code>çš„å«ä¹‰ä¸€æ ·ï¼Œä¹Ÿæ˜¯â€æš‚æ—¶é‡å®šå‘â€ï¼ŒåŒºåˆ«åœ¨äº<code>302</code>å’Œ<code>307</code>ç”¨äº<code>GET</code>è¯·æ±‚ï¼Œè€Œ<code>303</code>ç”¨äº<code>POST</code>ã€<code>PUT</code>å’Œ<code>DELETE</code>è¯·æ±‚ã€‚æ”¶åˆ°<code>303</code>ä»¥åï¼Œæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨è·³è½¬ï¼Œè€Œä¼šè®©ç”¨æˆ·è‡ªå·±å†³å®šä¸‹ä¸€æ­¥æ€ä¹ˆåŠã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><blockquote><pre class=" language-http"><code class="language-http"><span class="token response-status">HTTP/1.1 <span class="token property">303 See Other</span></span><span class="token header-name keyword">Location:</span> /api/orders/12345</code></pre></blockquote><h3 id="2-4-4xx-çŠ¶æ€ç "><a href="#2-4-4xx-çŠ¶æ€ç " class="headerlink" title="2.4 4xx çŠ¶æ€ç "></a>2.4 4xx çŠ¶æ€ç </h3><p><code>4xx</code>çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯é”™è¯¯ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ç§ã€‚</p><p><code>400 Bad Request</code>ï¼šæœåŠ¡å™¨ä¸ç†è§£å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœªåšä»»ä½•å¤„ç†ã€‚</p><p><code>401 Unauthorized</code>ï¼šç”¨æˆ·æœªæä¾›èº«ä»½éªŒè¯å‡­æ®ï¼Œæˆ–è€…æ²¡æœ‰é€šè¿‡èº«ä»½éªŒè¯ã€‚</p><p><code>403 Forbidden</code>ï¼šç”¨æˆ·é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Œä½†æ˜¯ä¸å…·æœ‰è®¿é—®èµ„æºæ‰€éœ€çš„æƒé™ã€‚</p><p><code>404 Not Found</code>ï¼šæ‰€è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæˆ–ä¸å¯ç”¨ã€‚</p><p><code>405 Method Not Allowed</code>ï¼šç”¨æˆ·å·²ç»é€šè¿‡èº«ä»½éªŒè¯ï¼Œä½†æ˜¯æ‰€ç”¨çš„ HTTP æ–¹æ³•ä¸åœ¨ä»–çš„æƒé™ä¹‹å†…ã€‚</p><p><code>410 Gone</code>ï¼šæ‰€è¯·æ±‚çš„èµ„æºå·²ä»è¿™ä¸ªåœ°å€è½¬ç§»ï¼Œä¸å†å¯ç”¨ã€‚</p><p><code>415 Unsupported Media Type</code>ï¼šå®¢æˆ·ç«¯è¦æ±‚çš„è¿”å›æ ¼å¼ä¸æ”¯æŒã€‚æ¯”å¦‚ï¼ŒAPI åªèƒ½è¿”å› JSON æ ¼å¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯è¦æ±‚è¿”å› XML æ ¼å¼ã€‚</p><p><code>422 Unprocessable Entity</code> ï¼šå®¢æˆ·ç«¯ä¸Šä¼ çš„é™„ä»¶æ— æ³•å¤„ç†ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚</p><p><code>429 Too Many Requests</code>ï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚æ¬¡æ•°è¶…è¿‡é™é¢ã€‚</p><h3 id="2-5-5xx-çŠ¶æ€ç "><a href="#2-5-5xx-çŠ¶æ€ç " class="headerlink" title="2.5 5xx çŠ¶æ€ç "></a>2.5 5xx çŠ¶æ€ç </h3><p><code>5xx</code>çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡ç«¯é”™è¯¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒAPI ä¸ä¼šå‘ç”¨æˆ·é€éœ²æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥åªè¦ä¸¤ä¸ªçŠ¶æ€ç å°±å¤Ÿäº†ã€‚</p><p><code>500 Internal Server Error</code>ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰æ•ˆï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶å‘ç”Ÿäº†æ„å¤–ã€‚</p><p><code>503 Service Unavailable</code>ï¼šæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºç½‘ç«™ç»´æŠ¤çŠ¶æ€ã€‚</p><h2 id="ä¸‰ã€æœåŠ¡å™¨å›åº”"><a href="#ä¸‰ã€æœåŠ¡å™¨å›åº”" class="headerlink" title="ä¸‰ã€æœåŠ¡å™¨å›åº”"></a>ä¸‰ã€æœåŠ¡å™¨å›åº”</h2><h3 id="3-1-ä¸è¦è¿”å›çº¯æœ¬æ–‡"><a href="#3-1-ä¸è¦è¿”å›çº¯æœ¬æ–‡" class="headerlink" title="3.1 ä¸è¦è¿”å›çº¯æœ¬æ–‡"></a>3.1 ä¸è¦è¿”å›çº¯æœ¬æ–‡</h3><p>API è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œä¸åº”è¯¥æ˜¯çº¯æ–‡æœ¬ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½è¿”å›æ ‡å‡†çš„ç»“æ„åŒ–æ•°æ®ã€‚æ‰€ä»¥ï¼ŒæœåŠ¡å™¨å›åº”çš„ HTTP å¤´çš„<code>Content-Type</code>å±æ€§è¦è®¾ä¸º<code>application/json</code>ã€‚</p><p>å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä¹Ÿè¦æ˜ç¡®å‘Šè¯‰æœåŠ¡å™¨ï¼Œå¯ä»¥æ¥å— JSON æ ¼å¼ï¼Œå³è¯·æ±‚çš„ HTTP å¤´çš„<code>ACCEPT</code>å±æ€§ä¹Ÿè¦è®¾æˆ<code>application/json</code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><blockquote><pre class=" language-http"><code class="language-http">GET /orders/2 HTTP/1.1 <span class="token header-name keyword">Accept:</span> application/json</code></pre></blockquote><h3 id="3-2-å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å›-200-çŠ¶æ€ç "><a href="#3-2-å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å›-200-çŠ¶æ€ç " class="headerlink" title="3.2 å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å› 200 çŠ¶æ€ç "></a>3.2 å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å› 200 çŠ¶æ€ç </h3><p>æœ‰ä¸€ç§ä¸æ°å½“çš„åšæ³•æ˜¯ï¼Œå³ä½¿å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿè¿”å›<code>200</code>çŠ¶æ€ç ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p><blockquote><pre class=" language-http"><code class="language-http"><span class="token response-status">HTTP/1.1 <span class="token property">200 OK</span></span><span class="token header-name keyword">Content-Type:</span> application/json<span class="token application/json"><span class="token punctuation">{</span>  <span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"failure"</span><span class="token punctuation">,</span>  <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Expected at least two items in list."</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></span></code></pre></blockquote><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè§£ææ•°æ®ä½“ä»¥åï¼Œæ‰èƒ½å¾—çŸ¥æ“ä½œå¤±è´¥ã€‚</p><p>è¿™å¼ åšæ³•å®é™…ä¸Šå–æ¶ˆäº†çŠ¶æ€ç ï¼Œè¿™æ˜¯å®Œå…¨ä¸å¯å–çš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼ŒçŠ¶æ€ç åæ˜ å‘ç”Ÿçš„é”™è¯¯ï¼Œå…·ä½“çš„é”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢è¿”å›ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><blockquote><pre class=" language-http"><code class="language-http"><span class="token response-status">HTTP/1.1 <span class="token property">400 Bad Request</span></span><span class="token header-name keyword">Content-Type:</span> application/json<span class="token application/json"><span class="token punctuation">{</span>  <span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token string">"Invalid payoad."</span><span class="token punctuation">,</span>  <span class="token string">"detail"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>     <span class="token string">"surname"</span><span class="token punctuation">:</span> <span class="token string">"This field is required."</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></span></code></pre></blockquote><h3 id="3-3-æä¾›é“¾æ¥"><a href="#3-3-æä¾›é“¾æ¥" class="headerlink" title="3.3 æä¾›é“¾æ¥"></a>3.3 æä¾›é“¾æ¥</h3><p>API çš„ä½¿ç”¨è€…æœªå¿…çŸ¥é“ï¼ŒURL æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•å°±æ˜¯ï¼Œåœ¨å›åº”ä¸­ï¼Œç»™å‡ºç›¸å…³é“¾æ¥ï¼Œä¾¿äºä¸‹ä¸€æ­¥æ“ä½œã€‚è¿™æ ·çš„è¯ï¼Œç”¨æˆ·åªè¦è®°ä½ä¸€ä¸ª URLï¼Œå°±å¯ä»¥å‘ç°å…¶ä»–çš„ URLã€‚è¿™ç§æ–¹æ³•å«åš HATEOASã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼ŒGitHub çš„ API éƒ½åœ¨ <a href="https://api.github.com/">api.github.com</a> è¿™ä¸ªåŸŸåã€‚è®¿é—®å®ƒï¼Œå°±å¯ä»¥å¾—åˆ°å…¶ä»– URLã€‚</p><blockquote><pre class=" language-http"><code class="language-http">{  ...  "feeds_url": "https://api.github.com/feeds",  "followers_url": "https://api.github.com/user/followers",  "following_url": "https://api.github.com/user/following{/target}",  "gists_url": "https://api.github.com/gists{/gist_id}",  "hub_url": "https://api.github.com/hub",  ...}</code></pre></blockquote><p>ä¸Šé¢çš„å›åº”ä¸­ï¼ŒæŒ‘ä¸€ä¸ª URL è®¿é—®ï¼Œåˆå¯ä»¥å¾—åˆ°åˆ«çš„ URLã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä¸éœ€è¦è®°ä½ URL è®¾è®¡ï¼Œåªè¦ä» api.github.com ä¸€æ­¥æ­¥æŸ¥æ‰¾å°±å¯ä»¥äº†ã€‚</p><p>HATEOAS çš„æ ¼å¼æ²¡æœ‰ç»Ÿä¸€è§„å®šï¼Œä¸Šé¢ä¾‹å­ä¸­ï¼ŒGitHub å°†å®ƒä»¬ä¸å…¶ä»–å±æ€§æ”¾åœ¨ä¸€èµ·ã€‚æ›´å¥½çš„åšæ³•åº”è¯¥æ˜¯ï¼Œå°†ç›¸å…³é“¾æ¥ä¸å…¶ä»–å±æ€§åˆ†å¼€ã€‚</p><blockquote><pre class=" language-http"><code class="language-http"><span class="token response-status">HTTP/1.1 <span class="token property">200 OK</span></span><span class="token header-name keyword">Content-Type:</span> application/json<span class="token application/json"><span class="token punctuation">{</span>  <span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"In progress"</span><span class="token punctuation">,</span>   <span class="token string">"links"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">[</span>    <span class="token punctuation">{</span> <span class="token string">"rel"</span><span class="token punctuation">:</span><span class="token string">"cancel"</span><span class="token punctuation">,</span> <span class="token string">"method"</span><span class="token punctuation">:</span> <span class="token string">"delete"</span><span class="token punctuation">,</span> <span class="token string">"href"</span><span class="token punctuation">:</span><span class="token string">"/api/status/12345"</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span>    <span class="token punctuation">{</span> <span class="token string">"rel"</span><span class="token punctuation">:</span><span class="token string">"edit"</span><span class="token punctuation">,</span> <span class="token string">"method"</span><span class="token punctuation">:</span> <span class="token string">"put"</span><span class="token punctuation">,</span> <span class="token string">"href"</span><span class="token punctuation">:</span><span class="token string">"/api/status/12345"</span> <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code></pre></blockquote><h2 id="å››ã€å‚è€ƒé“¾æ¥"><a href="#å››ã€å‚è€ƒé“¾æ¥" class="headerlink" title="å››ã€å‚è€ƒé“¾æ¥"></a>å››ã€å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.florimondmanca.com/restful-api-design-13-best-practices-to-make-your-users-happy">RESTful API Design: 13 Best Practices to Make Your Users Happy</a>, by Florimond Manca</li><li><a href="https://docs.microsoft.com/en-us/azure/architecture/best-practices/api-design">API design</a>, by MicroSoft Azure</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> Restful API </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨ç®—æ³•æ€»ç»“</title>
      <link href="/xyzhangblog/2020/12/21/bian-cheng-ji-chu/dong-tai-gui-hua-zong-jie/dong-tai-gui-hua/"/>
      <url>/xyzhangblog/2020/12/21/bian-cheng-ji-chu/dong-tai-gui-hua-zong-jie/dong-tai-gui-hua/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> Java </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿï¼ˆäºŒï¼‰</title>
      <link href="/xyzhangblog/2020/12/09/ji-suan-ji-ji-chu/cao-zuo-xi-tong/cao-zuo-xi-tong-er/"/>
      <url>/xyzhangblog/2020/12/09/ji-suan-ji-ji-chu/cao-zuo-xi-tong/cao-zuo-xi-tong-er/</url>
      
        <content type="html"><![CDATA[<h1 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h1><h2 id="å¿…è¦æ¡ä»¶"><a href="#å¿…è¦æ¡ä»¶" class="headerlink" title="å¿…è¦æ¡ä»¶"></a>å¿…è¦æ¡ä»¶</h2><ul><li>äº’æ–¥ï¼šèµ„æºåªèƒ½åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹ï¼›</li><li>å æœ‰å¹¶ç­‰å¾…ï¼šå·²ç»æŒæœ‰äº†æŸä¸ªèµ„æºçš„è¿›ç¨‹åˆå»è¯·æ±‚æ–°èµ„æºï¼›</li><li>ä¸å¯æŠ¢å ï¼šåªèƒ½ç”±æŒæœ‰è¿›ç¨‹ä¸»åŠ¨é‡Šæ”¾ï¼›</li><li>ç¯è·¯ç­‰å¾…ï¼šæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šè¿›ç¨‹ç»„æˆä¸€æ¡ç¯è·¯ï¼Œè¯¥ç¯è·¯ä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€å æœ‰çš„èµ„æºï¼›</li></ul><h2 id="æ­»é”è§£é™¤"><a href="#æ­»é”è§£é™¤" class="headerlink" title="æ­»é”è§£é™¤"></a>æ­»é”è§£é™¤</h2><p>å¤„ç†æ­»é”åº”ä»ç ´åæ­»é”å‡ºç°çš„å››ä¸ªæ¡ä»¶å‡ºå‘</p><ol><li>ç ´åäº’æ–¥æ¡ä»¶ï¼šä¾‹å¦‚æ‰“å°æœºå¤„ç†å¤šçº¿ç¨‹æŠ¢å çš„æƒ…å†µæ—¶ï¼ŒçœŸæ­£è¯·æ±‚ç‰©ç†æ‰“å°æœºçš„è¿›ç¨‹åªæœ‰æ‰“å°æœºå®ˆæŠ¤è¿›ç¨‹ï¼›</li><li>ç ´åå æœ‰å’Œç­‰å¾…æ¡ä»¶ï¼š<strong>èµ„æºé¢„åˆ†é…ç­–ç•¥</strong>ï¼ˆæ‰€æœ‰è¿›ç¨‹åœ¨å¼€å§‹æ‰§è¡Œå‰è¯·æ±‚æ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºï¼‰ï¼›</li><li>ç ´åä¸å¯æŠ¢å æ¡ä»¶ï¼›</li><li>ç ´åç¯è·¯ç­‰å¾…ï¼š<strong>èµ„æºæœ‰åºåˆ†é…ç­–ç•¥</strong>ï¼›</li></ol><h2 id="æ­»é”é¿å…"><a href="#æ­»é”é¿å…" class="headerlink" title="æ­»é”é¿å…"></a>æ­»é”é¿å…</h2><p>å­˜åœ¨æŸç§è°ƒåº¦æ¬¡åºä½¿å¾—æ¯ä¸ªè¿›ç¨‹è¿è¡Œå®Œæ¯•</p><p>é“¶è¡Œå®¶ç®—æ³•</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘ç®—æ³•æ€»ç»“</title>
      <link href="/xyzhangblog/2020/11/24/bian-cheng-ji-chu/shu-zong-jie/er-cha-shu-suan-fa-zong-jie/"/>
      <url>/xyzhangblog/2020/11/24/bian-cheng-ji-chu/shu-zong-jie/er-cha-shu-suan-fa-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒå‰æ ‘ç§ç±»"><a href="#äºŒå‰æ ‘ç§ç±»" class="headerlink" title="äºŒå‰æ ‘ç§ç±»"></a>äºŒå‰æ ‘ç§ç±»</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> Java </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“¾è¡¨ç®—æ³•æ€»ç»“</title>
      <link href="/xyzhangblog/2020/11/24/bian-cheng-ji-chu/lian-biao-zong-jie/lian-biao-zong-jie/"/>
      <url>/xyzhangblog/2020/11/24/bian-cheng-ji-chu/lian-biao-zong-jie/lian-biao-zong-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="è™šæ‹Ÿå¤´èŠ‚ç‚¹"><a href="#è™šæ‹Ÿå¤´èŠ‚ç‚¹" class="headerlink" title="è™šæ‹Ÿå¤´èŠ‚ç‚¹"></a>è™šæ‹Ÿå¤´èŠ‚ç‚¹</h2><p>Solution203.ç§»å‡ºé“¾è¡¨å…ƒç´ </p><p>ä½¿ç”¨è™šæ‹Ÿå¤´èŠ‚ç‚¹é¿å…æ¯æ¬¡é‡åˆ°å¤´èŠ‚ç‚¹åˆ é™¤ç­‰æƒ…å†µå†åšç‰¹æ®Šå¤„ç†</p><h2 id="åè½¬é“¾è¡¨"><a href="#åè½¬é“¾è¡¨" class="headerlink" title="åè½¬é“¾è¡¨"></a>åè½¬é“¾è¡¨</h2><p>Solution206.åè½¬é“¾è¡¨ </p><p><a href="https://leetcode-cn.com/problems/reverse-linked-list/">https://leetcode-cn.com/problems/reverse-linked-list/</a></p><p>è¿­ä»£æ³•ï¼š</p><p>åè½¬é“¾è¡¨çš„ä¸€éƒ¨åˆ†</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> Java </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> é“¾è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•æ€»ç»“</title>
      <link href="/xyzhangblog/2020/11/20/bian-cheng-ji-chu/pai-xu-suan-fa-zong-jie/pai-xu-suan-fa-zong-jie/"/>
      <url>/xyzhangblog/2020/11/20/bian-cheng-ji-chu/pai-xu-suan-fa-zong-jie/pai-xu-suan-fa-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åºç®—æ³•æ€»ç»“"><a href="#æ’åºç®—æ³•æ€»ç»“" class="headerlink" title="æ’åºç®—æ³•æ€»ç»“"></a>æ’åºç®—æ³•æ€»ç»“</h1><p>æ”¾ä¸€å¼ å°å´å¤§ä½¬çš„å›¾ï¼Œè½¬è‡ª <a href="https://www.cxyxiaowu.com/2026.html">https://www.cxyxiaowu.com/2026.html</a></p><img src="/xyzhangblog/2020/11/20/bian-cheng-ji-chu/pai-xu-suan-fa-zong-jie/pai-xu-suan-fa-zong-jie/AlgoSortCol.png" class="" title="æ€»ç»“"><p><strong>å…³äºæ—¶é—´å¤æ‚åº¦ï¼š</strong></p><ol><li>å¹³æ–¹é˜¶ O(n2) æ’åº å„ç±»ç®€å•æ’åºï¼šç›´æ¥æ’å…¥ã€ç›´æ¥é€‰æ‹©å’Œå†’æ³¡æ’åºã€‚</li><li>çº¿æ€§å¯¹æ•°é˜¶ O(nlogn) æ’åº å¿«é€Ÿæ’åºã€å †æ’åºå’Œå½’å¹¶æ’åºï¼›</li><li>O(n+Â§) æ’åºï¼ŒÂ§ æ˜¯ä»‹äº 0 å’Œ 1 ä¹‹é—´çš„å¸¸æ•°ã€‚ å¸Œå°”æ’åº</li><li>çº¿æ€§é˜¶ O(n) æ’åº åŸºæ•°æ’åºï¼Œæ­¤å¤–è¿˜æœ‰æ¡¶ã€ç®±æ’åºã€‚</li></ol><p><strong>å…³äºç¨³å®šæ€§ï¼š</strong></p><ol><li>ç¨³å®šçš„æ’åºç®—æ³•ï¼šå†’æ³¡æ’åºï¼ˆé‡åˆ°ç›¸åŒå€¼ï¼Œè®©ä¸‹ä¸€ä¸ªå€¼ç§»åŠ¨ï¼‰ã€æ’å…¥æ’åºã€å½’å¹¶æ’åºï¼ˆé‡åˆ°ç›¸åŒå€¼è®©å·¦è¾¹çš„å…ˆæ‹·è´ï¼‰å’ŒåŸºæ•°æ’åºã€‚</li><li>ä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼šé€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å¸Œå°”æ’åºã€å †æ’åºã€‚</li></ol><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³"><a href="#åŸºæœ¬æ€æƒ³" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>å½’å¹¶æ’åºåŸºäºåˆ†æ²»æ€æƒ³ï¼Œåˆ†æ²»æ€æƒ³åœ¨é€’å½’ä¸Šæœ‰ä¸‰ä¸ªæ­¥éª¤</p><ul><li>åˆ†è§£(Divide)ï¼šå°†nä¸ªå…ƒç´ åˆ†æˆä¸¤ä¸ªå«n/2çš„å…ƒç´ çš„å­åºåˆ—</li><li>è§£å†³(Conquer)ï¼šç”¨åˆå¹¶æ’åºæ³•å¯¹ä¸¤ä¸ªå­åºåˆ—é€’å½’çš„æ’åº</li><li>åˆå¹¶(Combine)ï¼šåˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—å¾—åˆ°æ’åºç»“æœ</li></ul><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn) // æ— è®ºå…ƒç´ åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éƒ½è¦åšåˆ†å‰²åˆå¹¶çš„æ­¥éª¤ï¼Œå¼€é”€çš„æ—¶é—´æ˜¯ä¸å˜çš„</p><p>æœ€ä½³æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p><p>æ’åºæ–¹å¼ï¼šå¤–æ’åº</p><p>ç¨³å®šæ€§ï¼šç¨³å®š</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">sortArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">mergeSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å½’å¹¶æ’åº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>            mid <span class="token operator">=</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token function">mergeSort</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">mergeSort</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">merge</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> left<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> mid<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> lenleft <span class="token operator">=</span> mid<span class="token operator">-</span>left<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åŒ…å«midå’Œleftå› æ­¤éœ€è¦+1</span>        <span class="token keyword">int</span> lenright <span class="token operator">=</span> right<span class="token operator">-</span>mid<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ç”³è¯·æ–°æ•°ç»„</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> leftArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>lenleft<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rightArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>lenright<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// æ–°æ•°ç»„èµ‹å€¼</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lenleft<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            leftArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>left<span class="token operator">+</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lenright<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            rightArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>mid<span class="token operator">+</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»mid+1åˆ°rightæ‰æ˜¯åˆ’åˆ†åçš„æ•°ç»„</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// merge</span>        <span class="token keyword">int</span> leftindex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> rightindex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>leftindex <span class="token operator">&lt;</span> lenleft <span class="token operator">&amp;&amp;</span> rightindex <span class="token operator">&lt;</span> lenright<span class="token punctuation">)</span>  <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>leftArray<span class="token punctuation">[</span>leftindex<span class="token punctuation">]</span> <span class="token operator">&lt;</span> rightArray<span class="token punctuation">[</span>rightindex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                array<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> leftArray<span class="token punctuation">[</span>leftindex<span class="token punctuation">]</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>                leftindex<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                array<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> rightArray<span class="token punctuation">[</span>rightindex<span class="token punctuation">]</span><span class="token punctuation">;</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>                rightindex<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>leftindex <span class="token operator">&lt;</span> lenleft<span class="token punctuation">)</span> <span class="token punctuation">{</span>            array<span class="token punctuation">[</span>left<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> leftArray<span class="token punctuation">[</span>leftindex<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>rightindex <span class="token operator">&lt;</span> lenright<span class="token punctuation">)</span> <span class="token punctuation">{</span>            array<span class="token punctuation">[</span>left<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> rightArray<span class="token punctuation">[</span>rightindex<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.cnblogs.com/chengxiao/p/6194356.html">https://www.cnblogs.com/chengxiao/p/6194356.html</a></p><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-1"><a href="#åŸºæœ¬æ€æƒ³-1" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>åˆ†æ²»ï¼šé€‰æ‹©æ•°ç»„ä¸­æŸä¸ªæ•°ä½œä¸ºåŸºæ•°ï¼Œé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†æ‰€æœ‰æ•°éƒ½æ¯”åŸºæ•°å°ï¼Œå¦å¤–ä¸€éƒ¨åˆ†éƒ½æ¯”åŸºæ•°å¤§ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«æ’</p><h3 id="å¤æ‚åº¦åˆ†æ-1"><a href="#å¤æ‚åº¦åˆ†æ-1" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>æœ€ä½³æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(n2) // å…ƒç´ éƒ½åˆ†åˆ°ä¸€ä¸ªå­åºåˆ—ï¼ˆåºåˆ—æœ¬èº«ä¸ºå‡åºæˆ–é™åºæ’åˆ—ï¼‰</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(logn)</p><p>æ’åºæ–¹å¼ï¼šå†…æ’åº</p><p>ç¨³å®šæ€§ï¼šä¸ç¨³å®š</p><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">sortArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">&lt;</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> p <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>l<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> l<span class="token punctuation">,</span> p<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> pivot <span class="token operator">=</span> nums<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> l<span class="token punctuation">,</span> right <span class="token operator">=</span> r<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// ä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºåŸºæ•°çš„æ•°å­—åœä¸‹</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">>=</span> pivot <span class="token operator">&amp;&amp;</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>                right<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// ä»å·¦å‘å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºåŸºæ•°çš„æ•°å­—åœä¸‹</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> pivot <span class="token operator">&amp;&amp;</span>  left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// åˆ’åˆ†ç»“æŸå°†åŸºæ•°å€¼æ›¿æ¢åˆ°ä¸­é—´ä½ç½® æ­¤æ—¶ä½äºlçš„å…ƒç´ ä¸€å®šæ¯”åŸºå‡†å€¼å°ï¼ˆå…ˆä»åå‘å‰éå†çš„åŸå› ï¼‰</span>        <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> left<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h3 id="ä¼˜åŒ–æ–¹æ³•"><a href="#ä¼˜åŒ–æ–¹æ³•" class="headerlink" title="ä¼˜åŒ–æ–¹æ³•"></a>ä¼˜åŒ–æ–¹æ³•</h3><ol><li><p>é€‰æ‹©æ¢çº½å…ƒ</p><ul><li>é€‰ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ª</li><li>éšæœºé€‰æ‹©</li><li>ä¸‰æ•°ä¸­å€¼åˆ†å‰²æ³•</li></ul></li><li><p>åˆ†æé‡å¤å…ƒç´ å¤„ç†</p></li><li><p>é€’å½’åˆ†æˆå°æ•°ç»„æ—¶ä½¿ç”¨æ’å…¥æ’åº</p><p><strong>å¯¹äºå°æ•°ç»„ï¼ˆN&lt;=20ï¼‰çš„è¾“å…¥åºåˆ—ï¼Œå¿«é€Ÿæ’åºä¸å¦‚<a href="https://juejin.im/post/6844903821789888520">æ’å…¥æ’åº</a>ï¼›</strong>å¹¶ä¸”åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¼˜åŒ–ä¸­ï¼Œé‡‡ç”¨ä¸‰æ•°ä¸­å€¼åˆ†å‰²æ—¶ï¼Œé€’å½’å¾—åˆ°çš„ç»“æœå¯ä»¥æ˜¯åªæœ‰ä¸€ä¸ªï¼Œæˆ–è€…ä¸¤ä¸ªå…ƒç´ ï¼Œè¿™æ—¶ä¼šæœ‰é”™è¯¯ã€‚æ‰€ä»¥ï¼Œç»§ç»­ä¼˜åŒ–æ˜¯å°†å°çš„åºåˆ—ç”¨æ’å…¥æ’åºä»£æ›¿ï¼Œè¿™ä¼šå‡å°‘å¤§çº¦15%çš„è¿è¡Œæ—¶é—´ã€‚<strong>è¾ƒå¥½çš„æˆªæ­¢èŒƒå›´æ˜¯10</strong>ï¼ˆå…¶å®5-20äº§ç”Ÿçš„æ•ˆæœå·®ä¸å¤šï¼‰ã€‚</p></li></ol><p>é€‰æ‹©æ’å…¥ä¸€ä¸ªæ˜¯ä»å·²æ’åºä¸­æ‰¾ï¼Œä¸€ä¸ªæ˜¯ä»æœªæ’åºä¸­æ‰¾æ’å…¥åˆ°å·²æ’åºåºåˆ—ä¸­</p><p>å‚è€ƒèµ„æ–™</p><p><a href="https://juejin.cn/post/6844903837749215246">https://juejin.cn/post/6844903837749215246</a></p><p><a href="https://zhuanlan.zhihu.com/p/57436476">https://zhuanlan.zhihu.com/p/57436476</a></p><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-2"><a href="#åŸºæœ¬æ€æƒ³-2" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°çš„å°†å…¶äº¤æ¢åˆ°åºåˆ—çš„åˆå§‹ä½ç½®ï¼Œä»¥åæ¯æ¬¡éƒ½å†ä»æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°çš„äº¤æ¢åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼Œæ­¤æ—¶æ¯æ¬¡ä»æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°çš„å°±æ˜¯å·²æ’åºåºåˆ—ä¸­æœ€å¤§çš„ã€‚</p><h3 id="å¤æ‚åº¦åˆ†æ-2"><a href="#å¤æ‚åº¦åˆ†æ-2" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n2) // æ¯æ¬¡éƒ½éœ€è¦åœ¨å‰©ä½™åºåˆ—ä¸­é€‰æ‹©æœ€å°çš„å…ƒç´ ï¼Œä¸å…ƒç´ çš„åˆå§‹æ’åˆ—æ— å…³</p><p>æœ€ä½³æ—¶é—´å¤æ‚åº¦ï¼šO(n2)</p><p>æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(n2)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p><p>æ’åºæ–¹å¼ï¼šå†…æ’åº</p><p>ç¨³å®šæ€§ï¼šä¸ç¨³å®š</p><h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">// é€‰æ‹©æ’åº</span>    <span class="token comment" spellcheck="true">// éå†ä»æœªæ’åºçš„åºåˆ—ä¸­æ¯æ¬¡æ‰¾åˆ°æœ€å°å€¼ï¼Œæ‰¾åˆ°åä¸æœªæ’åºåºåˆ—ç¬¬ä¸€ä¸ªå€¼äº¤æ¢</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> minValue<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            minValue <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>minValue<span class="token punctuation">]</span> <span class="token operator">></span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    minValue <span class="token operator">=</span> j<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> array<span class="token punctuation">[</span>minValue<span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span>minValue<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><h3 id="åŸºæœ¬æ€æƒ³-3"><a href="#åŸºæœ¬æ€æƒ³-3" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>å°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæœ‰åºéƒ¨åˆ†å’Œæ— åºéƒ¨åˆ†ï¼Œä¾æ¬¡å°†æ— åºå…ƒç´ æ’å…¥åˆ°æœ‰åºéƒ¨åˆ†çš„ç‰¹å®šä½ç½®ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æœ‰åºã€‚</p><p>æ’å…¥æ’åºåˆ†ä¸º<strong>ç›´æ¥æ’å…¥ã€äºŒåˆ†æ’å…¥ã€é“¾è¡¨æ’å…¥</strong>ç­‰ã€‚</p><p>Qï¼šä¸<strong>é€‰æ‹©æ’åº</strong>çš„<strong>ç›¸åŒç‚¹</strong>ï¼Ÿ<br> Aï¼šå½“å‰ç´¢å¼•å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æœ‰åºçš„ï¼Œä½†å®ƒä»¬çš„æœ€ç»ˆä½ç½®è¿˜ä¸ç¡®å®šï¼Œä¸ºäº†ç»™æ›´å°çš„å…ƒç´ è…¾å‡ºç©ºé—´ï¼Œå®ƒä»¬å¯èƒ½ä¼šè¢«ç§»åŠ¨ã€‚å½“ç´¢å¼•åˆ°è¾¾æ•°ç»„çš„å³ç«¯æ—¶ï¼Œæ•°ç»„æ’åºå°±å®Œæˆäº†ã€‚</p><p>Qï¼šä¸<strong>é€‰æ‹©æ’åº</strong>çš„<strong>ä¸åŒç‚¹</strong>ï¼Ÿ<br> Aï¼š<strong>æ’å…¥æ’åº</strong>æ‰€éœ€çš„æ—¶é—´å–å†³äºè¾“å…¥ä¸­å…ƒç´ çš„<strong>åˆå§‹é¡ºåº</strong>ã€‚é€Ÿåº¦ï¼šå…ƒç´ å·²ç»æœ‰åºï¼ˆæˆ–æ¥è¿‘æœ‰åºï¼‰çš„æ•°ç»„ &gt; éšæœºé¡ºåºçš„æ•°ç»„</p><h3 id="å¤æ‚åº¦åˆ†æ-3"><a href="#å¤æ‚åº¦åˆ†æ-3" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n2)</p><p>æœ€ä½³æ—¶é—´å¤æ‚åº¦ï¼šO(n) // å…ƒç´ æœ¬æ¥å°±æœ‰åºï¼Œåªéœ€è¦éå†ä¸€æ¬¡å³å¯ã€‚å½“å€’ç½®çš„æ•°é‡å¾ˆå°‘æ—¶ï¼Œæ¯”å…¶ä»–çš„æ’åºç®—æ³•éƒ½è¦å¿«ï¼ˆå¯¹äºéƒ¨åˆ†æœ‰åºçš„å¾ˆæœ‰æ•ˆï¼‰</p><p>æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(n2)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p><p>æ’åºæ–¹å¼ï¼šå†…æ’åº</p><p>ç¨³å®šæ€§ï¼šç¨³å®š</p><h3 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">// æ’å…¥æ’åº</span>    <span class="token comment" spellcheck="true">// ä¾æ¬¡å‘åéå†ï¼Œæ¯é‡åˆ°ä¸€ä¸ªå…ƒç´ å°±å°†å…¶æ’å…¥åˆ°æ•°ç»„çš„åˆé€‚ä½ç½®ï¼Œå…¶ä½™å…ƒç´ å‘åç§»åŠ¨</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>ans <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> ans <span class="token operator">&lt;</span> array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                array<span class="token punctuation">[</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>                index<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            array<span class="token punctuation">[</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="ä¼˜åŒ–æ–¹æ³•TODO"><a href="#ä¼˜åŒ–æ–¹æ³•TODO" class="headerlink" title="ä¼˜åŒ–æ–¹æ³•TODO"></a>ä¼˜åŒ–æ–¹æ³•TODO</h3><p>æŸ¥æ‰¾æ’å…¥ä½ç½®æ—¶ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ–¹å¼</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.jianshu.com/p/6d55ac4b72b4">https://www.jianshu.com/p/6d55ac4b72b4</a></p><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><h3 id="åŸºæœ¬æ€§è´¨"><a href="#åŸºæœ¬æ€§è´¨" class="headerlink" title="åŸºæœ¬æ€§è´¨"></a>åŸºæœ¬æ€§è´¨</h3><p>å †æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€ä¸ªè¿‘ä¼¼çš„å®Œå…¨äºŒå‰æ ‘ï¼Œé™¤æœ€åº•å±‚å¤–è¯¥æ ‘å®Œå…¨å……æ»¡ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯A[1]ï¼Œå½“ç»™å®šä¸€ä¸ªèŠ‚ç‚¹ä¸‹æ ‡iï¼Œå¯ä»¥å¾ˆå®¹æ˜“è®¡ç®—åˆ°å®ƒçš„çˆ¶èŠ‚ç‚¹ã€å·¦å­©å­å³å­©å­çš„ä¸‹æ ‡ï¼š</p><p>Parent(i) return i/2</p><p>Left(i) return 2i</p><p>Right(i) return 2i+1</p><img src="/xyzhangblog/2020/11/20/bian-cheng-ji-chu/pai-xu-suan-fa-zong-jie/pai-xu-suan-fa-zong-jie/%E5%A0%86.JPG" class=""><p><strong>è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯</strong>ï¼Œå°†iå€¼å·¦ç§»ä¸€ä½ï¼ŒLeftè¿‡ç¨‹å¯ä»¥åœ¨ä¸€æ¡æŒ‡ä»¤ä¸­è®¡ç®—å‡º2iï¼›å°†iå€¼å·¦ç§»ä¸€ä½åŠ ä¸€ï¼ŒRightè¿‡ç¨‹å¯ä»¥å¿«é€Ÿè®¡ç®—å¾—åˆ°2i+1ï¼›å°†iå³ç§»ä¸€ä½ï¼ŒParentè¿‡ç¨‹è®¡ç®—å¾—i/2</p><p>å †æ’åºä¸­ä½¿ç”¨æœ€å¤§å †ï¼›ä¼˜å…ˆçº§é˜Ÿåˆ—ä½¿ç”¨æœ€å°å †</p><p><strong>å‡åºé‡‡ç”¨å¤§é¡¶å †ï¼Œé™åºé‡‡ç”¨å°é¡¶å †</strong></p><h3 id="åŸºæœ¬æ€æƒ³-4"><a href="#åŸºæœ¬æ€æƒ³-4" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h3><p>æ€æƒ³ç±»ä¼¼é€‰æ‹©æ’åºï¼Œæ¯æ¬¡é€šè¿‡å †ç»“æ„é€‰æ‹©å‡ºæœ€å°æˆ–æœ€å¤§å€¼ç§»åŠ¨åˆ°æœ«å°¾ã€‚ç»“åˆäº†æ’å…¥æ’åºå’Œå½’å¹¶æ’åºçš„ä¼˜ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn)ï¼Œä¸å½’å¹¶æ’åºç›¸åŒï¼›å…·æœ‰ç©ºé—´åŸå€æ€§ï¼Œä¸æ’å…¥æ’åºç›¸åŒã€‚</p><ol><li>å°†æ— åºåºåˆ—æ„å»ºæˆå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †ï¼›</li><li>å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ â€œæ²‰â€åˆ°æ•°ç»„æœ«ç«¯ï¼›</li><li>é‡æ–°è°ƒæ•´ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³å †å®šä¹‰ï¼Œç»§ç»­äº¤æ¢å †é¡¶å…ƒç´ ä¸å½“å‰æœ«å°¾å…ƒç´ ï¼Œåå¤æ‰§è¡Œè°ƒæ•´+äº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åº</li></ol><h3 id="å¤æ‚åº¦åˆ†æ-4"><a href="#å¤æ‚åº¦åˆ†æ-4" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><p>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>æœ€ä½³æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p><p>æ’åºæ–¹å¼ï¼šå†…æ’åº</p><p>ç¨³å®šæ€§ï¼šä¸ç¨³å®š</p><h3 id="ä»£ç å®ç°-4"><a href="#ä»£ç å®ç°-4" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">// éé€’å½’å®ç°</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆå§‹å»ºå †</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">heapAdjust</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> i<span class="token punctuation">,</span> array<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// n-1æ¬¡é€‰æ‹©æ’åº</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// æœ€åä¸€ä¸ªå…ƒç´ ä¸ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token function">heapAdjust</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å †æ’åº</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">heapAdjust</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> temp <span class="token operator">=</span> array<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// tempä¿å­˜å½“å‰çˆ¶èŠ‚ç‚¹</span>        <span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å…ˆè·å¾—å·¦å­©å­</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å¦‚æœæœ‰å³å­©å­ç»“ç‚¹ï¼Œå¹¶ä¸”å³å­©å­ç»“ç‚¹çš„å€¼å¤§äºå·¦å­©å­ç»“ç‚¹ï¼Œåˆ™é€‰å–å³å­©å­ç»“ç‚¹</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> array<span class="token punctuation">[</span>child<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                child<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// å¦‚æœçˆ¶ç»“ç‚¹çš„å€¼å·²ç»å¤§äºå­©å­ç»“ç‚¹çš„å€¼ï¼Œåˆ™ç›´æ¥ç»“æŸ</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">>=</span> array<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// æŠŠå­©å­ç»“ç‚¹çš„å€¼èµ‹ç»™çˆ¶ç»“ç‚¹</span>            array<span class="token punctuation">[</span>parent<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">;</span>            parent <span class="token operator">=</span> child<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// parentä¸ºtempçœŸæ­£å­˜å‚¨çš„ä½ç½®</span>            <span class="token comment" spellcheck="true">// é€‰å–å­©å­ç»“ç‚¹çš„å·¦å­©å­ç»“ç‚¹,ç»§ç»­å‘ä¸‹ç­›é€‰</span>            child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        array<span class="token punctuation">[</span>parent<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.cnblogs.com/jingmoxukong/p/4303826.html">https://www.cnblogs.com/jingmoxukong/p/4303826.html</a></p><p><a href="https://www.cnblogs.com/chengxiao/p/6129630.html">https://www.cnblogs.com/chengxiao/p/6129630.html</a></p><p>ã€Šç®—æ³•å¯¼è®ºã€‹</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> Java </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ³›å‹è¯¦è§£</title>
      <link href="/xyzhangblog/2020/11/19/java/java-ji-chu/keng-java-fan-xing-xiang-jie/"/>
      <url>/xyzhangblog/2020/11/19/java/java-ji-chu/keng-java-fan-xing-xiang-jie/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> Java </tag>
            
            <tag> æ³›å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥ä½œä¸­å¦‚ä½•å¿«é€Ÿå…¥æ‰‹æ–°é¡¹ç›®</title>
      <link href="/xyzhangblog/2020/11/06/bian-cheng-xiang-guan-ji-zhu/ru-he-kuai-su-ru-shou-xin-xiang-mu/ru-he-kuai-su-ru-shou-xin-xiang-mu/"/>
      <url>/xyzhangblog/2020/11/06/bian-cheng-xiang-guan-ji-zhu/ru-he-kuai-su-ru-shou-xin-xiang-mu/ru-he-kuai-su-ru-shou-xin-xiang-mu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å®ä¹ ç»“æŸè¿”æ ¡å‰ï¼Œçœ‹åˆ°äº†ä¸€ä½åŒäº‹å†™çš„å…¬ä¼—å·æ–‡ç« ï¼Œæ–‡ç« ä¸»è¦è®²è§£äº†ä¸€äº›å·¥ä½œä¸Šå…¥æ‰‹æ–°é¡¹ç›®çš„æŠ€å·§ï¼Œç»“åˆè¿™æ®µå®ä¹ ç»å†ï¼Œè‡ªå·±ä¹Ÿå‘ç°ä¸Šæ‰‹æ–°é¡¹ç›®çš„é€Ÿåº¦å¾€å¾€å†³å®šäº†ä½ æ˜¯å¦å¯ä»¥é€šè¿‡å®ä¹ è½¬æ­£ï¼Œå› ä¸ºä»å®ä¹ åˆ°è½¬æ­£æœ€å¤šä¹Ÿåªæœ‰3ä¸ªæœˆçš„æ—¶é—´ï¼Œä¸Šæ‰‹é¡¹ç›®çš„é€Ÿåº¦ç›´æ¥å†³å®šäº†ä½ çš„å·¥ä½œäº§å‡ºï¼›åŒæ—¶ï¼Œåœ¨é¢è¯•æ—¶ä¹Ÿä¼šæœ‰é¢è¯•å®˜ç€é‡è€ƒå¯Ÿè¿™æ–¹é¢çš„èƒ½åŠ›ï¼Œå› æ­¤å†³å®šæ€»ç»“ä¸‹ä¸ä¹‹ç›¸å…³çš„æ–¹å¼æ–¹æ³•ï¼Œæ— è®ºæ˜¯åœ¨é¢è¯•è¿˜æ˜¯ä»Šåå·¥ä½œä¸Šéƒ½èƒ½å¾—ä»¥åº”ç”¨</p></blockquote><h2 id="æ¥æ‰‹æ–°é¡¹ç›®å‡ºç°çš„é—®é¢˜"><a href="#æ¥æ‰‹æ–°é¡¹ç›®å‡ºç°çš„é—®é¢˜" class="headerlink" title="æ¥æ‰‹æ–°é¡¹ç›®å‡ºç°çš„é—®é¢˜"></a>æ¥æ‰‹æ–°é¡¹ç›®å‡ºç°çš„é—®é¢˜</h2><p><strong>1.é¡¹ç›®é‡ç‚¹ä¸æ˜ç¡®</strong></p><p>ä¸€å¼€å§‹é¢å¯¹å„ç§éœ€æ±‚ ï¼Œå¾ˆå®¹æ˜“é™·å…¥å·¥ä½œç»†èŠ‚é‡Œä¸å¯è‡ªæ‹”ï¼Œæœ‰æ—¶å€™è·‘åäº†ä¹Ÿä¸è‡ªçŸ¥ã€‚æˆ–è€…åšä¸€äº›æŒ ç—’ç—’çš„å·¥ä½œï¼Œæ²¡æœ‰è§¦åŠæ ¸å¿ƒé—®é¢˜ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚</p><p><strong>2.å·¥å…·ä½¿ç”¨ä¸ç†Ÿç»ƒ</strong></p><p>æ¥æ‰‹çš„æ–°é¡¹ç›®è·Ÿæœ€è¿‘ä¸¤å¹´é‡Œåšçš„é¡¹ç›®å¾ˆä¸åŒï¼Œä½¿ç”¨çš„å¹³å°ã€å·¥å…·ä¹Ÿå¾ˆä¸ä¸€æ ·ã€‚ç†Ÿæ‚‰è¿™äº›å¹³å°å·¥å…·çš„æ“ä½œç¨å¾®éœ€è¦èŠ±ç‚¹å„¿æ—¶é—´ã€‚</p><p><strong>3.å¾…çœ‹èµ„æ–™å¤šè€Œæ‚</strong></p><p>æ–°æ¥æ‰‹çš„é¡¹ç›®æ˜¯ä»åˆ«çš„å›¢é˜Ÿè½¬è¿‡æ¥çš„ï¼Œå·²ç»ç§¯ç´¯äº†å¾ˆé•¿æ—¶é—´ï¼Œå› æ­¤æœ‰å¾ˆå¤šèƒŒæ™¯èµ„æ–™éœ€è¦ç†Ÿæ‚‰ï¼ŒåŒ…æ‹¬äº§å“è¯´æ˜æ–‡æ¡£ã€æ•°æ®è¯´æ˜æ–‡æ¡£ã€å„ç§å¹³å°ä½¿ç”¨è¯´æ˜ç­‰ç­‰ã€‚</p><p><strong>4.å°éœ€æ±‚åº”æ¥ä¸æš‡</strong></p><p>ç”±äºä¸€å¼€å§‹å¯¹é¡¹ç›®ä¸ç†Ÿæ‚‰ï¼Œæ²¡æœ‰ä¸€ä¸ªå…¨å±€è§‚ï¼Œå¯¹é¡¹ç›®å„ç§æ•°æ®çš„è®¤è¯†å’Œç†è§£ä¹Ÿä¸æ˜¯å¾ˆæ·±åˆ»ï¼Œä¸€å¼€å§‹æ¥æ•°æ®çš„éœ€æ±‚æ€»å¤„äºä¸€ç§è¢«åŠ¨çš„çŠ¶æ€ã€‚å› ä¸ºæ²¡æœ‰å…¨å±€è§‚ã€ç¼ºä¹è§„åˆ’ï¼Œå¾ˆå¤šéœ€æ±‚éƒ½æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œéå¸¸è€—æ—¶ã€‚</p><p><strong>5.æœªçŸ¥é—®é¢˜çš„å›°æ‰°</strong></p><p>æ–°é¡¹ç›®æ€»æ˜¯ä¼šé‡åˆ°ä»¥å‰ä»æ¥æ²¡æœ‰é‡åˆ°ã€åˆ«äººä¹Ÿæ²¡æœ‰ç»éªŒçš„é—®é¢˜ã€‚å¦‚æœæ—¶é—´ç´§æ€¥ï¼Œå°±å¾ˆå®¹æ˜“é™·å…¥ç„¦è™‘ä¸­ã€‚</p><h2 id="å¦‚ä½•è§£å†³"><a href="#å¦‚ä½•è§£å†³" class="headerlink" title="å¦‚ä½•è§£å†³"></a>å¦‚ä½•è§£å†³</h2><h3 id="åšå¥½é¡¹ç›®ç®¡ç†è·Ÿè¿›"><a href="#åšå¥½é¡¹ç›®ç®¡ç†è·Ÿè¿›" class="headerlink" title="åšå¥½é¡¹ç›®ç®¡ç†è·Ÿè¿›"></a>åšå¥½é¡¹ç›®ç®¡ç†è·Ÿè¿›</h3><p>è¿™é‡Œè¯´çš„é¡¹ç›®ç®¡ç†æ˜¯é’ˆå¯¹å·¥ä½œå†…å®¹çš„é¡¹ç›®ç®¡ç†</p><ul><li>å…·ä½“åšæ³•ï¼šåˆ›å»ºExcelè¡¨æ ¼ï¼ŒæŠŠé¡¹ç›®ä¸­è®¾è®¡çš„æ‰€æœ‰æ•°æ®åˆ†æç›¸å…³çš„é‡ç‚¹å·¥ä½œéƒ½åˆ—ä¸¾å‡ºæ¥ï¼Œç„¶åæ’æœŸï¼Œæ¯å‘¨è·Ÿè¿›</li></ul><p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä¿è¯è‡ªå·±åœ¨å·¥ä½œçš„å¤§æ–¹å‘ä¸Šä¸ä¼šè·‘åï¼Œå¹¶ä¸”æ¯å‘¨æœ‰ä¸ªå°ç›®æ ‡å‹ç€ï¼Œå·¥ä½œæ•ˆç‡ä¹Ÿä¼šé«˜ä¸€äº›ã€‚</p><p>å¦å¤–ï¼Œå·¥ä½œé‡ç‚¹äº‹é¡¹è¿™é‡Œéœ€è¦è·Ÿé¡¹ç›®ç»„çš„æ ¸å¿ƒäººå‘˜å¤šäº¤æµï¼ŒåŠ æ·±å¯¹é¡¹ç›®çš„ç†è§£ï¼Œç„¶åç´§ç´§å›´ç»•æ•´ä¸ªé¡¹ç›®çš„KPIæ¥ç¡®å®šè‡ªå·±çš„å…³é”®å·¥ä½œå†…å®¹ï¼Œä¸ºæ•´ä¸ªé¡¹ç›®çš„KPIè¾¾æˆæœ€å¤§é™åº¦è´¡çŒ®è‡ªå·±çš„åŠ›é‡ã€‚</p><h3 id="æ„å»ºå·¥å…·ç™¾å®ç®±"><a href="#æ„å»ºå·¥å…·ç™¾å®ç®±" class="headerlink" title="æ„å»ºå·¥å…·ç™¾å®ç®±"></a>æ„å»ºå·¥å…·ç™¾å®ç®±</h3><p>é’ˆå¯¹å·¥å…·ä¸ç†Ÿç»ƒï¼Œå…ˆä½¿ç”¨äºŒå…«æ³•åˆ™ï¼Œæ‰¾åˆ°æœ€å¸¸ç”¨çš„åŠŸèƒ½å°½å¿«ä¸Šæ‰‹ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥è¯·æ•™ä½¿ç”¨è¿™ä¸ªå·¥å…·å¾ˆç†Ÿç»ƒçš„è€å¸æœºä»¬ï¼Œå…¶ä»–ä¸å¸¸ç”¨çš„åŠŸèƒ½ä»¥åæœ‰ç©ºæ…¢æ…¢æ¢ç´¢ã€‚</p><p>ç„¶åæŠŠæœ€å¸¸ç”¨çš„åŠŸèƒ½ã€ä½¿ç”¨æ–¹æ³•åŠè´¦å·å¯†ç è®°å½•åœ¨æŸä¸ªå›ºå®šçš„åœ°æ–¹ã€‚æ–°é¡¹ç›®æ¶‰åŠåˆ°çš„æ‰€æœ‰å·¥å…·ç´ æï¼Œæˆ‘éƒ½ä¼šç”¨åŒä¸€ä¸ªäº‘ç¬”è®°æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ï¼Œç„¶åæ”¶è—åœ¨æµè§ˆå™¨æœ€é†’ç›®çš„ä½ç½®ï¼Œæ¯å¤©å¼€å¯å·¥ä½œçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æ‰“å¼€è¿™ä¸ªæ”¶è—é¡µä¿è¯èƒ½æœ€å¿«é€Ÿè°ƒç”¨å·¥å…·å¼€å§‹å¹²æ´»ã€‚</p><h3 id="æ¢³ç†ææ–™å¹¶åˆ†ç±»"><a href="#æ¢³ç†ææ–™å¹¶åˆ†ç±»" class="headerlink" title="æ¢³ç†ææ–™å¹¶åˆ†ç±»"></a>æ¢³ç†ææ–™å¹¶åˆ†ç±»</h3><p>æ¯”å¦‚ç½‘é¡µç›¸å…³çš„ï¼Œæˆ‘ä¼šå»ºåœ¨æµè§ˆå™¨çš„ä¸€ä¸ªæ”¶è—å¤¹é‡Œï¼Œç„¶åæŒ‰ç…§å†…å®¹ä¸åŒè¿›è¡Œåˆ†ç±»å½’æ¡£ï¼Œä¿è¯ç”¨çš„æ—¶å€™å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ã€‚</p><p>æ–‡æ¡£èµ„æ–™ï¼Œæˆ‘ä¹Ÿä¼šæ ¹æ®å†…å®¹è¿›è¡Œåˆ†ç±»å½’æ¡£ã€‚ç„¶åæ ¹æ®é‡è¦ç¨‹åº¦è¿›è¡Œä¼˜å…ˆçº§æ’åºï¼Œå®‰æ’åœ¨æ—¥ç¨‹é‡Œå»çœ‹å’Œç†è§£ã€‚çœ‹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¼šæ¢³ç†é‡è¦ä¿¡æ¯ï¼Œå¹¶è®°ä¸‹è‡ªå·±çš„ç–‘é—®ä¸æƒ³æ³•ï¼Œç„¶åæ‰¾ç›¸å…³åŒäº‹ææ¸…æ¥šã€‚</p><p>è¿™ä¸ªæ­¥éª¤è™½ç„¶å¾ˆç®€å•ï¼Œæ•´ç†èµ·æ¥ä¹ŸèŠ±ä¸äº†å¤šé•¿æ—¶é—´ï¼Œä½†æ˜¯å¯ä»¥å¤§å¤§èŠ‚çº¦æˆ‘çš„è®¤çŸ¥å¸¦å®½ï¼ŒæŠŠçœä¸‹æ¥çš„æ„å¿—åŠ›å’Œæ—¶é—´èŠ±åœ¨æ›´æœ‰ä»·å€¼çš„äº‹æƒ…ä¸Šã€‚</p><h3 id="æ¢³ç†éœ€æ±‚ç»Ÿä¸€è§„åˆ’"><a href="#æ¢³ç†éœ€æ±‚ç»Ÿä¸€è§„åˆ’" class="headerlink" title="æ¢³ç†éœ€æ±‚ç»Ÿä¸€è§„åˆ’"></a>æ¢³ç†éœ€æ±‚ç»Ÿä¸€è§„åˆ’</h3><p>é’ˆå¯¹å°éœ€æ±‚åº”æ¥ä¸æš‡çš„é—®é¢˜ï¼Œæˆ‘çš„æ–¹æ³•æ˜¯ï¼š<strong>å®šæœŸæ•´ç†åšè¿‡çš„æ•°æ®éœ€æ±‚ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå…±åŒç‚¹ï¼Œæ‰¾åˆ°å…±æ€§ï¼Œç„¶åæµç¨‹åŒ–runèµ·æ¥ã€‚</strong></p><p>ä½†æœ€ç»ˆæçš„æ–¹æ³•ï¼Œè¿˜æ˜¯è¦ç»Ÿä¸€è§„åˆ’ã€‚ä½†è§„åˆ’ä¸€èˆ¬æ¥è‡ªäºå¯¹é¡¹ç›®çš„æ·±åˆ»ç†è§£ï¼Œä¸€å¼€å§‹çš„çç¢å°éœ€æ±‚é˜¶æ®µæ­£å¥½å¯ä»¥ä¸ºåæœŸçš„è§„åˆ’æä¾›ç´ æã€‚è¿™ä¹ˆæƒ³äº†ä¹‹åï¼Œæˆ‘åœ¨å‰æœŸåšè¿™äº›éœ€æ±‚æ—¶ä¹Ÿä¸ä¼šé‚£ä¹ˆçƒ¦èºäº†ã€‚</p><p>æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œ<strong>å‰æœŸä»çç¢å°éœ€æ±‚ä¸­ç§¯ç´¯ç»éªŒï¼ŒåŒæ—¶æ€è€ƒå¦‚ä½•åšæ•´ä½“è§„åˆ’ã€‚</strong>ç­‰ç»éªŒç§¯ç´¯çš„å·®ä¸å¤šæ—¶ï¼Œæ•´ä½“è§„åˆ’ä¹Ÿåšå¾—å·®ä¸å¤šäº†ï¼Œç„¶åä¸€æ°”å‘µæˆå®Œæˆè§„åˆ’å¥½çš„æ•°æ®å»ºè®¾å·¥ä½œã€‚æœ€åï¼Œå†ç”¨æ–°çš„æ•´ä½“æ–¹æ¡ˆæ›¿æ¢æ‰ä¹‹å‰çš„ä¸´æ—¶æ–¹æ³•ï¼Œå®Œç¾ã€‚</p><h3 id="æ‹†è§£é—®é¢˜å„ä¸ªå‡»ç ´"><a href="#æ‹†è§£é—®é¢˜å„ä¸ªå‡»ç ´" class="headerlink" title="æ‹†è§£é—®é¢˜å„ä¸ªå‡»ç ´"></a>æ‹†è§£é—®é¢˜å„ä¸ªå‡»ç ´</h3><p>é’ˆå¯¹é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œ<strong>æˆ‘çš„æ–¹æ³•æ˜¯å…ˆå»æœç´¢æœ‰æ²¡æœ‰ç»éªŒå¯ä»¥å‚è€ƒï¼Œä½¿ç”¨è°·æ­Œæœç´¢æˆ–è€…æ‰¾æœ‰ç»éªŒçš„åŒäº‹é—®ã€‚</strong></p><p>å¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªçœŸæ­£çš„éš¾é¢˜ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘åº”è¯¥å¼€å¿ƒï¼Œå› ä¸ºå¦‚æœè§£å†³äº†ï¼Œæˆ‘çš„å·¥å…·ç™¾å®ç®±åˆå¯ä»¥æ·»ä¸€ç¬”èµ„äº§äº†ã€‚</p><p>ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ç§åœºæ™¯æ˜¯éå¸¸å°‘çš„ã€‚çœŸçš„é‡ä¸Šäº†ï¼Œ<strong>æˆ‘æœ€éœ€è¦çš„å¯èƒ½å°±æ˜¯ä¸€å¼ çº¸ã€ä¸€æ”¯ç¬”ï¼Œç„¶åæ‰¾ä¸€ä¸ªç²¾åŠ›æ—ºç››çš„å®‰é™æ—¶æ®µï¼Œå¥½å¥½æ€è€ƒã€‚</strong>æœ‰æ—¶ä¸€ä¸‹å­æƒ³ä¸å‡ºæ¥ï¼Œå°±åˆ©ç”¨ç©ºé—²æ—¶é—´çš„å‘æ•£æ¨¡å¼æ¥å¸®åŠ©è‡ªå·±å¯»æ‰¾çµæ„Ÿã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé—®é¢˜éƒ½ä¼šè¿™æ ·è¢«è§£å†³æ‰ã€‚</p><p>å¦å¤–ä¸€ç§å·¥ä½œçš„éš¾é¢˜æ˜¯éšè”½æ€§çš„éš¾é¢˜ï¼Œçœ‹ä¸Šå»æ¯”è¾ƒå¤æ‚å’Œåºå¤§ã€‚</p><p>ä½†å…¶å®<strong>åªè¦èŠ±æ—¶é—´æ€è€ƒä¸‹ï¼Œè¿™ç§é—®é¢˜æ˜¯å®Œå…¨å¯ä»¥è¢«æ‹†è§£æˆå¤šä¸ªå°é—®é¢˜çš„ï¼Œç„¶åå„ä¸ªå‡»ç ´å°±å¥½äº†ã€‚</strong></p><p>å…·ä½“æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä¼šå…ˆæ‰¾ä¸ªç²¾åŠ›å¥½çš„æ—¶é—´æ®µæ€è€ƒéš¾é¢˜å¦‚ä½•è§£å†³ï¼Œè¿™ä¸ªé˜¶æ®µä¸€èˆ¬åªéœ€è¦æ‹¿ä¸€å¼ ç™½çº¸å’Œç¬”å°±å¥½äº†ã€‚</p><p>æƒ³å¥½ä¹‹åï¼Œ<strong>æˆ‘ä¼šé’ˆå¯¹è¿™ä¸ªéš¾é¢˜ä¸“é—¨å»ºç«‹ä¸€ä¸ªExcelè¡¨æ¥è·Ÿè¿›ã€‚ç„¶åæŠŠæ‹†è§£åçš„æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½å†™ä¸Šå¯¹åº”çš„æ–¹æ³•ã€éœ€è¦ç”¨åˆ°çš„èµ„æºä»¥åŠå¯èƒ½çš„é£é™©ç‚¹ï¼Œç„¶åå»è·Ÿè¿›ã€æ‰§è¡Œï¼Œåšå®Œåè®°å½•çŠ¶æ€ã€‚</strong></p><p>è¿™æ ·æ“ä½œä¹‹åï¼Œå°½ç®¡æ­¥éª¤å¯èƒ½ä¼šå¾ˆå¤šã€å¾ˆå¤æ‚ï¼Œä½†å› ä¸ºæˆ‘æŠŠæ‰€æœ‰çš„æ­¥éª¤è®°å½•åœ¨åŒä¸€é¡µæ–‡æ¡£ä¸Šï¼Œå°±ä¼šå½¢æˆä¸€ç§å…¨å±€è§‚ï¼Œå¹¶ä¸”æˆ‘æœ‰è®°å½•è·Ÿè¿›çŠ¶æ€ï¼Œæ‰€ä»¥ä¸€ç‚¹ä¹Ÿä¸ä¹±ã€‚</p><p>æ‹†è§£ã€è®°å½•çœŸçš„æ˜¯åº”å¯¹å¤æ‚é—®é¢˜çš„æœ€å¥½æ–¹æ³•ï¼Œæ¯æ¬¡é‡åˆ°éš¾é¢˜æˆ‘éƒ½æ˜¯ç”¨è¿™ä¸ªæ–¹æ³•è§£å†³çš„ï¼ŒçœŸæ˜¯å±¡è¯•ä¸çˆ½ã€‚</p><p>å…¶å®ï¼Œå¾ˆå¤šæ—¶å€™éš¾é¢˜åªæ˜¯çœ‹ä¸Šå»éš¾è€Œå·²ï¼Œå¤§è„‘ä¸€ä¸‹å­å¤„ç†ä¸äº†é‚£ä¹ˆå¤šå±‚çš„ä¿¡æ¯ã€‚æ‹†è§£å’Œè®°å½•ï¼Œå…¶å®ç›¸å½“äºå¸®ä½ èŠ‚çœå¤§è„‘çš„è®¡ç®—èµ„æºï¼Œä¸€æ¬¡åªä¸“æ³¨ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å°±èƒ½è§£å†³ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://mp.weixin.qq.com/s/Z4sntS4H5IsUCeVwcJkVGA">https://mp.weixin.qq.com/s/Z4sntS4H5IsUCeVwcJkVGA</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
            <tag> å·¥ä½œ </tag>
            
            <tag> ç»éªŒæ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[GCD]ä½¿ç”¨dispatch_onceå®ç°å•ä¾‹</title>
      <link href="/xyzhangblog/2020/11/06/ios-kai-fa/gcd-shi-yong-dispatch-once-shi-xian-dan-li/gcd-shi-yong-dispatch-once-shi-xian-dan-li/"/>
      <url>/xyzhangblog/2020/11/06/ios-kai-fa/gcd-shi-yong-dispatch-once-shi-xian-dan-li/gcd-shi-yong-dispatch-once-shi-xian-dan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨dispatch-onceæ‰§è¡Œåªéœ€è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç "><a href="#ä½¿ç”¨dispatch-onceæ‰§è¡Œåªéœ€è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç " class="headerlink" title="ä½¿ç”¨dispatch_onceæ‰§è¡Œåªéœ€è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç "></a>ä½¿ç”¨dispatch_onceæ‰§è¡Œåªéœ€è¿è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç </h2><p>å•ä¾‹æ¨¡å¼ï¼ˆsingletonï¼‰å¯¹ Objective-C å¼€å‘è€…è€Œè¨€å¹¶ä¸é™Œç”Ÿï¼Œå¸¸è§çš„å®ç°æ–¹å¼ä¸ºï¼šåœ¨ç±»ç¼–å†™åä¸º<code>sharedInstance</code>çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åªä¼šè¿”å›å…¨ç±»å…±ç”¨çš„å•ä¾‹å®ä¾‹ï¼Œè€Œä¸ä¼šåœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½åˆ›å»ºæ–°çš„å®ä¾‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªç±»å«<code>TestClass</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå…±äº«å®ä¾‹ä¸€èˆ¬ä¼šè¿™ä¹ˆå†™ï¼š</p><pre class=" language-objectivec"><code class="language-objectivec"><span class="token operator">+</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>sharedInstance <span class="token punctuation">{</span>    <span class="token keyword">static</span> TestClass <span class="token operator">*</span>sharedInstance <span class="token operator">=</span> nil<span class="token punctuation">;</span>    <span class="token operator">@</span><span class="token function">synchronized</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sharedInstance<span class="token punctuation">)</span> <span class="token punctuation">{</span>            sharedInstance <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">self</span> alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> sharedInstance<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å•ä¾‹æ¨¡å¼å¾ˆå®¹æ˜“å¼•èµ·æ¿€åŠ±è®¨è®ºï¼ŒObjective-C çš„å•ä¾‹å°¤å…¶å¦‚æ­¤ã€‚çº¿ç¨‹å®‰å…¨æ˜¯å¤§å®¶äº‰è®ºçš„ä¸»è¦é—®é¢˜ã€‚ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸Šè¿°ä»£ç å°†åˆ›å»ºå•ä¾‹å®ä¾‹çš„ä»£ç åŒ…è£¹åœ¨<strong>åŒæ­¥å—</strong>é‡Œã€‚æ— è®ºæ˜¯å¥½æ˜¯åï¼Œåæ­£è¿™ç§å®ç°æ–¹å¼å¾ˆå¸¸ç”¨ï¼Œè¿™æ ·çš„ä»£ç ä¹Ÿéšå¤„å¯è§ã€‚</p><p>ä¸è¿‡ï¼ŒGCD å¼•å…¥äº†ä¸€é¡¹ç‰¹æ€§ï¼Œèƒ½ä½¿å•ä¾‹å®ç°èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚æ‰€ç”¨çš„å‡½æ•°æ˜¯ï¼š</p><pre class=" language-objectivec"><code class="language-objectivec"><span class="token keyword">void</span> <span class="token function">dispatch_once</span><span class="token punctuation">(</span>dispatch_once_t <span class="token operator">*</span>token<span class="token punctuation">,</span> dispatch_block_t block<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ­¤å‡½æ•°æ¥å—ç±»å‹ä¸º<code>dispatch_once_t</code>çš„ç‰¹æ®Šå‚æ•°ï¼Œç§°å…¶ä¸º<strong>æ ‡è®°</strong>ï¼ˆtokenï¼‰ï¼Œæ­¤å¤–è¿˜æ¥å— block å‚æ•°ï¼Œå¯¹äºç»™å®š token æ¥è¯´ï¼Œè¯¥å‡½æ•°ä¿è¯ç›¸å…³çš„ block å¿…å®šä¼šæ‰§è¡Œï¼Œä¸”ä»…æ‰§è¡Œä¸€æ¬¡ã€‚é¦–æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¿…ç„¶ä¼šæ‰§è¡Œ block çš„ä»£ç ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹åœ¨äºï¼Œæ­¤æ“ä½œå®Œå…¨æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºåªéœ€æ‰§è¡Œä¸€æ¬¡çš„å—æ¥è¯´ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„ token éƒ½å¿…é¡»æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚å› æ­¤ï¼Œå¼€å‘è€…é€šå¸¸å°†æ ‡è®°å˜é‡å£°æ˜åœ¨<code>static</code>æˆ–<code>global</code>ä½œç”¨åŸŸé‡Œã€‚</p><p>ä¸Šè¿°å®ç°å•ä¾‹æ¨¡å¼æ‰€ç”¨çš„<code>sharedInstance</code>æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ­¤å‡½æ•°æ¥æ”¹å†™ï¼š</p><pre class=" language-objectivec"><code class="language-objectivec"><span class="token operator">+</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>sharedInstance <span class="token punctuation">{</span>    <span class="token keyword">static</span> TestClass <span class="token operator">*</span>sharedInstance<span class="token punctuation">;</span>    <span class="token keyword">static</span> dispatch_once_t onceToken<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// typedef long dispatch_once_t;</span>    <span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>onceToken<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span>        sharedInstance <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token keyword">self</span> alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> sharedInstance<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä½¿ç”¨<code>disptch_once</code>å¯ä»¥ç®€åŒ–ä»£ç å¹¶ä¸”å½»åº•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¼€å‘è€…æ ¹æœ¬æ— é¡»æ‹…å¿ƒåŠ é”æˆ–åŒæ­¥ã€‚æ‰€æœ‰é—®é¢˜éƒ½ç”± GCD åœ¨åº•å±‚å¤„ç†ã€‚ç”±äºæ¯æ¬¡è°ƒç”¨æ—¶éƒ½å¿…é¡»ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ tokenï¼Œæ‰€ä»¥ token è¦å£°æ˜æˆ<code>static</code>ã€‚æŠŠè¯¥å˜é‡å®šä¹‰åœ¨<code>static</code>ä½œç”¨åŸŸä¸­ï¼Œå¯ä»¥ä¿è¯ç¼–è¯‘å™¨åœ¨æ¯æ¬¡æ‰§è¡Œ<code>sharedInstance</code>æ–¹æ³•æ—¶éƒ½ä¼šå¤ç”¨è¿™ä¸ªå˜é‡ï¼Œè€Œä¸ä¼šåˆ›å»ºæ–°å˜é‡ã€‚</p><p>æ­¤å¤–ï¼Œ<code>dispatch_once</code>æ›´é«˜æ•ˆã€‚å®ƒæ²¡æœ‰ä½¿ç”¨é‡é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œè‹¥æ˜¯é‚£æ ·åšçš„è¯ï¼Œæ¯æ¬¡è¿è¡Œä»£ç å‰éƒ½è¦è·å–é”ï¼Œç›¸åï¼Œæ­¤å‡½æ•°é‡‡ç”¨åŸå­è®¿é—®ï¼ˆatomic accessï¼‰æ¥æŸ¥è¯¢æ ‡è®°ï¼Œä»¥åˆ¤æ–­å…¶æ‰€å¯¹åº”çš„ä»£ç åŸæ¥æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡ã€‚ã€ŠEffective Objective-C 2.0ã€‹çš„ä½œè€…åœ¨è£…æœ‰ 64 ä½çš„ Mac OS X 10.8.2 ç³»ç»Ÿçš„ç”µè„‘ä¸Šç®€å•æµ‹è¯•äº†æ€§èƒ½ï¼Œåˆ†åˆ«é‡‡ç”¨<code>@synchronized</code>æ–¹å¼åŠ<code>dispatch_once</code>æ–¹å¼æ¥å®ç°<code>sharedInstance</code>ï¼Œç»“æœæ˜¾ç¤ºï¼Œåè€…çš„é€Ÿåº¦å‡ ä¹æ˜¯å‰è€…çš„ 2 å€ã€‚</p><p>æ€»ç»“ï¼š</p><ol><li>ç»å¸¸éœ€è¦ç¼–å†™<strong>åªéœ€æ‰§è¡Œä¸€æ¬¡çš„çº¿ç¨‹å®‰å…¨ä»£ç </strong>ï¼ˆthread-safe single-code executionï¼‰ï¼Œé€šè¿‡ GCD æä¾›çš„<code>dispatch_once</code>å‡½æ•°ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å®ç°æ­¤åŠŸèƒ½ã€‚</li><li>token åº”è¯¥å£°æ˜åœ¨<code>static</code>æˆ–<code>global</code>ä¸­ï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨æŠŠåªéœ€ä¸€æ¬¡æ‰§è¡Œçš„å—ä¼ ç»™<code>dispatch_once</code>å‡½æ•°æ—¶ï¼Œä¼ è¿›å»çš„æ ‡è®°ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://book.douban.com/subject/21370593/">Effective Objective-C 2.0</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> GCD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿï¼ˆä¸€ï¼‰</title>
      <link href="/xyzhangblog/2020/10/25/ji-suan-ji-ji-chu/cao-zuo-xi-tong/cao-zuo-xi-tong-yi/"/>
      <url>/xyzhangblog/2020/10/25/ji-suan-ji-ji-chu/cao-zuo-xi-tong/cao-zuo-xi-tong-yi/</url>
      
        <content type="html"><![CDATA[<p><a href="https://mp.weixin.qq.com/s/i0PmP86iVv_-TlN8MLWIsw">https://mp.weixin.qq.com/s/i0PmP86iVv_-TlN8MLWIsw</a></p><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="åŸºæœ¬ç‰¹å¾"><a href="#åŸºæœ¬ç‰¹å¾" class="headerlink" title="åŸºæœ¬ç‰¹å¾"></a>åŸºæœ¬ç‰¹å¾</h2><ol><li><p>å¹¶å‘</p><p>å¹¶å‘æŒ‡å®è§‚ä¸Šä¸€æ®µæ—¶é—´å†…åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºï¼Œå¹¶è¡ŒæŒ‡åŒä¸€æ—¶åˆ»èƒ½è¿è¡Œå¤šä¸ªæŒ‡ä»¤ã€‚æ“ä½œç³»ç»Ÿä½¿ç”¨è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µå®ç°ç¨‹åºçš„å¹¶å‘è¿è¡Œ</p></li><li><p>å…±äº«</p><p>å…±äº«æŒ‡ç³»ç»Ÿä¸­çš„èµ„æºå¯ä»¥è¢«å¤šä¸ªå¹¶å‘è¿›ç¨‹ä½¿ç”¨ï¼Œåˆ†ä¸ºäº’æ–¥å…±äº«ï¼ˆä¸´ç•Œèµ„æºï¼Œä½¿ç”¨åŒæ­¥æœºåˆ¶å®ç°äº’æ–¥è®¿é—®ï¼‰å’ŒåŒæ—¶å…±äº«</p></li><li><p>è™šæ‹Ÿ</p><p>è™šæ‹ŸæŒ‡æŠŠä¸€ä¸ªç‰©ç†å®ä½“è½¬æ¢ä¸ºå¤šä¸ªé€»è¾‘å®ä½“ï¼Œåˆ†ä¸ºæ—¶åˆ†å¤ç”¨ï¼ˆè¿›ç¨‹è½®æµå ç”¨å¤„ç†å™¨ï¼‰ã€ç©ºåˆ†å¤ç”¨</p></li><li><p>å¼‚æ­¥</p></li></ol><h2 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h2><ol><li>è¿›ç¨‹ç®¡ç†</li><li>å†…å­˜ç®¡ç†</li><li>æ–‡ä»¶ç®¡ç†</li><li>è®¾å¤‡ç®¡ç†</li></ol><h1 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h1><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h2><ol><li><p>è¿›ç¨‹</p><p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½</p></li><li><p>çº¿ç¨‹</p><p>çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå…±äº«è¿›ç¨‹èµ„æº</p></li><li><p><strong>è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«</strong></p><p>å¯¹äºæ“ä½œç³»ç»Ÿè€Œè¨€,è¿›ç¨‹åé‡äºå†…å­˜èµ„æºç®¡ç†,çº¿ç¨‹åé‡äºCPUè°ƒåº¦</p><ul><li><p>æ‹¥æœ‰èµ„æº</p><p>è¿›ç¨‹æ‹¥æœ‰èµ„æºï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰èµ„æºï¼Œä½†å¯ä»¥è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æº</p></li><li><p>è°ƒåº¦</p><p>çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œåœ¨åŒä¸€è¿›ç¨‹ä¸­ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸ä¼šå¼•èµ·è¿›ç¨‹çš„åˆ‡æ¢ï¼Œå¼€é”€å°é€Ÿåº¦å¿«ï¼›ä»ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹ä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢</p></li><li><p>ç³»ç»Ÿå¼€é”€</p><p>åˆ›å»ºæˆ–é”€æ¯è¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦ä¸ºå…¶åˆ†é…æˆ–å›æ”¶èµ„æºï¼ˆå†…å­˜ç©ºé—´ã€IOç­‰ï¼‰ï¼Œåˆ‡æ¢è¿›ç¨‹æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿéœ€è¦å°†è¿™äº›èµ„æºæ›´æ–°ï¼Œå¼€é”€è¾ƒå¤§ï¼›</p><p>çº¿ç¨‹åˆ‡æ¢åªéœ€ä¿å­˜è®¾ç½®å°‘é‡å†…å®¹ï¼ˆ<strong>å †æ ˆã€å°‘é‡å¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨PC</strong>ï¼‰ï¼Œå¼€é”€å¾ˆå°ã€‚</p></li><li><p>é€šä¿¡æ–¹é¢</p><p>çº¿ç¨‹é—´é€šä¿¡å¯ä»¥é€šè¿‡è¯»å†™åŒä¸€è¿›ç¨‹ä¸­çš„æ•°æ®ï¼Œè¿›ç¨‹é€šä¿¡éœ€è¦å€ŸåŠ©IPC</p></li></ul></li></ol><h2 id="è¿›ç¨‹çŠ¶æ€åˆ‡æ¢"><a href="#è¿›ç¨‹çŠ¶æ€åˆ‡æ¢" class="headerlink" title="è¿›ç¨‹çŠ¶æ€åˆ‡æ¢"></a>è¿›ç¨‹çŠ¶æ€åˆ‡æ¢</h2><ul><li>å°±ç»ªçŠ¶æ€ï¼ˆReadyï¼‰ï¼šç­‰å¾…è¢«è°ƒåº¦</li><li>è¿è¡ŒçŠ¶æ€ï¼ˆrunningï¼‰</li><li>é˜»å¡çŠ¶æ€ï¼ˆwaitingï¼‰ï¼šç¼ºå°‘æŸäº›å¿…è¦çš„èµ„æº</li></ul><h2 id="è¿›ç¨‹è°ƒåº¦"><a href="#è¿›ç¨‹è°ƒåº¦" class="headerlink" title="è¿›ç¨‹è°ƒåº¦"></a>è¿›ç¨‹è°ƒåº¦</h2><h3 id="æ‰¹å¤„ç†ç³»ç»Ÿ-ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´"><a href="#æ‰¹å¤„ç†ç³»ç»Ÿ-ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´" class="headerlink" title="æ‰¹å¤„ç†ç³»ç»Ÿ-ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´"></a>æ‰¹å¤„ç†ç³»ç»Ÿ-ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´</h3><ol><li>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰</li><li>çŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJFï¼‰</li><li>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆï¼ˆSRTNï¼‰</li></ol><h3 id="äº¤äº’å¼ç³»ç»Ÿâ€“å¿«é€Ÿå“åº”"><a href="#äº¤äº’å¼ç³»ç»Ÿâ€“å¿«é€Ÿå“åº”" class="headerlink" title="äº¤äº’å¼ç³»ç»Ÿâ€“å¿«é€Ÿå“åº”"></a>äº¤äº’å¼ç³»ç»Ÿâ€“å¿«é€Ÿå“åº”</h3><ol><li>æ—¶é—´ç‰‡è½®è½¬</li><li>ä¼˜å…ˆçº§è°ƒåº¦</li><li>å¤šçº§åé¦ˆé˜Ÿåˆ—</li></ol><h3 id="å®æ—¶ç³»ç»Ÿ-æˆªæ­¢æ—¶é—´å‰å“åº”"><a href="#å®æ—¶ç³»ç»Ÿ-æˆªæ­¢æ—¶é—´å‰å“åº”" class="headerlink" title="å®æ—¶ç³»ç»Ÿ-æˆªæ­¢æ—¶é—´å‰å“åº”"></a>å®æ—¶ç³»ç»Ÿ-æˆªæ­¢æ—¶é—´å‰å“åº”</h3><h2 id="çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•âœ¨"><a href="#çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•âœ¨" class="headerlink" title="çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•âœ¨"></a>çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•âœ¨</h2><p>ä¸´ç•ŒåŒºã€äº’æ–¥é‡ä¸»è¦ç”¨äºäº’æ–¥æ§åˆ¶ï¼›ä¿¡å·é‡ã€äº‹ä»¶å¯¹è±¡ä¸»è¦ç”¨äºåŒæ­¥æ§åˆ¶</p><h3 id="1-ä¸´ç•ŒåŒº"><a href="#1-ä¸´ç•ŒåŒº" class="headerlink" title="1. ä¸´ç•ŒåŒº"></a>1. ä¸´ç•ŒåŒº</h3><p>é€šè¿‡å¯¹å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ§åˆ¶æ•°æ®è®¿é—®ã€‚åœ¨ä»»ä½•æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè®¿é—®ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åå…¶ä»–è¯•å›¾è®¿é—®çš„çº¿ç¨‹è¢«æŒ‚èµ·ï¼Œç›´åˆ°å…¬å…±èµ„æºè¢«é‡Šæ”¾</p><h3 id="2-äº’æ–¥é‡Mutex"><a href="#2-äº’æ–¥é‡Mutex" class="headerlink" title="2. äº’æ–¥é‡Mutex"></a>2. äº’æ–¥é‡Mutex</h3><p>åªæœ‰æ‹¥æœ‰äº’æ–¥é‡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚äº’æ–¥é‡åªæœ‰ä¸€ä¸ªï¼Œå½“å‰æ‹¥æœ‰äº’æ–¥é‡çš„çº¿ç¨‹å¤„ç†å®Œä»»åŠ¡åå¿…é¡»å°†çº¿ç¨‹äº¤å‡ºï¼Œä»¥ä¾¿å…¶ä»–çº¿ç¨‹è®¿é—®è¯¥èµ„æºã€‚</p><h3 id="3-ä¿¡å·é‡"><a href="#3-ä¿¡å·é‡" class="headerlink" title="3. ä¿¡å·é‡"></a>3. <a href="https://chorer.github.io/2020/03/25/OS-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5%EF%BC%9A%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E8%BF%9B%E7%A8%8B%E4%BA%92%E6%96%A5%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BF%A1%E5%8F%B7%E9%87%8F%E6%9C%BA%E5%88%B6/">ä¿¡å·é‡</a></h3><p>å…è®¸å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»è®¿é—®åŒä¸€èµ„æº</p><h3 id="4-äº‹ä»¶å¯¹è±¡"><a href="#4-äº‹ä»¶å¯¹è±¡" class="headerlink" title="4. äº‹ä»¶å¯¹è±¡"></a>4. äº‹ä»¶å¯¹è±¡</h3><p>é€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒçº¿ç¨‹çš„åŒæ­¥ï¼Œè¿˜å¯ä»¥æ–¹ä¾¿å®ç°å¯¹å¤šä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒçš„æ“ä½œ</p><h2 id="è¿›ç¨‹é€šä¿¡çš„æ–¹æ³•âœ¨"><a href="#è¿›ç¨‹é€šä¿¡çš„æ–¹æ³•âœ¨" class="headerlink" title="è¿›ç¨‹é€šä¿¡çš„æ–¹æ³•âœ¨"></a>è¿›ç¨‹é€šä¿¡çš„æ–¹æ³•âœ¨</h2><ul><li>è¿›ç¨‹åŒæ­¥:æ§åˆ¶å¤šä¸ªè¿›ç¨‹æŒ‰ä¸€å®šé¡ºåºæ‰§è¡Œ;</li><li>è¿›ç¨‹é€šä¿¡:è¿›ç¨‹é—´ä¼ è¾“ä¿¡æ¯ã€èµ„æºå…±äº«ã€æ—¶é—´é€š    çŸ¥ã€è¿›ç¨‹æ§åˆ¶</li></ul><p>ä¸ªäººè®¤ä¸ºåŒæ­¥ä¸é€šä¿¡æ¦‚å¿µä¸Šæ²¡å¿…è¦åˆ†çš„ç‰¹åˆ«ç»†ï¼Œè¿›ç¨‹é€šä¿¡æ˜¯ä¸€ç§æ‰‹æ®µï¼ŒåŒæ­¥æ˜¯ä¸€ç§ç›®çš„ï¼èƒ½å¤Ÿé€šä¿¡å°±æ˜¯ä¸€å®šæ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ï¼</p><h3 id="1-åŒ¿åç®¡é“"><a href="#1-åŒ¿åç®¡é“" class="headerlink" title="1. åŒ¿åç®¡é“"></a>1. åŒ¿åç®¡é“</h3><p>IPCæœ€ åŸºæœ¬çš„ä¸€ç§å®ç°æœºåˆ¶ï¼ŒåŸºäºå­—èŠ‚æµé€šä¿¡ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å®ç°ä¸€ä¸ªä¸¤è¿›ç¨‹éƒ½èƒ½è®¿é—®çš„æ–‡ä»¶ï¼Œè‹¥æƒ³è¦æ•°æ®æµä»çˆ¶è¿›ç¨‹æµå‘å­è¿›ç¨‹ï¼Œåˆ™å…³é—­çˆ¶è¿›ç¨‹çš„è¯»ç«¯ï¼ˆfd[0]ï¼‰ä¸å­è¿›ç¨‹çš„å†™ç«¯ï¼ˆfd[1]ï¼‰ï¼›</p><ul><li><p>åªèƒ½åŠåŒå·¥é€šä¿¡(ä½¿ç”¨pipeå‡½æ•°åˆ›å»º,fd[0]ç”¨äºè¯»,fd[1]ç”¨äºå†™);</p></li><li><p>åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹æˆ–å…„å¼Ÿè¿›ç¨‹ä¸­ä½¿ç”¨;</p></li></ul><h3 id="2-å‘½åç®¡é“-FIFO"><a href="#2-å‘½åç®¡é“-FIFO" class="headerlink" title="2. å‘½åç®¡é“(FIFO)"></a>2. å‘½åç®¡é“(FIFO)</h3><p>FIFOå¸¸ç”¨äºC-Såº”ç”¨ç¨‹åºä¸­ï¼ŒFIFOç”¨ä½œæ±‡èšç‚¹åœ¨å®¢æˆ·è¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®</p><ul><li><p>ä»»æ„è¿›ç¨‹é—´åŠåŒå·¥é€šä¿¡ï¼Œå¯ä»¥åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨ï¼ˆä½¿ç”¨mkfifoå‡½æ•°åˆ›å»ºï¼‰</p></li><li><p>å‘½åç®¡é“ä½¿ç”¨å‰éœ€è¦ä½¿ç”¨open()æ‰“å¼€ï¼Œå‘½åç®¡é“æ˜¯è®¾å¤‡æ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŒ¿åç®¡é“æ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„ç‰¹æ®Šæ–‡ä»¶ã€‚</p><p>å‘½åç®¡é“ä½¿ç”¨openæ‰“å¼€æœ‰å¯èƒ½ä¼šè¢«é˜»å¡ï¼šä»¥è¯»å†™æ–¹å¼æ‰“å¼€ä¸€å®šä¸ä¼šé˜»å¡ï¼›ä»¥åªè¯»æ–¹å¼æ‰“å¼€ï¼Œè°ƒç”¨open()å‡½æ•°ä¼šè¢«é˜»å¡ç›´åˆ°æœ‰æ•°æ®å¯è¯»ï¼›ä»¥åªå†™æ–¹å¼æ‰“å¼€ï¼Œè°ƒç”¨openå‡½æ•°ä¼šè¢«é˜»å¡ç›´åˆ°ä»¥å…¶ä»–æ–¹å¼æ‰“å¼€ã€‚</p></li></ul><h3 id="3-æ¶ˆæ¯é˜Ÿåˆ—"><a href="#3-æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="3. æ¶ˆæ¯é˜Ÿåˆ—"></a>3. æ¶ˆæ¯é˜Ÿåˆ—</h3><p>å®ç°ä¸¤è¿›ç¨‹é—´åŒå‘é€šä¿¡ï¼Œå…‹æœäº†ä¿¡å·ä¼ é€’ä¿¡æ¯å°‘ã€ç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ã€‚</p><ul><li>å¯ç‹¬ç«‹äºè¯»å†™è¿›ç¨‹å­˜åœ¨</li><li>é¿å…FIFOçš„åŒæ­¥é˜»å¡é—®é¢˜ï¼Œä¸éœ€è¦è¿›ç¨‹è‡ªå·±æä¾›åŒæ­¥æ–¹æ³•</li><li>è¯»æ¶ˆæ¯æ—¶å¯ä»¥æ ¹æ®æ¶ˆæ¯ç±»å‹æœ‰é€‰æ‹©æ€§çš„æ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸åƒFIFOåªèƒ½é»˜è®¤æ¥æ”¶</li></ul><h3 id="4-ä¿¡å·é‡ï¼ˆsemophoreï¼‰"><a href="#4-ä¿¡å·é‡ï¼ˆsemophoreï¼‰" class="headerlink" title="4. ä¿¡å·é‡ï¼ˆsemophoreï¼‰"></a>4. ä¿¡å·é‡ï¼ˆsemophoreï¼‰</h3><p>è®¡æ•°å™¨ï¼Œç”¨äºä¸ºå¤šä¸ªè¿›ç¨‹æä¾›å¯¹å…±äº«æ•°æ®å¯¹è±¡çš„è®¿é—®ã€‚ä½œä¸ºä¸€ç§é”æœºåˆ¶ï¼Œé˜²æ­¢æŸäº›è¿›ç¨‹æ­£åœ¨è®¿é—®å…±äº«èµ„æºæ—¶å…¶ä»–è¿›ç¨‹ä¹Ÿè®¿é—®ã€‚</p><h3 id="5-ä¿¡å·ï¼ˆsignalï¼‰"><a href="#5-ä¿¡å·ï¼ˆsignalï¼‰" class="headerlink" title="5. ä¿¡å·ï¼ˆsignalï¼‰"></a>5. ä¿¡å·ï¼ˆsignalï¼‰</h3><p>è¿›ç¨‹é—´ä¼ é€’ä¿¡å·ï¼Œæ•è·åˆ°ä¿¡å·åæ‰§è¡Œå¯¹åº”ç»‘å®šçš„ä»£ç ï¼Œå¯ä»¥å®ç°è¿›ç¨‹é€šä¿¡çš„â€œå•æ’­â€â€œå¹¿æ’­â€</p><h3 id="6-å…±äº«å†…å­˜"><a href="#6-å…±äº«å†…å­˜" class="headerlink" title="6. å…±äº«å†…å­˜"></a>6. å…±äº«å†…å­˜</h3><p>å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºï¼Œä¸éœ€è¦åœ¨è¿›ç¨‹é—´å¤åˆ¶æ•°æ®ï¼Œé€Ÿåº¦æœ€å¿«ï¼›</p><p>éœ€è¦ä½¿ç”¨ä¿¡å·é‡è¿›è¡Œè®¿é—®çš„åŒæ­¥</p><h3 id="7-Socketå¥—æ¥å­—"><a href="#7-Socketå¥—æ¥å­—" class="headerlink" title="7. Socketå¥—æ¥å­—"></a>7. Socketå¥—æ¥å­—</h3><p>å¯ç”¨äºç½‘ç»œä¸Šä¸åŒæœºå™¨é—´çš„è¿›ç¨‹é€šä¿¡</p><h1 id="TODOï¼š"><a href="#TODOï¼š" class="headerlink" title="TODOï¼š"></a>TODOï¼š</h1><p>ç»å…¸åŒæ­¥é—®é¢˜ï¼šå“²å­¦å®¶è¿›é¤ã€è¯»è€…å†™è€…é—®é¢˜ã€ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</p><p>å‚è€ƒèµ„æ–™</p><p><a href="https://blog.csdn.net/weixin_39763552/article/details/80306734">è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰â€”â€”åŒ¿åç®¡é“å’Œå‘½åç®¡é“</a></p><p><a href="https://cloud.tencent.com/developer/article/1129585">è¿›ç¨‹åŒæ­¥å’Œçº¿ç¨‹åŒæ­¥æ¦‚è¿°</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç ç¼–è¯‘æ—¶éƒ½åšäº†ä»€ä¹ˆï¼Ÿ</title>
      <link href="/xyzhangblog/2020/10/20/ji-suan-ji-ji-chu/bian-yi-yuan-li/dai-ma-bian-yi-shi-du-zuo-liao-shi-me/dai-ma-bian-yi-shi-du-zuo-liao-shi-me/"/>
      <url>/xyzhangblog/2020/10/20/ji-suan-ji-ji-chu/bian-yi-yuan-li/dai-ma-bian-yi-shi-du-zuo-liao-shi-me/dai-ma-bian-yi-shi-du-zuo-liao-shi-me/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> ç¼–è¯‘åŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æå‡hexoåšå®¢å†™ä½œæ•ˆç‡</title>
      <link href="/xyzhangblog/2020/10/18/bian-cheng-xiang-guan-ji-zhu/ti-sheng-hexo-bo-ke-xie-zuo-xiao-lu/ti-sheng-hexo-bo-ke-xie-zuo-xiao-lu/"/>
      <url>/xyzhangblog/2020/10/18/bian-cheng-xiang-guan-ji-zhu/ti-sheng-hexo-bo-ke-xie-zuo-xiao-lu/ti-sheng-hexo-bo-ke-xie-zuo-xiao-lu/</url>
      
        <content type="html"><![CDATA[<ol><li>æ–°å»ºæ–‡ç« </li></ol><pre class=" language-bash"><code class="language-bash">hexo new post <span class="token string">"æ–‡ç« æ ‡é¢˜"</span></code></pre><p>ä¸ºä¿è¯ç›®å½•ç»“æ„æ¸…æ™°æ˜“äºæŸ¥æ‰¾ï¼Œå»ºè®®å°†ç”Ÿæˆçš„markdownæ–‡ä»¶æ”¾ç½®åœ¨æ–‡ä»¶å¤¹ä¸‹<br>**<u>è‹¥æœ‰æ’å…¥å›¾ç‰‡çš„éœ€æ±‚éœ€è¦åœ¨markdownæ–‡ä»¶çš„åŒçº§ç›®å½•ä¸‹æ–°å»ºåŒåæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨å›¾ç‰‡ï¼Œæ–‡ç« ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„è¿›è¡Œå›¾ç‰‡çš„å¼•ç”¨ï¼ˆå‚è€ƒ<a href="https://github.com/1170300514/xyzhangblog/tree/master/source/_posts/IoT/TencentOSTiny%E7%94%B2%E9%86%9B%E4%BC%A0%E6%84%9F%E5%99%A8">ç”²é†›ä¼ æ„Ÿå™¨</a>æ–‡ç« çš„è·¯å¾„è®¾ç½®æ–¹å¼ï¼‰</u>**</p><ol start="2"><li><p>åœ¨æ–‡ç« å¤´ä¿¡æ¯ä¸­æ·»åŠ summaryå­—æ®µç”¨äºé¦–é¡µå±•ç¤ºï¼Œç›¸å½“äºæ¬¡çº§æ ‡é¢˜</p><p>æ–‡ç« å¤´ä¿¡æ¯æœ‰å¾ˆå¤šå¯é…å­—æ®µ è¯¦ç»†å¦‚ä¸‹ï¼š</p><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><p>ä»¥ä¸‹ä¸ºæ–‡ç« çš„ <code>Front-matter</code> ç¤ºä¾‹ã€‚</p><h3 id="æœ€ç®€ç¤ºä¾‹"><a href="#æœ€ç®€ç¤ºä¾‹" class="headerlink" title="æœ€ç®€ç¤ºä¾‹"></a>æœ€ç®€ç¤ºä¾‹</h3><pre><code>---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00---</code></pre><h3 id="æœ€å…¨ç¤ºä¾‹"><a href="#æœ€å…¨ç¤ºä¾‹" class="headerlink" title="æœ€å…¨ç¤ºä¾‹"></a>æœ€å…¨ç¤ºä¾‹</h3><pre><code>---title: typora-vue-themeä¸»é¢˜ä»‹ç»date: 2018-09-07 09:25:00author: èµµå¥‡img: /source/images/xxx.jpgtop: truecover: truecoverImg: /images/1.jpgpassword: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92toc: falsemathjax: falsesummary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categories: Markdowntags:  - Typora  - Markdown---</code></pre></li><li><p>æ–‡ç« å†…å®¹æ’°å†™å®Œæˆåä½¿ç”¨hexoå‘½ä»¤åœ¨æœ¬åœ°è¿è¡Œ</p><pre class=" language-bash"><code class="language-bash">hexo cleanhexo generatehexo server</code></pre><p>æŸ¥çœ‹æ— è¯¯åpushåˆ°githubè§¦å‘CIç”Ÿæˆç½‘é¡µ</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitå¼ºåˆ¶æ‹‰å–ä¸æ¨é€</title>
      <link href="/xyzhangblog/2020/10/18/git/git-qiang-zhi-la-qu-yu-tui-song/git-qiang-zhi-la-qu-yu-tui-song/"/>
      <url>/xyzhangblog/2020/10/18/git/git-qiang-zhi-la-qu-yu-tui-song/git-qiang-zhi-la-qu-yu-tui-song/</url>
      
        <content type="html"><![CDATA[<h2 id="Gitå¼ºåˆ¶æ‹‰å–"><a href="#Gitå¼ºåˆ¶æ‹‰å–" class="headerlink" title="Gitå¼ºåˆ¶æ‹‰å–"></a>Gitå¼ºåˆ¶æ‹‰å–</h2><p>æœ‰æ—¶æœ¬åœ°ä¿®æ”¹ä»£ç å‡ºç°å¼‚å¸¸ï¼Œéœ€è¦å°†æœ¬åœ°ä¿®æ”¹å…¨éƒ¨å¿½ç•¥ï¼Œå¼ºåˆ¶æ‹‰å–è¿œç«¯</p><pre class=" language-bash"><code class="language-bash">// æ–¹æ³•1: æ¸…ç©ºæœ¬åœ°ä¿®æ”¹å æ‹‰å–è¿œç«¯ä»£ç <span class="token function">git</span> reset --hard<span class="token function">git</span> pull// æ–¹æ³•2: ç›´æ¥æ‹‰å–è¿œç«¯ä»£ç å°†HEADæŒ‡å‘masteræœ€æ–°ç‰ˆæœ¬<span class="token function">git</span> fetch --all<span class="token function">git</span> reset --hard origin/master<span class="token function">git</span> pull</code></pre><h2 id="Gitå¼ºåˆ¶æ¨é€"><a href="#Gitå¼ºåˆ¶æ¨é€" class="headerlink" title="Gitå¼ºåˆ¶æ¨é€"></a>Gitå¼ºåˆ¶æ¨é€</h2><p>å¼ºåˆ¶ç”¨æœ¬åœ°ä»£ç è¦†ç›–è¿œç¨‹ä»“åº“</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> push -f origin master</code></pre><h2 id="Gitæ’¤é”€commit"><a href="#Gitæ’¤é”€commit" class="headerlink" title="Gitæ’¤é”€commit"></a>Gitæ’¤é”€commit</h2><p>æ‰§è¡Œå®Œcommitåï¼Œæƒ³æ’¤å›commitï¼Œä»¥ä¸‹å‘½ä»¤å¯ä»¥ä»…æ’¤å›commitä¸åˆ é™¤ä»£ç </p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> reset --soft HEAD^</code></pre><h4 id="å›æ»šæ¬¡æ•°"><a href="#å›æ»šæ¬¡æ•°" class="headerlink" title="å›æ»šæ¬¡æ•°"></a>å›æ»šæ¬¡æ•°</h4><p>HEAD^çš„æ„æ€æ˜¯ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥å†™æˆHEAD~1</p><p>å¦‚æœä½ è¿›è¡Œäº†2æ¬¡commitï¼Œæƒ³éƒ½æ’¤å›ï¼Œå¯ä»¥ä½¿ç”¨HEAD~2</p><h4 id="å‚æ•°å«ä¹‰"><a href="#å‚æ•°å«ä¹‰" class="headerlink" title="å‚æ•°å«ä¹‰"></a>å‚æ•°å«ä¹‰</h4><ol><li><p>â€“mixed </p><p>æ„æ€æ˜¯ï¼šä¸åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€commitï¼Œå¹¶ä¸”æ’¤é”€git add . æ“ä½œ</p><p>è¿™ä¸ªä¸ºé»˜è®¤å‚æ•°,git reset â€“mixed HEAD^ å’Œ git reset HEAD^ æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p></li><li><p>â€“soft </p><p>ä¸åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€commitï¼Œä¸æ’¤é”€git add . </p></li><li><p>â€“hard</p><p>åˆ é™¤å·¥ä½œç©ºé—´æ”¹åŠ¨ä»£ç ï¼Œæ’¤é”€commitï¼Œæ’¤é”€git add . </p><p>æ³¨æ„å®Œæˆè¿™ä¸ªæ“ä½œåï¼Œå°±æ¢å¤åˆ°äº†ä¸Šä¸€æ¬¡çš„commitçŠ¶æ€ã€‚</p></li></ol><h4 id="ä»…ä¿®æ”¹commitæ³¨é‡Š"><a href="#ä»…ä¿®æ”¹commitæ³¨é‡Š" class="headerlink" title="ä»…ä¿®æ”¹commitæ³¨é‡Š"></a>ä»…ä¿®æ”¹commitæ³¨é‡Š</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> commit --amend</code></pre><p>æ­¤æ—¶ä¼šè¿›å…¥é»˜è®¤vimç¼–è¾‘å™¨ï¼Œä¿®æ”¹æ³¨é‡Šå®Œæ¯•åä¿å­˜å°±å¥½äº†ã€‚</p><p>TODO: è§£å†³gitå†²çª</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ProtoBufä½¿ç”¨æ€»ç»“</title>
      <link href="/xyzhangblog/2020/10/17/bian-cheng-xiang-guan-ji-zhu/protobuf-shi-yong/protobuf-shi-yong/"/>
      <url>/xyzhangblog/2020/10/17/bian-cheng-xiang-guan-ji-zhu/protobuf-shi-yong/protobuf-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="0x00-åºåˆ—åŒ–"><a href="#0x00-åºåˆ—åŒ–" class="headerlink" title="0x00 åºåˆ—åŒ–"></a>0x00 åºåˆ—åŒ–</h2><p><strong>åºåˆ—åŒ–æ˜¯æŒ‡å°†æ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡çš„çŠ¶æ€è½¬æ¢æˆå¯å­˜å‚¨ï¼ˆæ–‡ä»¶/å†…å­˜ï¼‰ã€å¯ä¼ è¾“çš„æ ¼å¼</strong> åä¹‹ä»å­˜å‚¨æˆ–ä¼ è¾“å½¢å¼è½¬æ¢ä¸ºæ•°æ®ç»“æ„æˆ–å¯¹è±¡çš„å½¢å¼æˆä¸ºååºåˆ—åŒ–</p><p>å¸¸è§çš„åºåˆ—åŒ–æ ¼å¼æœ‰ï¼šXMLã€JSONã€YAMLã€plistâ€¦</p><h2 id="0x01-Protocol-Buffersç®€ä»‹"><a href="#0x01-Protocol-Buffersç®€ä»‹" class="headerlink" title="0x01 Protocol Buffersç®€ä»‹"></a>0x01 Protocol Buffersç®€ä»‹</h2><blockquote><p>ProtoBufï¼šgoogleæ¨å‡ºçš„è¯­è¨€ä¸­ç«‹ï¼Œå¹³å°æ— å…³ï¼Œå¯æ‰©å±•çš„åºåˆ—åŒ–æ•°æ®çš„æ ¼å¼ï¼Œå¯ç”¨äºé€šä¿¡åè®®ï¼Œæ•°æ®å­˜å‚¨ç­‰ï¼›ç›¸æ¯”XMLæ›´å°å·§ã€å¿«é€Ÿã€ç®€å•ã€‚ä¸€æ—¦å®šä¹‰è¦å¤„ç†çš„æ•°æ®çš„æ•°æ®ç»“æ„åï¼Œå°±å¯ä»¥åˆ©ç”¨ProtoBufçš„ä»£ç ç”Ÿæˆå·¥å…·ç”Ÿæˆç›¸å…³ä»£ç ã€‚åªéœ€ä½¿ç”¨Protobufå¯¹æ•°æ®ç»“æ„è¿›è¡Œä¸€æ¬¡æè¿°ï¼Œå°±å¯ä»¥åˆ©ç”¨ä¸åŒè¯­è¨€æˆ–ä»ä¸åŒæ•°æ®æµä¸­å¯¹ç»“æ„åŒ–æ•°æ®è¿›è¡Œè¯»å†™ã€‚</p></blockquote><p>Protocol buffersé€‚åˆåšæ•°æ®å­˜å‚¨æˆ–RPCæ•°æ®äº¤æ¢æ ¼å¼ã€‚å¯ç”¨äºé€šè®¯åè®®ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸçš„è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„æ•°æ®æ ¼å¼ã€‚Protocol buffersåŒ…å«åºåˆ—åŒ–æ ¼å¼çš„å®šä¹‰ã€å¯¹åº”è¯­è¨€çš„åº“å’ŒIDLç¼–è¯‘å™¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹éœ€è¦å®šä¹‰protoæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨IDLç¼–è¯‘å™¨ç¼–è¯‘æˆéœ€è¦çš„è¯­è¨€ã€‚</p><p><strong>protocol buffers è¯ç”Ÿä¹‹åˆæ˜¯ä¸ºäº†è§£å†³æœåŠ¡å™¨ç«¯æ–°æ—§åè®®(é«˜ä½ç‰ˆæœ¬)å…¼å®¹æ€§é—®é¢˜ï¼Œåå­—ä¹Ÿå¾ˆä½“è´´ï¼Œâ€œåè®®ç¼“å†²åŒºâ€ã€‚åªä¸è¿‡åæœŸæ…¢æ…¢å‘å±•æˆç”¨äºä¼ è¾“æ•°æ®</strong>ã€‚</p><h2 id="0x02-Protocol-Buffersçš„ç‰¹ç‚¹åŠç”¨æ³•"><a href="#0x02-Protocol-Buffersçš„ç‰¹ç‚¹åŠç”¨æ³•" class="headerlink" title="0x02 Protocol Buffersçš„ç‰¹ç‚¹åŠç”¨æ³•"></a>0x02 Protocol Buffersçš„ç‰¹ç‚¹åŠç”¨æ³•</h2><h3 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h3><ul><li>ä¾¿æ·å¼•å…¥æ–°å­—æ®µï¼Œä¸”æ— éœ€äº†è§£æ‰€æœ‰å­—æ®µæœåŠ¡å™¨å³å¯è¿›è¡Œæ•°æ®çš„è§£æå’Œä¼ é€’</li><li>æ•°æ®æ ¼å¼æ›´å…·è‡ªæˆ‘æè¿°æ€§</li><li>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ä»£ç å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œé¿å…æ‰‹åŠ¨è§£æ</li></ul><h3 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h3><p>protoä¸­æ‰€æœ‰ç»“æ„åŒ–æ•°æ®éƒ½è¢«ç§°ä¸º<code>message</code></p><pre class=" language-proto"><code class="language-proto">syntax = "proto3";message SearchRequest {  string query = 1;  int32 page_number = 2;  int32 result_per_page = 3;}</code></pre><h3 id="1-åˆ†é…å­—æ®µç¼–å·"><a href="#1-åˆ†é…å­—æ®µç¼–å·" class="headerlink" title="1. åˆ†é…å­—æ®µç¼–å·"></a>1. åˆ†é…å­—æ®µç¼–å·</h3><p>æ¯ä¸ªæ¶ˆæ¯å®šä¹‰ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æœ‰<strong>å”¯ä¸€çš„ç¼–å·</strong>ã€‚è¿™äº›å­—æ®µç¼–å·ç”¨äºæ ‡è¯†æ¶ˆæ¯äºŒè¿›åˆ¶æ ¼å¼ä¸­çš„å­—æ®µï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ¶ˆæ¯ç±»å‹åä¸åº”æ›´æ”¹ã€‚è¯·æ³¨æ„ï¼ŒèŒƒå›´ 1 åˆ° 15 ä¸­çš„å­—æ®µç¼–å·éœ€è¦ä¸€ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼ŒåŒ…æ‹¬å­—æ®µç¼–å·å’Œå­—æ®µç±»å‹ã€‚èŒƒå›´ 16 è‡³ 2047 ä¸­çš„å­—æ®µç¼–å·éœ€è¦ä¸¤ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ä½ åº”è¯¥ä¿ç•™æ•°å­— 1 åˆ° 15 ä½œä¸ºéå¸¸é¢‘ç¹å‡ºç°çš„æ¶ˆæ¯å…ƒç´ ã€‚è¯·è®°ä½ä¸ºå°†æ¥å¯èƒ½æ·»åŠ çš„é¢‘ç¹å‡ºç°çš„å…ƒç´ ç•™å‡ºä¸€äº›ç©ºé—´ã€‚</p><p>å¯ä»¥æŒ‡å®šçš„æœ€å°å­—æ®µç¼–å·ä¸º1ï¼Œæœ€å¤§å­—æ®µç¼–å·ä¸º2^29^-1 æˆ– 536,870,911ã€‚ä¹Ÿä¸èƒ½ä½¿ç”¨æ•°å­— 19000 åˆ° 19999ï¼ˆFieldDescriptor :: kFirstReservedNumber åˆ° FieldDescriptor :: kLastReservedNumberï¼‰ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸º Protocol Bufferså®ç°ä¿ç•™çš„ã€‚</p><p>å¦‚æœåœ¨ .proto ä¸­ä½¿ç”¨è¿™äº›ä¿ç•™æ•°å­—ä¸­çš„ä¸€ä¸ªï¼ŒProtocol Buffers ç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚</p><p>åŒæ ·ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨ä»»ä½•ä»¥å‰ Protocol Buffers ä¿ç•™çš„ä¸€äº›å­—æ®µå·ç ã€‚ä¿ç•™å­—æ®µæ˜¯ä»€ä¹ˆï¼Œä¸‹ä¸€èŠ‚è¯¦ç»†è¯´æ˜ã€‚</p><h3 id="2-ä¿ç•™å­—æ®µ"><a href="#2-ä¿ç•™å­—æ®µ" class="headerlink" title="2. ä¿ç•™å­—æ®µ"></a>2. ä¿ç•™å­—æ®µ</h3><p>å¦‚æœæ‚¨é€šè¿‡å®Œå…¨åˆ é™¤æŸä¸ªå­—æ®µæˆ–å°†å…¶æ³¨é‡Šæ‰æ¥æ›´æ–°æ¶ˆæ¯ç±»å‹ï¼Œé‚£ä¹ˆæœªæ¥çš„ç”¨æˆ·å¯ä»¥åœ¨å¯¹è¯¥ç±»å‹è¿›è¡Œè‡ªå·±çš„æ›´æ–°æ—¶é‡æ–°ä½¿ç”¨è¯¥å­—æ®µå·ã€‚å¦‚æœç¨ååŠ è½½åˆ°äº†çš„æ—§ç‰ˆæœ¬ <code>.proto</code> æ–‡ä»¶ï¼Œåˆ™ä¼šå¯¼è‡´æœåŠ¡å™¨å‡ºç°ä¸¥é‡é—®é¢˜ï¼Œä¾‹å¦‚æ•°æ®æ··ä¹±ï¼Œéšç§é”™è¯¯ç­‰ç­‰ã€‚ç¡®ä¿è¿™ç§æƒ…å†µä¸ä¼šå‘ç”Ÿçš„ä¸€ç§æ–¹æ³•æ˜¯æŒ‡å®šåˆ é™¤å­—æ®µçš„å­—æ®µç¼–å·ï¼ˆæˆ–åç§°ï¼Œè¿™ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´ JSON åºåˆ—åŒ–é—®é¢˜ï¼‰ä¸º <code>reserved</code>ã€‚å¦‚æœå°†æ¥çš„ä»»ä½•ç”¨æˆ·è¯•å›¾ä½¿ç”¨è¿™äº›å­—æ®µæ ‡è¯†ç¬¦ï¼ŒProtocol Buffers ç¼–è¯‘å™¨å°†ä¼šæŠ¥é”™ã€‚</p><pre class=" language-proto"><code class="language-proto">message Foo {  reserved 2, 15, 9 to 11;  reserved "foo", "bar";}</code></pre><p><strong>æ³¨æ„ï¼Œä¸èƒ½åœ¨åŒä¸€ä¸ª <code>reserved</code> è¯­å¥ä¸­æ··åˆå­—æ®µåç§°å’Œå­—æ®µç¼–å·</strong>ã€‚å¦‚æœ‰éœ€è¦éœ€è¦åƒä¸Šé¢è¿™ä¸ªä¾‹å­è¿™æ ·å†™ã€‚</p><h3 id="3-é»˜è®¤å­—æ®µè§„åˆ™"><a href="#3-é»˜è®¤å­—æ®µè§„åˆ™" class="headerlink" title="3. é»˜è®¤å­—æ®µè§„åˆ™"></a>3. é»˜è®¤å­—æ®µè§„åˆ™</h3><ul><li>å­—æ®µåä¸èƒ½é‡å¤ï¼Œå¿…é¡»å”¯ä¸€ã€‚</li><li>repeated å­—æ®µï¼šå¯ä»¥åœ¨ä¸€ä¸ª message ä¸­é‡å¤ä»»ä½•æ•°å­—å¤šæ¬¡(åŒ…æ‹¬ 0 )ï¼Œä¸è¿‡è¿™äº›é‡å¤å€¼çš„é¡ºåºè¢«ä¿ç•™ã€‚</li></ul><h2 id="0x03-Protocol-Buffersçš„ä¼˜ç¼ºç‚¹"><a href="#0x03-Protocol-Buffersçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="0x03 Protocol Buffersçš„ä¼˜ç¼ºç‚¹"></a>0x03 Protocol Buffersçš„ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><ul><li>ç®€å•</li><li>æ•°æ®ä½“ç§¯å°</li><li>ååºåˆ—åŒ–é€Ÿåº¦å¿«</li><li>è‡ªåŠ¨åŒ–ç”Ÿæˆæ˜“äºç¼–ç æ–¹å¼ä½¿ç”¨çš„æ•°æ®è®¿é—®ç±»</li></ul><h4 id="ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ä¸¾ä¸ªä¾‹å­ï¼š"></a>ä¸¾ä¸ªä¾‹å­ï¼š</h4><p>å¦‚æœè¦ç¼–ç ä¸€ä¸ªç”¨æˆ·çš„åå­—å’Œ email ä¿¡æ¯ï¼Œç”¨ XML çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><pre class=" language-xml"><code class="language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>John Doe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>email</span><span class="token punctuation">></span></span>jdoe@example.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>email</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">></span></span></code></pre><p>ç›¸åŒéœ€æ±‚ï¼Œå¦‚æœæ¢æˆ protocol buffers æ¥å®ç°ï¼Œå®šä¹‰æ–‡ä»¶å¦‚ä¸‹ï¼š</p><pre class=" language-c"><code class="language-c"><span class="token macro property"># Textual representation of a protocol buffer.</span><span class="token macro property"># This is *not* the binary format used on the wire.</span>person <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">"John Doe"</span>  email<span class="token punctuation">:</span> <span class="token string">"jdoe@example.com"</span><span class="token punctuation">}</span></code></pre><p>protocol buffers é€šè¿‡ç¼–ç ä»¥åï¼Œä»¥äºŒè¿›åˆ¶çš„æ–¹å¼è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæœ€å¤šåªéœ€è¦ 28 bytes ç©ºé—´å’Œ 100-200 ns çš„ååºåˆ—åŒ–æ—¶é—´ã€‚ä½†æ˜¯ XML åˆ™è‡³å°‘éœ€è¦ 69 bytes ç©ºé—´ï¼ˆç»è¿‡å‹ç¼©ä»¥åï¼Œå»æ‰æ‰€æœ‰ç©ºæ ¼ï¼‰å’Œ 5000-10000 çš„ååºåˆ—åŒ–æ—¶é—´ã€‚</p><p>ä¸Šé¢è¯´çš„æ˜¯æ€§èƒ½æ–¹é¢çš„ä¼˜åŠ¿ã€‚æ¥ä¸‹æ¥è¯´è¯´ç¼–ç æ–¹é¢çš„ä¼˜åŠ¿ã€‚</p><p>protocol buffers è‡ªå¸¦ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆå‹å¥½çš„æ•°æ®è®¿é—®å­˜å‚¨æ¥å£ã€‚ä»è€Œå¼€å‘äººå‘˜ä½¿ç”¨å®ƒæ¥ç¼–ç æ›´åŠ æ–¹ä¾¿ã€‚ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœç”¨ C++ çš„æ–¹å¼å»è¯»å–ç”¨æˆ·çš„åå­—å’Œ emailï¼Œç›´æ¥è°ƒç”¨å¯¹åº”çš„ get æ–¹æ³•å³å¯ï¼ˆæ‰€æœ‰å±æ€§çš„ get å’Œ set æ–¹æ³•çš„ä»£ç éƒ½è‡ªåŠ¨ç”Ÿæˆå¥½äº†ï¼Œåªéœ€è¦è°ƒç”¨å³å¯ï¼‰</p><pre class=" language-c"><code class="language-c">  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Name: "</span> <span class="token operator">&lt;&lt;</span> person<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"E-mail: "</span> <span class="token operator">&lt;&lt;</span> person<span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></code></pre><p>è€Œ XML è¯»å–æ•°æ®ä¼šéº»çƒ¦ä¸€äº›ï¼š</p><pre class=" language-xml"><code class="language-xml">  cout &lt;&lt; "Name: "       &lt;&lt; person.getElementsByTagName("name")->item(0)->innerText()       &lt;&lt; endl;  cout &lt;&lt; "E-mail: "       &lt;&lt; person.getElementsByTagName("email")->item(0)->innerText()       &lt;&lt; endl;</code></pre><p>Protobuf è¯­ä¹‰æ›´æ¸…æ™°ï¼Œæ— éœ€ç±»ä¼¼ XML è§£æå™¨çš„ä¸œè¥¿ï¼ˆå› ä¸º Protobuf ç¼–è¯‘å™¨ä¼šå°† .proto æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆå¯¹åº”çš„æ•°æ®è®¿é—®ç±»ä»¥å¯¹ Protobuf æ•°æ®è¿›è¡Œåºåˆ—åŒ–ã€ååºåˆ—åŒ–æ“ä½œï¼‰ã€‚</p><p>ä½¿ç”¨ Protobuf æ— éœ€å­¦ä¹ å¤æ‚çš„æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ŒProtobuf çš„ç¼–ç¨‹æ¨¡å¼æ¯”è¾ƒå‹å¥½ï¼Œç®€å•æ˜“å­¦ï¼ŒåŒæ—¶å®ƒæ‹¥æœ‰è‰¯å¥½çš„æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œå¯¹äºå–œæ¬¢ç®€å•äº‹ç‰©çš„äººä»¬è€Œè¨€ï¼ŒProtobuf æ¯”å…¶ä»–çš„æŠ€æœ¯æ›´åŠ æœ‰å¸å¼•åŠ›ã€‚</p><p>protocol buffers æœ€åä¸€ä¸ªéå¸¸æ£’çš„ç‰¹æ€§æ˜¯ï¼Œå³â€œå‘åâ€å…¼å®¹æ€§å¥½ï¼Œäººä»¬ä¸å¿…ç ´åå·²éƒ¨ç½²çš„ã€ä¾é â€œè€â€æ•°æ®æ ¼å¼çš„ç¨‹åºå°±å¯ä»¥å¯¹æ•°æ®ç»“æ„è¿›è¡Œå‡çº§ã€‚è¿™æ ·æ‚¨çš„ç¨‹åºå°±å¯ä»¥ä¸å¿…æ‹…å¿ƒå› ä¸ºæ¶ˆæ¯ç»“æ„çš„æ”¹å˜è€Œé€ æˆçš„å¤§è§„æ¨¡çš„ä»£ç é‡æ„æˆ–è€…è¿ç§»çš„é—®é¢˜ã€‚å› ä¸ºæ·»åŠ æ–°çš„æ¶ˆæ¯ä¸­çš„ field å¹¶ä¸ä¼šå¼•èµ·å·²ç»å‘å¸ƒçš„ç¨‹åºçš„ä»»ä½•æ”¹å˜(å› ä¸ºå­˜å‚¨æ–¹å¼æœ¬æ¥å°±æ˜¯æ— åºçš„ï¼Œk-v å½¢å¼)ã€‚</p><p>å½“ç„¶ protocol buffers ä¹Ÿå¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œåœ¨ä½¿ç”¨ä¸Šå­˜åœ¨ä¸€äº›å±€é™æ€§ã€‚</p><p>ç”±äºæ–‡æœ¬å¹¶ä¸é€‚åˆç”¨æ¥æè¿°æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥ Protobuf ä¹Ÿä¸é€‚åˆç”¨æ¥å¯¹åŸºäºæ–‡æœ¬çš„æ ‡è®°æ–‡æ¡£ï¼ˆå¦‚ HTMLï¼‰å»ºæ¨¡ã€‚å¦å¤–ï¼Œç”±äº XML å…·æœ‰æŸç§ç¨‹åº¦ä¸Šçš„è‡ªè§£é‡Šæ€§ï¼Œå®ƒå¯ä»¥è¢«äººç›´æ¥è¯»å–ç¼–è¾‘ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Š Protobuf ä¸è¡Œï¼Œå®ƒä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å­˜å‚¨ï¼Œé™¤éä½ æœ‰ <code>.proto</code> å®šä¹‰ï¼Œå¦åˆ™ä½ æ²¡æ³•ç›´æ¥è¯»å‡º Protobuf çš„ä»»ä½•å†…å®¹ã€‚</p><h2 id="0x04-å‚è€ƒèµ„æ–™ï¼š"><a href="#0x04-å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="0x04 å‚è€ƒèµ„æ–™ï¼š"></a>0x04 å‚è€ƒèµ„æ–™ï¼š</h2><p>pbçš„ç¼–ç åŸç†ã€æ›´è¯¦ç»†çš„ç”¨æ³•åˆ†æï¼š<a href="https://halfrost.com/protobuf_encode/">https://halfrost.com/protobuf_encode/</a></p><p>pbçš„æ€§èƒ½åˆ†æå‚è€ƒï¼š<a href="https://halfrost.com/protobuf_decode/#toc-13">https://halfrost.com/protobuf_decode/#toc-13</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> ProtoBuf </tag>
            
            <tag> åºåˆ—åŒ– </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32+TencentOSTinyå®ç°ç”²é†›ä¼ æ„Ÿå™¨</title>
      <link href="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/"/>
      <url>/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/</url>
      
        <content type="html"><![CDATA[<h2 id="0x00-ç¯å¢ƒè¯´æ˜"><a href="#0x00-ç¯å¢ƒè¯´æ˜" class="headerlink" title="0x00. ç¯å¢ƒè¯´æ˜"></a>0x00. ç¯å¢ƒè¯´æ˜</h2><ul><li>è½¯ä»¶ç¯å¢ƒï¼šwin10 64ä½ + MDK</li><li>å¼€å‘æ¿ï¼šTOS_EVB_G0å¼€å‘æ¿ x 1</li><li>ä¼ æ„Ÿå™¨ï¼šè‹±å›½ Dart ç”²é†›ä¼ æ„Ÿå™¨ x 1</li><li>æ‰©å±•æ¿ï¼šE53ç”²é†›ä¼ æ„Ÿå™¨åº•æ¿ x 1</li><li>ä¸‹è½½å™¨ï¼šST-Linkä¸‹è½½å™¨ x 1</li></ul><h2 id="0x01-å®‰è£…åŸºç¡€å·¥å…·ï¼ˆç¡¬ä»¶ï¼‰"><a href="#0x01-å®‰è£…åŸºç¡€å·¥å…·ï¼ˆç¡¬ä»¶ï¼‰" class="headerlink" title="0x01. å®‰è£…åŸºç¡€å·¥å…·ï¼ˆç¡¬ä»¶ï¼‰"></a>0x01. å®‰è£…åŸºç¡€å·¥å…·ï¼ˆç¡¬ä»¶ï¼‰</h2><h4 id="è¿æ¥ST-Linkä¸å¼€å‘æ¿ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè¿æ¥å¦åˆ™å¯èƒ½çƒ§åMCU"><a href="#è¿æ¥ST-Linkä¸å¼€å‘æ¿ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè¿æ¥å¦åˆ™å¯èƒ½çƒ§åMCU" class="headerlink" title="è¿æ¥ST-Linkä¸å¼€å‘æ¿ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè¿æ¥å¦åˆ™å¯èƒ½çƒ§åMCU"></a>è¿æ¥ST-Linkä¸å¼€å‘æ¿ï¼Œä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè¿æ¥å¦åˆ™å¯èƒ½çƒ§åMCU</h4><p>å¼€å‘æ¿3v3â€”&gt; STlink 3.3V<br>å¼€å‘æ¿DIOâ€”&gt; STlink SWDIO<br>å¼€å‘æ¿CLKâ€”&gt; STlink SWCLK<br>å¼€å‘æ¿GNDâ€”&gt; STlink GND</p><h4 id="è®¾ç½®è·³çº¿å¸½ï¼Œåˆ‡æ¢booté€‰æ‹©ç«¯å­å’Œä¸²å£é€‰æ‹©ç«¯å­"><a href="#è®¾ç½®è·³çº¿å¸½ï¼Œåˆ‡æ¢booté€‰æ‹©ç«¯å­å’Œä¸²å£é€‰æ‹©ç«¯å­" class="headerlink" title="è®¾ç½®è·³çº¿å¸½ï¼Œåˆ‡æ¢booté€‰æ‹©ç«¯å­å’Œä¸²å£é€‰æ‹©ç«¯å­"></a>è®¾ç½®è·³çº¿å¸½ï¼Œåˆ‡æ¢booté€‰æ‹©ç«¯å­å’Œä¸²å£é€‰æ‹©ç«¯å­</h4><ol><li>å¼€å‘ç‰ˆä¸Šçš„ESPå›ºä»¶ä¸‹è½½é…ç½®åˆ‡æ¢åˆ°GNDï¼Œä½¿wifiå¤„äºä¸‹è½½æ¨¡å¼</li><li>Booté€‰æ‹©åˆ‡æ¢åˆ°0</li><li>ä¸²å£åˆ‡æ¢ç«¯å­ç½®äºä¸­é—´ï¼Œä½¿ESP8266ç›´æ¥ä¸PCä¸²å£è¿æ¥</li></ol><p>è®¾ç½®å®Œæˆåçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/%E7%AB%AF%E5%AD%90%E8%AE%BE%E7%BD%AE.jpg" class="" title="ç«¯å­è®¾ç½®"><h2 id="0x02-å®‰è£…åŸºç¡€å·¥å…·ï¼ˆè½¯ä»¶ï¼‰"><a href="#0x02-å®‰è£…åŸºç¡€å·¥å…·ï¼ˆè½¯ä»¶ï¼‰" class="headerlink" title="0x02. å®‰è£…åŸºç¡€å·¥å…·ï¼ˆè½¯ä»¶ï¼‰"></a>0x02. å®‰è£…åŸºç¡€å·¥å…·ï¼ˆè½¯ä»¶ï¼‰</h2><h4 id="å®‰è£…MDKè½¯ä»¶"><a href="#å®‰è£…MDKè½¯ä»¶" class="headerlink" title="å®‰è£…MDKè½¯ä»¶"></a>å®‰è£…MDKè½¯ä»¶</h4><ul><li><p>æ¿€æ´»è½¯ä»¶ï¼Œå¯¼å…¥Licenseï¼Œæ³¨æ„è¿™éƒ¨éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</p></li><li><p>å®‰è£…å•ç‰‡æœºå‹å·ä¸­å¯¹åº”çš„Pack</p><p>å¯ä»¥ç›´æ¥åœ¨MDKè½¯ä»¶ä¸Šåœ¨çº¿å®‰è£…ï¼Œåœ¨å¯¼èˆªæ æ‰“å¼€Packå®‰è£…é¡µé¢ï¼Œæ‰¾åˆ°STM32G0xxï¼Œç‚¹å‡»installå®‰è£…</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001164941942.png" class="" title="image-20201001164941942"></li></ul><h4 id="å®‰è£…ST-Linké©±åŠ¨"><a href="#å®‰è£…ST-Linké©±åŠ¨" class="headerlink" title="å®‰è£…ST-Linké©±åŠ¨"></a>å®‰è£…ST-Linké©±åŠ¨</h4><p>å‰å¾€STå®˜ç½‘å³å¯ä¸‹è½½ï¼š</p><p><a href="https://www.st.com/content/st_com/zh/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.html">https://www.st.com/content/st_com/zh/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-utilities/stsw-link009.html</a></p><p>å®‰è£…å®Œæˆåæ‰“å¼€è®¾å¤‡ç®¡ç†å™¨ï¼ŒæŸ¥çœ‹é€šç”¨ä¸²è¡Œæ€»çº¿è®¾å¤‡ï¼Œå‡ºç°å¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ™é©±åŠ¨å®‰è£…æˆåŠŸ</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001165811036.png" class="" title="image-20201001165811036"><h4 id="CH340ä¸²å£é©±åŠ¨å®‰è£…"><a href="#CH340ä¸²å£é©±åŠ¨å®‰è£…" class="headerlink" title="CH340ä¸²å£é©±åŠ¨å®‰è£…"></a>CH340ä¸²å£é©±åŠ¨å®‰è£…</h4><p>ç›´æ¥é€šè¿‡äº’è”ç½‘æœç´¢CH340ä¸²å£èŠ¯ç‰‡çš„é©±åŠ¨è¿›è¡Œä¸‹è½½å®‰è£…å³å¯</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001163019855.png" class="" title="image-20201001163019855"><h4 id="å®‰è£…ä¸²å£è°ƒè¯•åŠ©æ‰‹"><a href="#å®‰è£…ä¸²å£è°ƒè¯•åŠ©æ‰‹" class="headerlink" title="å®‰è£…ä¸²å£è°ƒè¯•åŠ©æ‰‹"></a>å®‰è£…ä¸²å£è°ƒè¯•åŠ©æ‰‹</h4><p>å·¥å…·ä¸‹è½½ï¼š<a href="http://www.daxia.com/download/sscom.rar">http://www.daxia.com/download/sscom.rar</a></p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001164049729.png" class="" title="image-20201001164049729"><p>æ ¹æ®PCå’Œç»ˆç«¯ä¹‹é—´çš„è¿æ¥é€‰æ‹©æ­£ç¡®çš„ä¸²è¡Œç«¯å£ã€‚</p><p>æ‰“å¼€è®¾å¤‡ç®¡ç†å™¨ï¼Œåœ¨ç«¯å£åˆ—è¡¨ï¼ˆå¦‚æœæ²¡æœ‰ç«¯å£é€‰é¡¹éœ€è¦åœ¨â€œæŸ¥çœ‹â€ä¸­é€‰å–â€œæ˜¾ç¤ºéšè—çš„è®¾å¤‡â€ï¼‰ä¸­å¯ä»¥çœ‹åˆ°è¿æ¥æ‰€ä½¿ç”¨çš„ç«¯å£å·</p><p><del>è¿™é‡Œé‡åˆ°ä¸€ä¸ªéå¸¸è ¢çš„é—®é¢˜ï¼šSTLinkå’ŒUSBéœ€è¦åŒæ—¶è¿æ¥åˆ°æ¿å­ä¸Šï¼Œå¦åˆ™å°±ä¼šå‡ºç°ç”µè„‘ä¸è¯†åˆ«CH340è®¾å¤‡çš„ç°è±¡</del></p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001172758481.png" class="" title="image-20201001172758481"><h2 id="0x03-çƒ§å†™è…¾è®¯äº‘å®šåˆ¶å›ºä»¶"><a href="#0x03-çƒ§å†™è…¾è®¯äº‘å®šåˆ¶å›ºä»¶" class="headerlink" title="0x03. çƒ§å†™è…¾è®¯äº‘å®šåˆ¶å›ºä»¶"></a>0x03. çƒ§å†™è…¾è®¯äº‘å®šåˆ¶å›ºä»¶</h2><h4 id="ä¸‹è½½å›ºä»¶"><a href="#ä¸‹è½½å›ºä»¶" class="headerlink" title="ä¸‹è½½å›ºä»¶"></a>ä¸‹è½½å›ºä»¶</h4><p>ä¸‹è½½é“¾æ¥ï¼š<a href="https://github.com/tencentyun/qcloud-iot-esp-wifi">https://github.com/tencentyun/qcloud-iot-esp-wifi</a> ã€</p><p>ä½¿ç”¨gitä¸‹è½½çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/tencentyun/qcloud-iot-esp-wifi.git</code></pre><h4 id="ä¸‹è½½çƒ§å†™å·¥å…·"><a href="#ä¸‹è½½çƒ§å†™å·¥å…·" class="headerlink" title="ä¸‹è½½çƒ§å†™å·¥å…·"></a>ä¸‹è½½çƒ§å†™å·¥å…·</h4><p>å‰å¾€ä¹é‘«å®˜ç½‘ä¸‹è½½Flashä¸‹è½½å·¥å…·ï¼š</p><p><a href="https://www.espressif.com/zh-hans/support/download/other-tools">https://www.espressif.com/zh-hans/support/download/other-tools</a></p><h4 id="å›ºä»¶è¯´æ˜"><a href="#å›ºä»¶è¯´æ˜" class="headerlink" title="å›ºä»¶è¯´æ˜"></a>å›ºä»¶è¯´æ˜</h4><p>è…¾è®¯äº‘IoTå®šåˆ¶çš„ATæ¨¡ç»„å›ºä»¶QCloud_IoT_AT_ESP8266ï¼Œé€‚ç”¨äºæ‰€æœ‰FLASHå¤§å°ä¸º2MBæˆ–è€…2MBä»¥ä¸Šçš„ ESP8266æ¨¡ç»„ã€‚ </p><p>ATä¸²å£ä½¿ç”¨UART0ï¼Œé»˜è®¤çš„Txä¸ºGPIO1ï¼ŒRxä¸ºGPIO3ã€‚ä½†å› ä¸ºESP8266çš„UART0 é»˜è®¤ä¼šåœ¨ä¸Šç”µå¯åŠ¨æœŸ é—´è¾“å‡ºä¸€äº›æ‰“å°ï¼Œå¦‚æœæ‰“å°ä¿¡æ¯å½±å“è®¾å¤‡åŠŸèƒ½ï¼Œå¯åœ¨ä¸Šç”µæœŸé—´å°† U0TXD(GPIO1)ã€U0RXD(GPIO3) åˆ†åˆ« ä¸ U0RTS (GPIO15)ï¼ŒU0CTS(GPIO13)è¿›è¡Œäº¤æ¢ï¼Œä»¥å±è”½æ‰“å°ã€‚å› æ­¤æä¾›ä¸¤ä¸ªç‰ˆæœ¬çš„å›ºä»¶ï¼š</p><ul><li>åç§°åŒ…å«UART_1_3çš„å›ºä»¶ä¸²å£ä½¿ç”¨çš„Txä¸ºGPIO1ï¼ŒRxä¸ºGPIO3ã€‚ </li><li>åç§°åŒ…å«UART_15_13çš„å›ºä»¶ä¸²å£ä½¿ç”¨çš„Txä¸ºGPIO15ï¼ŒRxä¸ºGPIO13ã€‚ </li></ul><p>è¿›å…¥QCloud_IoT_AT_ESP8266_FWï¼Œæœ¬æ–‡ä¸­æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸€ä¸ªå›ºä»¶</p><h4 id="çƒ§å†™å›ºä»¶"><a href="#çƒ§å†™å›ºä»¶" class="headerlink" title="çƒ§å†™å›ºä»¶"></a>çƒ§å†™å›ºä»¶</h4><h5 id="è¿è¡Œä¸‹è½½çš„ä¹é‘«Flashçƒ§å†™å·¥å…·"><a href="#è¿è¡Œä¸‹è½½çš„ä¹é‘«Flashçƒ§å†™å·¥å…·" class="headerlink" title="è¿è¡Œä¸‹è½½çš„ä¹é‘«Flashçƒ§å†™å·¥å…·"></a>è¿è¡Œä¸‹è½½çš„ä¹é‘«Flashçƒ§å†™å·¥å…·</h5><ol><li><p>é€‰æ‹©Develop Mode</p></li><li><p>é€‰æ‹©ESP8266ä¸‹è½½å·¥å…·</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001175540012.png" class="" title="image-20201001175540012"><p>æŒ‰ç…§ä¸Šå›¾è®¾ç½®è¿›è¡Œé…ç½®ç‚¹å‡»Startåç­‰å¾…ä¸‹è½½å®Œæˆ</p></li><li><p>ä¸‹è½½å®Œæˆ</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001175803789.png" class="" title="image-20201001175803789"><p>å®Œæˆåå³å¯å…³é—­å·¥å…·ï¼Œ<strong>å°†ä¸²å£é€‰æ‹©ç«¯å­æ¢å¤åˆ°é»˜è®¤çŠ¶æ€</strong></p></li></ol><h2 id="0x04-æ¥å…¥è…¾è®¯äº‘IoT"><a href="#0x04-æ¥å…¥è…¾è®¯äº‘IoT" class="headerlink" title="0x04. æ¥å…¥è…¾è®¯äº‘IoT"></a>0x04. æ¥å…¥è…¾è®¯äº‘IoT</h2><h3 id="äº‘ç«¯æ“ä½œ"><a href="#äº‘ç«¯æ“ä½œ" class="headerlink" title="äº‘ç«¯æ“ä½œ"></a>äº‘ç«¯æ“ä½œ</h3><h4 id="æ–°å»ºé¡¹ç›®åŠäº§å“"><a href="#æ–°å»ºé¡¹ç›®åŠäº§å“" class="headerlink" title="æ–°å»ºé¡¹ç›®åŠäº§å“"></a>æ–°å»ºé¡¹ç›®åŠäº§å“</h4><p>é¡¹ç›®åŠäº§å“åˆ›å»ºæ—¶ä¿ç•™é»˜è®¤é€‰é¡¹å³å¯</p><h4 id="æ•°æ®æ¨¡æ¿"><a href="#æ•°æ®æ¨¡æ¿" class="headerlink" title="æ•°æ®æ¨¡æ¿"></a>æ•°æ®æ¨¡æ¿</h4><p>äº§å“ç•Œé¢ç‚¹å‡»â€œæ•°æ®æ¨¡æ¿â€ï¼Œç‚¹å‡»â€œå¯¼å…¥jsonâ€ï¼Œå¯¼å…¥å¦‚ä¸‹çš„jsonä»£ç </p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>  <span class="token property">"profile"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"ProductId"</span><span class="token operator">:</span> <span class="token string">"BDDSF87WEA"</span><span class="token punctuation">,</span>    <span class="token property">"CategoryId"</span><span class="token operator">:</span> <span class="token string">"1"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"ch20_ppm_value"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç”²é†›æµ“åº¦å€¼"</span><span class="token punctuation">,</span>      <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>      <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"r"</span><span class="token punctuation">,</span>      <span class="token property">"define"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"float"</span><span class="token punctuation">,</span>        <span class="token property">"min"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>        <span class="token property">"max"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>        <span class="token property">"step"</span><span class="token operator">:</span> <span class="token string">"0.001"</span><span class="token punctuation">,</span>        <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"ppm(mg/m3)"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"required"</span><span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"events"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"actions"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><h4 id="åˆ›å»ºè®¾å¤‡"><a href="#åˆ›å»ºè®¾å¤‡" class="headerlink" title="åˆ›å»ºè®¾å¤‡"></a>åˆ›å»ºè®¾å¤‡</h4><p>ç‚¹å‡»â€œè®¾å¤‡è°ƒè¯•â€ï¼Œè¿›å…¥åç‚¹å‡»â€œæ–°å»ºè®¾å¤‡â€ï¼Œåˆ›å»ºæˆåŠŸåè¿›å…¥è®¾å¤‡å¯ä»¥çœ‹åˆ°äº§å“IDã€è®¾å¤‡åç§°ã€è®¾å¤‡å¯†é’¥ç­‰ç›¸å…³ä¿¡æ¯ï¼›</p><h3 id="ä¼ æ„Ÿå™¨ç«¯æ“ä½œ"><a href="#ä¼ æ„Ÿå™¨ç«¯æ“ä½œ" class="headerlink" title="ä¼ æ„Ÿå™¨ç«¯æ“ä½œ"></a>ä¼ æ„Ÿå™¨ç«¯æ“ä½œ</h3><p>è¿›å…¥ &lt; TencentOS-tiny\board\TencentOS_tiny_EVB_G0\KEIL\mqtt_iot_explorer_tc_ch20_oled&gt; ç›®å½•ï¼Œæ‰“å¼€TencentOS_tiny.uvprojxå·¥ç¨‹ã€‚</p><h4 id="ä¿®æ”¹Wifiæ¥å…¥ä¿¡æ¯"><a href="#ä¿®æ”¹Wifiæ¥å…¥ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹Wifiæ¥å…¥ä¿¡æ¯"></a>ä¿®æ”¹Wifiæ¥å…¥ä¿¡æ¯</h4><p>ç¼–è¾‘<code>mqtt_iot_explorer_tc_ch20_oled.c</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>esp8266_tencent_firmware_join_ap</code>å‡½æ•°ä¸­çš„è¦æ¥å…¥çš„WiFiåç§°å’Œå¯†ç </p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001200336241.png" class="" title="image-20201001200336241"><h4 id="ä¿®æ”¹äº‘ç«¯å¯¹æ¥ä¿¡æ¯"><a href="#ä¿®æ”¹äº‘ç«¯å¯¹æ¥ä¿¡æ¯" class="headerlink" title="ä¿®æ”¹äº‘ç«¯å¯¹æ¥ä¿¡æ¯"></a>ä¿®æ”¹äº‘ç«¯å¯¹æ¥ä¿¡æ¯</h4><p>ä¿®æ”¹æ–‡ä»¶ä¸­çš„å®å®šä¹‰ï¼Œå¯¹åº”è…¾è®¯äº‘ä¸­çš„é…ç½®ä¿¡æ¯</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001200710678.png" class="" title="image-20201001200710678"><p><del><strong>æ­¤å¤„å¯è‡ªè¡Œå‘æŒ¥ä¿®æ”¹ç¨‹åºä»£ç ï¼Œå®ç°æ›´åŠ å¤æ‚æœ‰è¶£çš„åŠŸèƒ½</strong></del></p><h4 id="ç¼–è¯‘ä¸‹è½½"><a href="#ç¼–è¯‘ä¸‹è½½" class="headerlink" title="ç¼–è¯‘ä¸‹è½½"></a>ç¼–è¯‘ä¸‹è½½</h4><p>ç¼–è¯‘å®Œæˆ-&gt;è¿›å…¥å·¥ç¨‹é…ç½®ç•Œé¢-&gt;é€‰æ‹©debugé€‰é¡¹-&gt;é€‰æ‹©ST-Link Debugger-&gt;ç‚¹å‡»settings è¯¥é¡µé¢ä¸­çš„Unité€‰æ‹©ST-Link/V2ï¼ŒPorté€‰æ‹©SWï¼Œç‚¹å‡»ç¡®è®¤ä¿å­˜é…ç½®ï¼›</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/@9ZW3%60FJ%60Z9RJ9%60LLK7AO8A.png" class="" title="img"><p>å›åˆ°ä¸»ç•Œé¢ç‚¹å‡»ä¸‹è½½ï¼›</p><h4 id="ä½¿ç”¨ä¸²å£åŠ©æ‰‹æŸ¥çœ‹æ—¥å¿—"><a href="#ä½¿ç”¨ä¸²å£åŠ©æ‰‹æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="ä½¿ç”¨ä¸²å£åŠ©æ‰‹æŸ¥çœ‹æ—¥å¿—"></a>ä½¿ç”¨ä¸²å£åŠ©æ‰‹æŸ¥çœ‹æ—¥å¿—</h4><p>æ‰“å¼€ä¸²å£åŠ©æ‰‹åï¼Œç‚¹å‡»æ‰“å¼€ä¸²å£ï¼Œç‚¹å‡»å¼€å‘æ¿ä¸Šçš„resetæŒ‰é’®ï¼Œç¨‹åºå¼€å§‹è¿è¡Œï¼Œå¯åœ¨ä¸»ç•Œé¢ä¸­æŸ¥çœ‹è¿è¡Œæ—¥å¿—</p><p>WiFiè¿æ¥æˆåŠŸ</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/U1%5B2$YTXDK@T0G@VTI01PSP.png" class="" title="img"><p>æ¥å…¥äº‘å¹³å°æˆåŠŸ</p><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001204024547.png" class="" title="image-20201001204024547"><p>ä¸Šè¿°æ­¥éª¤å®Œæˆåå³å¯å›åˆ°è…¾è®¯äº‘ç•Œé¢æŸ¥çœ‹æ•°æ®ä¸ŠæŠ¥æƒ…å†µ</p><h2 id="0x05-æˆå“å±•ç¤º"><a href="#0x05-æˆå“å±•ç¤º" class="headerlink" title="0x05. æˆå“å±•ç¤º"></a>0x05. æˆå“å±•ç¤º</h2><ul><li>å¼€å‘æ¿</li></ul><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001215542720.png" class="" title="image-20201001215542720"><ul><li>è…¾è®¯äº‘æ•°æ®å±•ç¤ºç•Œé¢</li></ul><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001215415580.png" class="" title="image-20201001215415580"><ul><li>è…¾è®¯è¿è¿å°ç¨‹åºæ•°æ®å±•ç¤ºç•Œé¢</li></ul><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001215931807.png" class="" title="image-20201001215931807"><ul><li>è…¾è®¯è¿è¿å…¬ä¼—å·æ•°æ®æŠ¥è­¦ç•Œé¢</li></ul><img src="/xyzhangblog/2020/10/01/iot/tencentostiny-jia-quan-chuan-gan-qi/tencentostiny-ti-yan/image-20201001215758591.png" class="" title="image-20201001215758591"><h2 id="0x06-åè®°"><a href="#0x06-åè®°" class="headerlink" title="0x06. åè®°"></a>0x06. åè®°</h2><p>æ„Ÿè°¢ @supowang å¤§ä½¬æä¾›çš„æå…¶è¯¦ç»†çš„<a href="http://mk.oa.com/note/817">æ•™ç¨‹</a>ï¼Œæœ¬æ–‡ä¸­å¤§éƒ¨åˆ†å†…å®¹æ¥è‡ªäºå…¶æ‰€å†™çš„æ•™ç¨‹æ­¥éª¤ï¼Œå¦å¤–æ·»åŠ äº†å°‘éƒ¨åˆ†è‡ªå·±åœ¨å®è·µè¿‡ç¨‹ä¸­çš„è¸©å‘è®°å½•ï¼Œåç»­æœ‰æ—¶é—´ä¼šå°è¯•æ¥å…¥å…¶ä»–ä¼ æ„Ÿå™¨å®Œæˆæ›´å¤æ‚æ›´å¥½ç©çš„å®è·µã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> IoT </tag>
            
            <tag> TencentOS-Tiny </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Blockä½¿ç”¨æ€»ç»“</title>
      <link href="/xyzhangblog/2020/09/24/ios-kai-fa/block-shi-yong-zong-jie/block-shi-yong-zong-jie/"/>
      <url>/xyzhangblog/2020/09/24/ios-kai-fa/block-shi-yong-zong-jie/block-shi-yong-zong-jie/</url>
      
        <content type="html"><![CDATA[<h3 id="Blockåº”ç”¨åœºæ™¯"><a href="#Blockåº”ç”¨åœºæ™¯" class="headerlink" title="Blockåº”ç”¨åœºæ™¯"></a>Blockåº”ç”¨åœºæ™¯</h3><ol><li><p>å“åº”äº‹ä»¶</p><blockquote><p>éœ€æ±‚ï¼šUIViewControllerä¸­ä½¿ç”¨UICollectionViewæ„é€ é›†åˆè§†å›¾ï¼Œåœ¨é›†åˆè§†å›¾ä¸­è‡ªå®šä¹‰Cellï¼Œæ¯ä¸ªCellä¸­æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œéœ€è¦ç›‘å¬è¯¥æŒ‰é’®å¹¶å¯¹å…¶åšå‡ºç›¸åº”</p></blockquote><p>åœ¨CellViewä¸­å£°æ˜Blockç±»å‹çš„å±æ€§ï¼Œåœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨è¯¥block</p><pre class=" language-objective-c"><code class="language-objective-c">//æŒ‰é’®ç‚¹å‡»Block@property (nonatomic, copy) void (^btnClickedBlock)(void);// æ¿€æ´»äº‹ä»¶#pragma mark - æŒ‰é’®ç‚¹å‡»äº‹ä»¶- (IBAction)btnClickedAction:(UIButton *)sender {    if (self.btnClickedBlock) {        self.btnClickedBlock();    }}</code></pre><p>åœ¨ViewControllerä¸­è°ƒç”¨UICollectionViewç”Ÿæˆcellçš„ä»£ç†æ–¹æ³•<code>- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath</code>æ—¶ï¼Œä½¿ç”¨setteræ–¹æ³•è®¾ç½®CellViewä¸­çš„blockå±æ€§ï¼Œå…¶ä¸­åŒ…å«æŒ‰é’®ç‚¹å‡»åæ‰§è¡Œçš„é€»è¾‘ã€‚â€”å¯ä»¥ä¸åœ¨å®šä¹‰CellViewæ—¶ç¡®å®šå…¶æ‰§è¡Œé€»è¾‘ï¼Œè€Œæ˜¯é€šè¿‡å¤–éƒ¨çš„setteræ–¹æ³•ç¡®å®š</p><pre class=" language-objective-c"><code class="language-objective-c">// è®¾ç½®cell å“åº”äº‹ä»¶cell.btnClickedBlock = ^(UIButton *sender) {    // æ‰§è¡Œé€»è¾‘};</code></pre></li><li><p>ä¼ é€’æ•°æ®</p><blockquote><p>åœ¨UICollectionViewä¸­è·å–é€‰ä¸­Cellçš„åºå·ï¼Œæ ¹æ®é€‰ä¸­çš„Cellæ‰§è¡Œä¸åŒé€»è¾‘</p></blockquote><pre class=" language-objective-c"><code class="language-objective-c">@property (strong, nonatomic) void (^handleDidSelectedItem)(int indexPath);- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{    [tableView deselectRowAtIndexPath:indexPath animated:YES];    _handleDidSelectedItem ? _handleDidSelectedItem(indexPath) : NULL;}</code></pre></li></ol><h3 id="Blockä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#Blockä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="Blockä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>Blockä½¿ç”¨æ³¨æ„äº‹é¡¹</h3><ol><li><p>å±€éƒ¨å˜é‡ä¸__blockä¿®é¥°ç¬¦</p><p>blockä¼šåœ¨æ‰€åœ¨å‡½æ•°ä¸­æ•è·å±€éƒ¨å˜é‡ï¼Œä½†æ— æ³•ä¿®æ”¹å±€éƒ¨å˜é‡ï¼Œå¯ä»¥ä¿®æ”¹å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€‚</p><ul><li>ä¸èƒ½ä¿®æ”¹å±€éƒ¨å˜é‡ï¼šblockæ•è·çš„æ˜¯å±€éƒ¨å˜é‡çš„constå€¼ï¼Œåªæ˜¯åå­—ä¸€æ ·æ— æ³•ä¿®æ”¹ï¼Œå¦‚æœæƒ³ä¿®æ”¹å±€éƒ¨å˜é‡å¯ä»¥åœ¨å®šä¹‰æ—¶ä½¿ç”¨__blockä¿®é¥°ã€‚</li><li>å¯ä»¥ä¿®æ”¹é™æ€å˜é‡ï¼šé™æ€å˜é‡å±äºç±»ï¼Œå¯ä»¥åœ¨blockä¸­è°ƒç”¨</li></ul></li><li><p>å¾ªç¯å¼•ç”¨é—®é¢˜</p><p>SelfæŒæœ‰Blockå¯¹è±¡, åŒæ—¶åœ¨Blockå†…éƒ¨åˆè°ƒç”¨äº†Self, å¯¼è‡´äº†SelfæŒæœ‰Block, BlockåˆæŒæœ‰Selfï¼Œé‚£å°±ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨</p><ul><li><p>TestCycleRetain.m</p><pre class=" language-objective-c"><code class="language-objective-c">- (void) dealloc {    NSLog(@"no cycle retain");} - (id) init {    self = [super init];    if (self) {        #if TestCycleRetainCase1        //ä¼šå¾ªç¯å¼•ç”¨        self.myblock = ^{            [self doSomething];        };        #endif NSLog(@"myblock is %@", self.myblock);    }    return self;} </code></pre></li></ul><p>å¾ªç¯å¼•ç”¨çš„é¿å…ï¼šå£°æ˜ä¸€ä¸ªselfçš„å¼±æŒ‡é’ˆï¼Œåœ¨blockä¸­å¼•ç”¨è¯¥å¼±æŒ‡é’ˆ</p><pre class=" language-objective-c"><code class="language-objective-c">                #elif TestCycleRetainCase3        //ä¸ä¼šå¾ªç¯å¼•ç”¨        __weak TestCycleRetain * weakSelf = self;        self.myblock = ^{            [weakSelf doSomething];        };</code></pre><p>ä¸Šè¿°ä½¿ç”¨blockä¸­å­˜åœ¨ä¸€ä¸ªéšæ‚£ï¼Œä¸çŸ¥é“selfä»€ä¹ˆæ—¶å€™ä¼šè¢«é‡Šæ”¾ï¼Œä¸ºäº†ä¿è¯åœ¨blockä¸­ä¸ä¼šè¢«é‡Šæ”¾ï¼Œéœ€è¦é…åˆstrongæ¥ä½¿ç”¨</p><pre class=" language-objective-c"><code class="language-objective-c">__weak __typeof(self) weakSelf = self; self.testBlock =  ^{    __strong __typeof(weakSelf) strongSelf = weakSelf;       [strongSelf test]; });</code></pre><blockquote><p>From: Raven</p><p>ä»¥ä¸Šæ“ä½œå¸¦æ¥ä¸€ä¸ªç–‘é—®:<strong>é€šè¿‡å¼±å¼•ç”¨æ¥è§¦å¾ªç¯å¼•ç”¨çš„Self, å¦‚æœåœ¨Blockå†…éƒ¨å†å¼ºå¼•ç”¨, å²‚ä¸æ˜¯åˆå¾ªç¯å¼•ç”¨äº†å—?åˆ°åº•æ˜¯å¦‚ä½•å»¶é•¿Selfçš„ç”Ÿå‘½å‘¨æœŸçš„?</strong></p><p><strong>è§£ç­”</strong>:</p><p>blockè¢«èµ‹å€¼åˆ°<code>self</code>çš„æˆå‘˜å˜é‡æ—¶, arcä¸‹ç³»ç»Ÿä¼šå°†è¯¥blockä»æ ˆåŒºæ‹·è´åˆ°å †åŒº, æ­¤æ—¶blockä¼šæ•è·å®ƒæ‰€ç”¨åˆ°çš„å˜é‡ä½¿ç”¨<code>__weak</code>å¯ä»¥ä¿è¯blockå’Œ<code>self</code>ä¹‹é—´ä¸ä¼šå‘ç”Ÿå¾ªç¯å¼•ç”¨, è€Œåœ¨Blockçš„ä»£ç å—å†…å£°æ˜<code>_ _strong</code>æŒ‡é’ˆ, å°†ä¼šå¯¹selfäº§ç”Ÿä¸€ä¸ªå¼ºå¼•ç”¨å»¶è¿Ÿselfçš„é‡Šæ”¾, ä½†å’Œç›´æ¥ä½¿ç”¨<code>self</code>æ‰€ä¸åŒçš„æ˜¯, <strong>åœ¨Blockå†…å£°æ˜çš„æŒ‡é’ˆä¼šåœ¨Blockçš„ä½œç”¨åŸŸå¤–é”€æ¯</strong>, å› æ­¤è¿™ä¸ªå¾ªç¯å¼•ç”¨åªä¼šæŒç»­åˆ°blockæ‰§è¡Œå®Œæ¯•ä¸ºæ­¢, å½“blockæ‰§è¡Œå®Œæ¯•, strongSelfè¢«é”€æ¯, <code>self</code>ä¸å†è¢«Blockæ‰€æŒæœ‰, å°±å¯ä»¥é¡ºåˆ©é‡Šæ”¾äº†.</p></blockquote></li></ol><ol start="3"><li><p>å¹¶ä¸æ˜¯æ‰€æœ‰Blocké‡Œé¢çš„selféƒ½éœ€è¦weak</p><ul><li><p>è°ƒç”¨ç³»ç»Ÿæ–¹æ³•ï¼š</p><pre class=" language-objective-c"><code class="language-objective-c">[UIView animateWithDuration:0.5 animations:^{        NSLog(@"%@", self);}];</code></pre><p>è¿™ä¸ªblockæœ¬èº«å­˜åœ¨äºé™æ€æ–¹æ³•ä¸­ï¼Œè™½ç„¶blockå¯¹selfå¼ºå¼•ç”¨ï¼Œä½†selfä¸æŒæœ‰è¯¥é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥åœ¨blockå†…éƒ¨ä½¿ç”¨self</p></li></ul></li></ol><h3 id="blockä¸å†…å­˜ç®¡ç†"><a href="#blockä¸å†…å­˜ç®¡ç†" class="headerlink" title="blockä¸å†…å­˜ç®¡ç†"></a>blockä¸å†…å­˜ç®¡ç†</h3><p>æ ¹æ®Blockåœ¨å†…å­˜ä¸­çš„ä½ç½®åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><ul><li>NSGlobalBlockï¼šå…¨å±€åŒºblockï¼Œè®¾ç½®åœ¨ç¨‹åºçš„æ•°æ®åŒºåŸŸä¸­</li><li>NSStackBlockï¼šæ ˆåŒºï¼Œè¶…å‡ºå˜é‡ä½œç”¨åŸŸåˆ™æ ˆä¸Šçš„Blockå’Œ__blockå˜é‡éƒ½è¢«é”€æ¯</li><li>NSMallocBlockï¼šå †åŒºï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ä¸å—å½±å“</li></ul><ol><li><p>ä½äºå…¨å±€åŒºï¼šGlobalBlock</p><p>ç”Ÿæˆåœ¨å…¨å±€åŒºçš„blockçš„æƒ…å†µï¼š</p><ul><li><p>ç›´æ¥å°†blockå®šä¹‰ä¸ºå…¨å±€å˜é‡</p><pre class=" language-objective-c"><code class="language-objective-c">void(^block)(void) = ^ { NSLog(@"Global Block");};int main() {}</code></pre></li></ul></li><li><p>ä½äºæ ˆå†…å­˜ï¼šStackBlock â€“æœ€å¸¸è§çš„block</p><pre class=" language-objective-c"><code class="language-objective-c">NSInteger i = 10; block = ^{      NSLog(@"%ld", i); };block;</code></pre></li><li><p>ä½äºå †å†…å­˜ï¼šMallocBlock</p><p>å †ä¸­blockæ— æ³•ç›´æ¥åˆ›å»ºï¼Œéœ€è¦æ‰§è¡Œcopyåæ‰èƒ½æ”¾å…¥å †ä¸­</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Block </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
